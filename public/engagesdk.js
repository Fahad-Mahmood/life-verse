!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(function(){try{return require("react-native")}catch(e){}}(),require("react-native-webrtc-rad")):"function"==typeof define&&define.amd?define(["react-native","react-native-webrtc-rad"],t):"object"==typeof exports?exports.EngageDigital=t(function(){try{return require("react-native")}catch(e){}}(),require("react-native-webrtc-rad")):e.EngageDigital=t(e["react-native"],e["react-native-webrtc-rad"])}(window,(function(e,t){return r=[function(e,t,n){function r(e,t,n){var c,f,d,h=e&r.F,p=e&r.G,v=e&r.P,_=e&r.B,g=p?i:e&r.S?i[t]||(i[t]={}):(i[t]||{})[s],m=p?o:o[t]||(o[t]={}),y=m[s]||(m[s]={});for(c in n=p?t:n)f=((d=!h&&g&&void 0!==g[c])?g:n)[c],d=_&&d?a(f,i):v&&"function"==typeof f?a(Function.call,f):f,g&&u(g,c,f,e&r.U),m[c]!=f&&l(m,c,d),v&&y[c]!=f&&(y[c]=f)}var i=n(2),o=n(24),l=n(17),u=n(18),a=n(25),s="prototype";i.core=o,r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,r.U=64,r.R=128,e.exports=r},function(e,t,n){var r=n(4);e.exports=function(e){if(r(e))return e;throw TypeError(e+" is not an object!")}},function(e,t){e=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),"number"==typeof __g&&(__g=e)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";var r=n(109),i=n(13),o=n(52),l=n(16),u=n(362),a=n(53),s=n(110),c=n(33),f=n(383),d=n(14),h=n(153);e.exports={C:i,Exceptions:o,Utils:l,UA:u,URI:a,NameAddrHeader:s,WebSocketInterface:f,Grammar:c,debug:n(111),Logger:d,logHandler:h,get name(){return r.title},get version(){return r.version}}},function(e,t,n){var r=n(60)("wks"),i=n(42),o=n(2).Symbol,l="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=l&&o[e]||(l?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(27),i=Math.min;e.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},function(e,t,n){e.exports=!n(3)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(364);n=n(365);t.write=n,t.parse=r.parse,t.parseParams=r.parseParams,t.parseFmtpConfig=r.parseFmtpConfig,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},function(e,t,n){n=n(109),e.exports={USER_AGENT:n.title+" "+n.version,SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2}},function(e,t,n){var r=n(1),i=n(115),o=n(29),l=Object.defineProperty;t.f=n(8)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(30);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";n=n(109),e.exports={USER_AGENT:"".concat(n.title," ").concat(n.version),SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1})}var l=n(111),u=n(153),a="EngageDigital",s=function(){function e(t){r(this,e),this.realDebugLogger=t}return o(e,[{key:"log",value:function(){(u.logSettings.console.enable||u.logSettings.blob.enable)&&this.realDebugLogger.apply(this,arguments)}}]),e}();e.exports=function(){function e(t){r(this,e),t?(this.debugWrapper=new s(l("".concat(a,":").concat(t))),this.warnWrapper=new s(l("".concat(a,":").concat(t,":WARN"))),this.errorWrapper=new s(l("".concat(a,":").concat(t,":ERROR")))):(this.debugWrapper=new s(l(a)),this.warnWrapper=new s(l("".concat(a,":WARN"))),this.errorWrapper=new s(l("".concat(a,":ERROR")))),this._debug=this.debugWrapper.log.bind(this.debugWrapper),this._warn=this.warnWrapper.log.bind(this.warnWrapper),this._error=this.errorWrapper.log.bind(this.errorWrapper),this.debugWrapper.realDebugLogger.log=u.info.bind(u),this.warnWrapper.realDebugLogger.log=u.warn.bind(u),this.errorWrapper.realDebugLogger.log=u.error.bind(u)}return o(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}()},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n(13),u=n(53),a=n(33),s=(t.str_utf8_length=function(e){return unescape(encodeURIComponent(e)).length},t.isFunction=function(e){return void 0!==e&&"[object Function]"===Object.prototype.toString.call(e)}),c=(t.isString=function(e){return void 0!==e&&"[object String]"===Object.prototype.toString.call(e)},t.isDecimal=function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},t.isEmpty=function(e){return null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e)},t.hasMethods=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var l=o[i];if(s(e[l]))return!1}return!0},t.createRandomToken=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:32,n="",r=0;r<e;r++)n+=(Math.random()*t|0).toString(t);return n}),f=(t.newTag=function(){return c(10)},t.newUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.hostType=function(e){if(e&&-1!==(e=a.parse(e,"host")))return e.host_type},t.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")});t.normalizeTarget=function(e,t){if(e){if(e instanceof u)return e;if("string"==typeof e){var n,r,i,o=e.split("@");switch(o.length){case 1:if(!t)return;n=e,r=t;break;case 2:n=o[0],r=o[1];break;default:n=o.slice(0,o.length-1).join("@"),r=o[o.length-1]}if(n=n.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(n)&&(n=n.replace(/[-.()]/g,"")),e="".concat(l.SIP,":").concat(f(n),"@").concat(r),i=u.parse(e))return i}}},t.headerize=function(e){for(var t={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},n=e.toLowerCase().replace(/_/g,"-").split("-"),r="",i=n.length,o=0;o<i;o++)0!==o&&(r+="-"),r+=n[o].charAt(0).toUpperCase()+n[o].substring(1);return t[r]?t[r]:r},t.sipErrorCause=function(e){for(var t in l.SIP_ERROR_CAUSES)if(-1!==l.SIP_ERROR_CAUSES[t].indexOf(e))return l.causes[t];return l.causes.SIP_FAILURE_CODE},t.getRandomTestNetIP=function(){return"192.0.2.".concat((1,254,Math.floor(254*Math.random()+1)))},t.calculateMD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n=2147483648&e,r=2147483648&t,i=1073741824&e,o=1073741824&t;e=(1073741823&e)+(1073741823&t);return i&o?2147483648^e^n^r:i|o?1073741824&e?3221225472^e^n^r:1073741824^e^n^r:e^n^r}function r(e,r,i,o,l,u,a){return e=n(e,n(n(r&i|~r&o,l),a)),n(t(e,u),r)}function i(e,r,i,o,l,u,a){return e=n(e,n(n(r&o|i&~o,l),a)),n(t(e,u),r)}function o(e,r,i,o,l,u,a){return e=n(e,n(n(r^i^o,l),a)),n(t(e,u),r)}function l(e,r,i,o,l,u,a){return e=n(e,n(n(i^(r|~o),l),a)),n(t(e,u),r)}function u(e){for(var t="",n="",r=0;r<=3;r++)t+=(n="0".concat((e>>>8*r&255).toString(16))).substr(n.length-2,2);return t}for(var a,s,c,f,d=function(e){for(var t,n=e.length,r=16*(1+((r=n+8)-r%64)/64),i=new Array(r-1),o=0,l=0;l<n;)o=l%4*8,i[t=(l-l%4)/4]=i[t]|e.charCodeAt(l)<<o,l++;return i[t=(l-l%4)/4]=i[t]|128<<(o=l%4*8),i[r-2]=n<<3,i[r-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):t=127<r&&r<2048?(t+=String.fromCharCode(r>>6|192))+String.fromCharCode(63&r|128):(t=(t+=String.fromCharCode(r>>12|224))+String.fromCharCode(r>>6&63|128))+String.fromCharCode(63&r|128)}return t}(e)),h=1732584193,p=4023233417,v=2562383102,_=271733878,g=0;g<d.length;g+=16)h=r(a=h,s=p,c=v,f=_,d[g+0],7,3614090360),_=r(_,h,p,v,d[g+1],12,3905402710),v=r(v,_,h,p,d[g+2],17,606105819),p=r(p,v,_,h,d[g+3],22,3250441966),h=r(h,p,v,_,d[g+4],7,4118548399),_=r(_,h,p,v,d[g+5],12,1200080426),v=r(v,_,h,p,d[g+6],17,2821735955),p=r(p,v,_,h,d[g+7],22,4249261313),h=r(h,p,v,_,d[g+8],7,1770035416),_=r(_,h,p,v,d[g+9],12,2336552879),v=r(v,_,h,p,d[g+10],17,4294925233),p=r(p,v,_,h,d[g+11],22,2304563134),h=r(h,p,v,_,d[g+12],7,1804603682),_=r(_,h,p,v,d[g+13],12,4254626195),v=r(v,_,h,p,d[g+14],17,2792965006),h=i(h,p=r(p,v,_,h,d[g+15],22,1236535329),v,_,d[g+1],5,4129170786),_=i(_,h,p,v,d[g+6],9,3225465664),v=i(v,_,h,p,d[g+11],14,643717713),p=i(p,v,_,h,d[g+0],20,3921069994),h=i(h,p,v,_,d[g+5],5,3593408605),_=i(_,h,p,v,d[g+10],9,38016083),v=i(v,_,h,p,d[g+15],14,3634488961),p=i(p,v,_,h,d[g+4],20,3889429448),h=i(h,p,v,_,d[g+9],5,568446438),_=i(_,h,p,v,d[g+14],9,3275163606),v=i(v,_,h,p,d[g+3],14,4107603335),p=i(p,v,_,h,d[g+8],20,1163531501),h=i(h,p,v,_,d[g+13],5,2850285829),_=i(_,h,p,v,d[g+2],9,4243563512),v=i(v,_,h,p,d[g+7],14,1735328473),h=o(h,p=i(p,v,_,h,d[g+12],20,2368359562),v,_,d[g+5],4,4294588738),_=o(_,h,p,v,d[g+8],11,2272392833),v=o(v,_,h,p,d[g+11],16,1839030562),p=o(p,v,_,h,d[g+14],23,4259657740),h=o(h,p,v,_,d[g+1],4,2763975236),_=o(_,h,p,v,d[g+4],11,1272893353),v=o(v,_,h,p,d[g+7],16,4139469664),p=o(p,v,_,h,d[g+10],23,3200236656),h=o(h,p,v,_,d[g+13],4,681279174),_=o(_,h,p,v,d[g+0],11,3936430074),v=o(v,_,h,p,d[g+3],16,3572445317),p=o(p,v,_,h,d[g+6],23,76029189),h=o(h,p,v,_,d[g+9],4,3654602809),_=o(_,h,p,v,d[g+12],11,3873151461),v=o(v,_,h,p,d[g+15],16,530742520),h=l(h,p=o(p,v,_,h,d[g+2],23,3299628645),v,_,d[g+0],6,4096336452),_=l(_,h,p,v,d[g+7],10,1126891415),v=l(v,_,h,p,d[g+14],15,2878612391),p=l(p,v,_,h,d[g+5],21,4237533241),h=l(h,p,v,_,d[g+12],6,1700485571),_=l(_,h,p,v,d[g+3],10,2399980690),v=l(v,_,h,p,d[g+10],15,4293915773),p=l(p,v,_,h,d[g+1],21,2240044497),h=l(h,p,v,_,d[g+8],6,1873313359),_=l(_,h,p,v,d[g+15],10,4264355552),v=l(v,_,h,p,d[g+6],15,2734768916),p=l(p,v,_,h,d[g+13],21,1309151649),h=l(h,p,v,_,d[g+4],6,4149444226),_=l(_,h,p,v,d[g+11],10,3174756917),v=l(v,_,h,p,d[g+2],15,718787259),p=l(p,v,_,h,d[g+9],21,3951481745),h=n(h,a),p=n(p,s),v=n(v,c),_=n(_,f);return(u(h)+u(p)+u(v)+u(_)).toLowerCase()},t.closeMediaStream=function(e){if(e)try{if(e.getTracks){var t,n=i(e.getTracks());try{for(n.s();!(t=n.n()).done;)t.value.stop()}catch(t){n.e(t)}finally{n.f()}}else{var o,l=i(e.getAudioTracks());try{for(l.s();!(o=l.n()).done;)o.value.stop()}catch(t){l.e(t)}finally{l.f()}var u,a=i(e.getVideoTracks());try{for(a.s();!(u=a.n()).done;)u.value.stop()}catch(t){a.e(t)}finally{a.f()}}}catch(t){"function"!=typeof e.stop&&"object"!==r(e.stop)||e.stop()}},t.cloneArray=function(e){return e&&e.slice()||[]},t.cloneObject=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e&&Object.assign({},e)||t}},function(e,t,n){var r=n(11),i=n(41);e.exports=n(8)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(2),i=n(17),o=n(20),l=n(42)("src"),u=n(162),a="toString",s=(""+u).split(a);n(24).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,n,u){var a="function"==typeof n;a&&!o(n,"name")&&i(n,"name",t),e[t]!==n&&(a&&!o(n,l)&&i(n,l,e[t]?""+e[t]:s.join(String(t))),e===r?e[t]=n:u?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,a,(function(){return"function"==typeof this&&this[l]||u.call(this)}))},function(e,t,n){function r(e,t,n,r){e=String(l(e));var i="<"+t;return""!==n&&(i+=" "+n+'="'+String(r).replace(u,"&quot;")+'"'),i+">"+e+"</"+t+">"}var i=n(0),o=n(3),l=n(30),u=/"/g;e.exports=function(e,t){var n={};n[e]=t(r),i(i.P+i.F*o((function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length})),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(61),i=n(30);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(62),i=n(41),o=n(21),l=n(29),u=n(20),a=n(115),s=Object.getOwnPropertyDescriptor;t.f=n(8)?s:function(e,t){if(e=o(e),t=l(t,!0),a)try{return s(e,t)}catch(e){}if(u(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(20),i=n(12),o=n(84)("IE_PROTO"),l=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},function(e,t){e=e.exports={version:"2.6.12"},"number"==typeof __e&&(__e=e)},function(e,t,n){var r=n(15);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e))||"function"==typeof(n=e.valueOf)&&!r(i=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(0),i=n(24),o=n(3);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],l={};l[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",l)}},function(e,t,n){var r=n(25),i=n(61),o=n(12),l=n(7),u=n(100);e.exports=function(e,t){var n=1==e,a=2==e,s=3==e,c=4==e,f=6==e,d=5==e||f,h=t||u;return function(t,u,p){for(var v,_,g=o(t),m=i(g),y=r(u,p,3),b=l(m.length),C=0,S=n?h(t,b):a?h(t,0):void 0;C<b;C++)if((d||C in m)&&(_=y(v=m[C],C,g),e))if(n)S[C]=_;else if(_)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:S.push(v)}else if(c)return!1;return f?-1:s||c?c:S}}},function(e,t,n){"use strict";function r(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}e.exports=((e={parse:function(e,t){var i={CRLF:c,DIGIT:f,ALPHA:d,HEXDIG:h,WSP:p,OCTET:v,DQUOTE:_,SP:g,HTAB:m,alphanum:y,reserved:b,unreserved:C,mark:S,escaped:T,LWS:E,SWS:A,HCOLON:w,TEXT_UTF8_TRIM:R,TEXT_UTF8char:I,UTF8_NONASCII:O,UTF8_CONT:k,LHEX:function(){var t;return null===(t=f())&&(/^[a-f]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[a-f]"))),t},token:P,token_nodot:x,separators:function(){var t;return 40===e.charCodeAt(o)?(t="(",o++):(t=null,0===l&&s('"("')),null===t&&(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===l&&s('")"')),null===t&&(60===e.charCodeAt(o)?(t="<",o++):(t=null,0===l&&s('"<"')),null===t&&(62===e.charCodeAt(o)?(t=">",o++):(t=null,0===l&&s('">"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","')),null===t&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(92===e.charCodeAt(o)?(t="\\",o++):(t=null,0===l&&s('"\\\\"')),null===t&&null===(t=_())&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null===t&&(91===e.charCodeAt(o)?(t="[",o++):(t=null,0===l&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===l&&s('"]"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null===t&&(123===e.charCodeAt(o)?(t="{",o++):(t=null,0===l&&s('"{"')),null===t&&(125===e.charCodeAt(o)?(t="}",o++):(t=null,0===l&&s('"}"')),null===t&&null===(t=g())&&(t=m())))))))))))))))),t},word:D,STAR:M,SLASH:N,EQUAL:L,LPAREN:U,RPAREN:j,RAQUOT:F,LAQUOT:q,COMMA:H,SEMI:V,COLON:W,LDQUOT:G,RDQUOT:B,comment:function e(){var t,n,r,i;if(i=o,null!==(t=U())){for(n=[],null===(r=z())&&null===(r=Y())&&(r=e());null!==r;)n.push(r),null===(r=z())&&null===(r=Y())&&(r=e());null!==n&&null!==(r=j())?t=[t,n,r]:(t=null,o=i)}else t=null,o=i;return t},ctext:z,quoted_string:$,quoted_string_clean:J,qdtext:K,quoted_pair:Y,SIP_URI_noparams:X,SIP_URI:Q,uri_scheme:Z,uri_scheme_sips:ee,uri_scheme_sip:te,userinfo:ne,user:re,user_unreserved:ie,password:oe,hostport:le,host:ue,hostname:ae,domainlabel:se,toplabel:ce,IPv6reference:fe,IPv6address:de,h16:he,ls32:pe,IPv4address:ve,dec_octet:_e,port:ge,uri_parameters:me,uri_parameter:ye,transport_param:be,user_param:Ce,method_param:Se,ttl_param:Te,maddr_param:Ee,lr_param:Ae,other_param:we,pname:Re,pvalue:Ie,paramchar:Oe,param_unreserved:ke,headers:Pe,header:xe,hname:De,hvalue:Me,hnv_unreserved:Ne,Request_Response:function(){var e;return null===(e=ft())&&(e=Le()),e},Request_Line:Le,Request_URI:Ue,absoluteURI:je,hier_part:Fe,net_path:qe,abs_path:He,opaque_part:Ve,uric:We,uric_no_slash:Ge,path_segments:Be,segment:ze,param:$e,pchar:Je,scheme:Ke,authority:Ye,srvr:Xe,reg_name:Qe,query:Ze,SIP_Version:et,INVITEm:tt,ACKm:nt,OPTIONSm:rt,BYEm:it,CANCELm:ot,REGISTERm:lt,SUBSCRIBEm:ut,NOTIFYm:at,REFERm:st,Method:ct,Status_Line:ft,Status_Code:dt,extension_code:ht,Reason_Phrase:pt,Allow_Events:function(){var e,t,n,r,i,l;if(i=o,null!==(e=jt())){for(t=[],l=o,null!==(n=H())&&null!==(r=jt())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=jt())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Call_ID:function(){var t,n,r,i,u,a;return u=i=o,null!==(t=D())?(a=o,64===e.charCodeAt(o)?(n="@",o++):(n=null,0===l&&s('"@"')),null!==n&&null!==(r=D())?n=[n,r]:(n=null,o=a),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=u)):(t=null,o=u),null!==t&&(t=void(Wn=e.substring(o,i))),null===t&&(o=i),t},Contact:function(){var e,t,n,r,i,l,u;if(i=o,null===(e=M()))if(l=o,null!==(e=vt())){for(t=[],u=o,null!==(n=H())&&null!==(r=vt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=vt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(){for(var e=Wn.multi_header.length,t=0;t<e;t++)if(null===Wn.multi_header[t].parsed){Wn=null;break}Wn=null!==Wn?Wn.multi_header:-1}()),null===e&&(o=i),e},contact_param:vt,name_addr:_t,display_name:gt,contact_params:mt,c_p_q:yt,c_p_expires:bt,delta_seconds:Ct,qvalue:St,generic_param:Tt,gen_value:Et,Content_Disposition:function(){var e,t,n,r,i,l;if(i=o,null!==(e=At())){for(t=[],l=o,null!==(n=V())&&null!==(r=wt())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=wt())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},disp_type:At,disp_param:wt,handling_param:Rt,Content_Encoding:function(){var e,t,n,r,i,l;if(i=o,null!==(e=P())){for(t=[],l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Content_Length:function(){var e,t,n;if(n=o,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=void(Wn=parseInt(e.join("")))),null===e&&(o=n),e},Content_Type:function(){var t,n;return n=o,null!==(t=It())&&(t=void(Wn=e.substring(o,n))),null===t&&(o=n),t},media_type:It,m_type:Ot,discrete_type:kt,composite_type:Pt,extension_token:xt,x_token:Dt,m_subtype:Mt,m_parameter:Nt,m_value:Lt,CSeq:function(){var e,t,n,r;return r=o,null!==(e=Ut())&&null!==(t=E())&&null!==(n=ct())?e=[e,t,n]:(e=null,o=r),e},CSeq_value:Ut,Expires:function(){var e,t;return t=o,null!==(e=Ct())&&(e=void(Wn=e)),null===e&&(o=t),e},Event:function(){var e,t,n,r,i,l,u;if(l=i=o,null!==(e=jt())){for(t=[],u=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(e){Wn.event=e.join("").toLowerCase()}(e[0])),null===e&&(o=i),e},event_type:jt,From:function(){var e,t,n,r,i,l,u;if(l=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],u=o,null!==(n=V())&&null!==(r=Ft())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=Ft())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(){var e=Wn.tag;try{Wn=new Vn(Wn.uri,Wn.display_name,Wn.params),e&&Wn.setParam("tag",e)}catch(e){Wn=-1}}()),null===e&&(o=i),e},from_param:Ft,tag_param:qt,Max_Forwards:function(){var e,t,n;if(n=o,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=void(Wn=parseInt(e.join("")))),null===e&&(o=n),e},Min_Expires:function(){var e,t;return t=o,null!==(e=Ct())&&(e=void(Wn=e)),null===e&&(o=t),e},Name_Addr_Header:function(){var e,t,n,r,i,l,u,a,s,c;for(s=a=o,e=[],t=gt();null!==t;)e.push(t),t=gt();if(null!==e)if(null!==(t=q()))if(null!==(n=Q()))if(null!==(r=F())){for(i=[],c=o,null!==(l=V())&&null!==(u=Tt())?l=[l,u]:(l=null,o=c);null!==l;)i.push(l),c=o,null!==(l=V())&&null!==(u=Tt())?l=[l,u]:(l=null,o=c);null!==i?e=[e,t,n,r,i]:(e=null,o=s)}else e=null,o=s;else e=null,o=s;else e=null,o=s;else e=null,o=s;return null!==e&&(e=function(){try{Wn=new Vn(Wn.uri,Wn.display_name,Wn.params)}catch(e){Wn=-1}}()),null===e&&(o=a),e},Proxy_Authenticate:function(){return Ht()},challenge:Ht,other_challenge:Vt,auth_param:Wt,digest_cln:Gt,realm:Bt,realm_value:zt,domain:$t,URI:Jt,nonce:Kt,nonce_value:Yt,opaque:Xt,stale:Qt,algorithm:Zt,qop_options:en,qop_value:tn,Proxy_Require:function(){var e,t,n,r,i,l;if(i=o,null!==(e=P())){for(t=[],l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Record_Route:function(){var e,t,n,r,i,l,u;if(l=i=o,null!==(e=nn())){for(t=[],u=o,null!==(n=H())&&null!==(r=nn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=nn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(){for(var e=Wn.multi_header.length,t=0;t<e;t++)if(null===Wn.multi_header[t].parsed){Wn=null;break}Wn=null!==Wn?Wn.multi_header:-1}()),null===e&&(o=i),e},rec_route:nn,Reason:function(){var t,n,r,i,u,a,c;if(a=u=o,"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"SIP"')),null===t&&(t=P()),null!==t){for(n=[],c=o,null!==(r=V())&&null!==(i=rn())?r=[r,i]:(r=null,o=c);null!==r;)n.push(r),c=o,null!==(r=V())&&null!==(i=rn())?r=[r,i]:(r=null,o=c);null!==n?t=[t,n]:(t=null,o=a)}else t=null,o=a;return null!==t&&(t=function(e){Wn.protocol=e.toLowerCase(),Wn.params||(Wn.params={}),Wn.params.text&&'"'===Wn.params.text[0]&&(e=Wn.params.text,Wn.text=e.substring(1,e.length-1),delete Wn.params.text)}(t[0])),null===t&&(o=u),t},reason_param:rn,reason_cause:on,Require:function(){var e,t,n,r,i,l;if(i=o,null!==(e=P())){for(t=[],l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Route:function(){var e,t,n,r,i,l;if(i=o,null!==(e=ln())){for(t=[],l=o,null!==(n=H())&&null!==(r=ln())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=ln())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},route_param:ln,Subscription_State:function(){var e,t,n,r,i,l;if(i=o,null!==(e=un())){for(t=[],l=o,null!==(n=V())&&null!==(r=an())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=an())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},substate_value:un,subexp_params:an,event_reason_value:sn,Subject:function(){var e;return null!==(e=R())?e:""},Supported:function(){var e,t,n,r,i,l;if(i=o,null!==(e=P())){for(t=[],l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return null!==e?e:""},To:function(){var e,t,n,r,i,l,u;if(l=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],u=o,null!==(n=V())&&null!==(r=cn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=cn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(){var e=Wn.tag;try{Wn=new Vn(Wn.uri,Wn.display_name,Wn.params),e&&Wn.setParam("tag",e)}catch(e){Wn=-1}}()),null===e&&(o=i),e},to_param:cn,Via:function(){var e,t,n,r,i,l;if(i=o,null!==(e=fn())){for(t=[],l=o,null!==(n=H())&&null!==(r=fn())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=fn())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},via_param:fn,via_params:dn,via_ttl:hn,via_maddr:pn,via_received:vn,via_branch:_n,response_port:gn,rport:mn,sent_protocol:yn,protocol_name:bn,transport:Cn,sent_by:Sn,via_host:Tn,via_port:En,ttl:An,WWW_Authenticate:function(){return Ht()},Session_Expires:function(){var e,t,n,r,i,l;if(i=o,null!==(e=wn())){for(t=[],l=o,null!==(n=V())&&null!==(r=Rn())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=Rn())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},s_e_expires:wn,s_e_params:Rn,s_e_refresher:In,extension_header:function(){var e,t,n,r;return r=o,null!==(e=P())&&null!==(t=w())&&null!==(n=On())?e=[e,t,n]:(e=null,o=r),e},header_value:On,message_body:function(){var e,t;for(e=[],t=v();null!==t;)e.push(t),t=v();return e},uuid_URI:function(){var t,n,r;return r=o,"uuid:"===e.substr(o,5)?(t="uuid:",o+=5):(t=null,0===l&&s('"uuid:"')),null!==t&&null!==(n=kn())?t=[t,n]:(t=null,o=r),t},uuid:kn,hex4:Pn,hex8:xn,hex12:Dn,Refer_To:function(){var e,t,n,r,i,l,u;if(l=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],u=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(){try{Wn=new Vn(Wn.uri,Wn.display_name,Wn.params)}catch(e){Wn=-1}}()),null===e&&(o=i),e},Replaces:function(){var e,t,n,r,i,l;if(i=o,null!==(e=Mn())){for(t=[],l=o,null!==(n=V())&&null!==(r=Nn())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=Nn())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},call_id:Mn,replaces_param:Nn,to_tag:Ln,from_tag:Un,early_flag:jn};if(void 0!==t){if(void 0===i[t])throw new Error("Invalid rule name: "+r(t)+".")}else t="CRLF";var o=0,l=0,u=0,a=[];function s(e){o<u||(u<o&&(u=o,a=[]),a.push(e))}function c(){var t;return"\r\n"===e.substr(o,2)?(t="\r\n",o+=2):(t=null,0===l&&s('"\\r\\n"')),t}function f(){var t;return/^[0-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[0-9]")),t}function d(){var t;return/^[a-zA-Z]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[a-zA-Z]")),t}function h(){var t;return/^[0-9a-fA-F]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[0-9a-fA-F]")),t}function p(){var e=g();return null===e?m():e}function v(){var t;return/^[\0-\xFF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[\\0-\\xFF]")),t}function _(){var t;return/^["]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s('["]')),t}function g(){var t;return 32===e.charCodeAt(o)?(t=" ",o++):(t=null,0===l&&s('" "')),t}function m(){var t;return 9===e.charCodeAt(o)?(t="\t",o++):(t=null,0===l&&s('"\\t"')),t}function y(){var t;return/^[a-zA-Z0-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[a-zA-Z0-9]")),t}function b(){var t;return 59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===l&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","'))))))))))),t}function C(){var e=y();return null===e?S():e}function S(){var t;return 45===e.charCodeAt(o)?(t="-",o++):(t=null,0===l&&s('"-"')),null===t&&(95===e.charCodeAt(o)?(t="_",o++):(t=null,0===l&&s('"_"')),null===t&&(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===l&&s('"."')),null===t&&(33===e.charCodeAt(o)?(t="!",o++):(t=null,0===l&&s('"!"')),null===t&&(126===e.charCodeAt(o)?(t="~",o++):(t=null,0===l&&s('"~"')),null===t&&(42===e.charCodeAt(o)?(t="*",o++):(t=null,0===l&&s('"*"')),null===t&&(39===e.charCodeAt(o)?(t="'",o++):(t=null,0===l&&s('"\'"')),null===t&&(40===e.charCodeAt(o)?(t="(",o++):(t=null,0===l&&s('"("')),null===t&&(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===l&&s('")"')))))))))),t}function T(){var t,n,r,i=o,u=o;return 37===e.charCodeAt(o)?(t="%",o++):(t=null,0===l&&s('"%"')),null!==t&&null!==(n=h())&&null!==(r=h())?t=[t,n,r]:(t=null,o=u),null===(t=null!==t?t.join(""):t)&&(o=i),t}function E(){for(var e,t=o,n=o,r=o,i=[],l=p();null!==l;)i.push(l),l=p();if(null!==i&&null!==(l=c())?i=[i,l]:(i=null,o=r),null!==(i=null!==i?i:"")){if(null!==(e=p()))for(l=[];null!==e;)l.push(e),e=p();else l=null;null!==l?i=[i,l]:(i=null,o=n)}else i=null,o=n;return null===(i=null!==i?" ":i)&&(o=t),i}function A(){var e=E();return null!==e?e:""}function w(){var t,n=o,r=o,i=[],u=g();for(null===u&&(u=m());null!==u;)i.push(u),null===(u=g())&&(u=m());return null!==i?(58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(t=A())?i=[i,u,t]:(i=null,o=r)):(i=null,o=r),null===(i=null!==i?":":i)&&(o=n),i}function R(){var t,n,r,i,l=o,u=o,a=I();if(null!==a)for(t=[];null!==a;)t.push(a),a=I();else t=null;if(null!==t){for(a=[],i=o,n=[],r=E();null!==r;)n.push(r),r=E();for(null!==n&&null!==(r=I())?n=[n,r]:(n=null,o=i);null!==n;){for(a.push(n),i=o,n=[],r=E();null!==r;)n.push(r),r=E();null!==n&&null!==(r=I())?n=[n,r]:(n=null,o=i)}null!==a?t=[t,a]:(t=null,o=u)}else t=null,o=u;return null===(t=null!==t?e.substring(o,l):t)&&(o=l),t}function I(){var t;return/^[!-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[!-~]")),null===t?O():t}function O(){var t;return/^[\x80-\uFFFF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[\\x80-\\uFFFF]")),t}function k(){var t;return/^[\x80-\xBF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[\\x80-\\xBF]")),t}function P(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===l&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"')))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===l&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"'))))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function x(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"'))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"')))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function D(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===l&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"')),null===r&&(40===e.charCodeAt(o)?(r="(",o++):(r=null,0===l&&s('"("')),null===r&&(41===e.charCodeAt(o)?(r=")",o++):(r=null,0===l&&s('")"')),null===r&&(60===e.charCodeAt(o)?(r="<",o++):(r=null,0===l&&s('"<"')),null===r&&(62===e.charCodeAt(o)?(r=">",o++):(r=null,0===l&&s('">"')),null===r&&(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null===r&&(92===e.charCodeAt(o)?(r="\\",o++):(r=null,0===l&&s('"\\\\"')),null===r&&null===(r=_())&&(47===e.charCodeAt(o)?(r="/",o++):(r=null,0===l&&s('"/"')),null===r&&(91===e.charCodeAt(o)?(r="[",o++):(r=null,0===l&&s('"["')),null===r&&(93===e.charCodeAt(o)?(r="]",o++):(r=null,0===l&&s('"]"')),null===r&&(63===e.charCodeAt(o)?(r="?",o++):(r=null,0===l&&s('"?"')),null===r&&(123===e.charCodeAt(o)?(r="{",o++):(r=null,0===l&&s('"{"')),null===r&&(125===e.charCodeAt(o)?(r="}",o++):(r=null,0===l&&s('"}"')))))))))))))))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===l&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"')),null===r&&(40===e.charCodeAt(o)?(r="(",o++):(r=null,0===l&&s('"("')),null===r&&(41===e.charCodeAt(o)?(r=")",o++):(r=null,0===l&&s('")"')),null===r&&(60===e.charCodeAt(o)?(r="<",o++):(r=null,0===l&&s('"<"')),null===r&&(62===e.charCodeAt(o)?(r=">",o++):(r=null,0===l&&s('">"')),null===r&&(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null===r&&(92===e.charCodeAt(o)?(r="\\",o++):(r=null,0===l&&s('"\\\\"')),null===r&&null===(r=_())&&(47===e.charCodeAt(o)?(r="/",o++):(r=null,0===l&&s('"/"')),null===r&&(91===e.charCodeAt(o)?(r="[",o++):(r=null,0===l&&s('"["')),null===r&&(93===e.charCodeAt(o)?(r="]",o++):(r=null,0===l&&s('"]"')),null===r&&(63===e.charCodeAt(o)?(r="?",o++):(r=null,0===l&&s('"?"')),null===r&&(123===e.charCodeAt(o)?(r="{",o++):(r=null,0===l&&s('"{"')),null===r&&(125===e.charCodeAt(o)?(r="}",o++):(r=null,0===l&&s('"}"'))))))))))))))))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function M(){var t,n,r=o,i=o,u=A();return null!==u?(42===e.charCodeAt(o)?(t="*",o++):(t=null,0===l&&s('"*"')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?"*":u)&&(o=r),u}function N(){var t,n,r=o,i=o,u=A();return null!==u?(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?"/":u)&&(o=r),u}function L(){var t,n,r=o,i=o,u=A();return null!==u?(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?"=":u)&&(o=r),u}function U(){var t,n,r=o,i=o,u=A();return null!==u?(40===e.charCodeAt(o)?(t="(",o++):(t=null,0===l&&s('"("')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?"(":u)&&(o=r),u}function j(){var t,n,r=o,i=o,u=A();return null!==u?(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===l&&s('")"')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?")":u)&&(o=r),u}function F(){var t,n,r=o,i=o;return 62===e.charCodeAt(o)?(t=">",o++):(t=null,0===l&&s('">"')),null!==t&&null!==(n=A())?t=[t,n]:(t=null,o=i),null===(t=null!==t?">":t)&&(o=r),t}function q(){var t,n=o,r=o,i=A();return null!==i?(60===e.charCodeAt(o)?(t="<",o++):(t=null,0===l&&s('"<"')),null!==t?i=[i,t]:(i=null,o=r)):(i=null,o=r),null===(i=null!==i?"<":i)&&(o=n),i}function H(){var t,n,r=o,i=o,u=A();return null!==u?(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?",":u)&&(o=r),u}function V(){var t,n,r=o,i=o,u=A();return null!==u?(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?";":u)&&(o=r),u}function W(){var t,n,r=o,i=o,u=A();return null!==u?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?":":u)&&(o=r),u}function G(){var e,t=o,n=o,r=A();return null!==r&&null!==(e=_())?r=[r,e]:(r=null,o=n),null===(r=null!==r?'"':r)&&(o=t),r}function B(){var e,t=o,n=o,r=_();return null!==r&&null!==(e=A())?r=[r,e]:(r=null,o=n),null===(r=null!==r?'"':r)&&(o=t),r}function z(){var t;return/^[!-']/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[!-']")),null===t&&(/^[*-[]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[*-[]")),null===t&&(/^[\]-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[\\]-~]")),null===t&&null===(t=O())&&(t=E()))),t}function $(){var t,n,r,i=o,l=o,u=A();if(null!==u)if(null!==(t=_())){for(n=[],null===(r=K())&&(r=Y());null!==r;)n.push(r),null===(r=K())&&(r=Y());null!==n&&null!==(r=_())?u=[u,t,n,r]:(u=null,o=l)}else u=null,o=l;else u=null,o=l;return null===(u=null!==u?e.substring(o,i):u)&&(o=i),u}function J(){var t,n,r,i=o,l=o,u=A();if(null!==u)if(null!==(r=_())){for(t=[],null===(n=K())&&(n=Y());null!==n;)t.push(n),null===(n=K())&&(n=Y());null!==t&&null!==(n=_())?u=[u,r,t,n]:(u=null,o=l)}else u=null,o=l;else u=null,o=l;return null===(u=null!==u?(r=e.substring(o,i).trim()).substring(1,r.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1"):u)&&(o=i),u}function K(){var t=E();return null===t&&(33===e.charCodeAt(o)?(t="!",o++):(t=null,0===l&&s('"!"')),null===t&&(/^[#-[]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[#-[]")),null===t&&(/^[\]-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[\\]-~]")),null===t&&(t=O())))),t}function Y(){var t,n,r=o;return 92===e.charCodeAt(o)?(t="\\",o++):(t=null,0===l&&s('"\\\\"')),null!==t?(/^[\0-\t]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===l&&s("[\\0-\\t]")),null===n&&(/^[\x0B-\f]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===l&&s("[\\x0B-\\f]")),null===n&&(/^[\x0E-]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===l&&s("[\\x0E-]")))),null!==n?t=[t,n]:(t=null,o=r)):(t=null,o=r),t}function X(){var t,n,r,i=o,u=o,a=Z();return null!==a?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=null!==(n=ne())?n:"")&&null!==(r=le())?a=[a,t,n,r]:(a=null,o=u)):(a=null,o=u),null===(a=null!==a?function(){try{Wn.uri=new Hn(Wn.scheme,Wn.user,Wn.host,Wn.port),delete Wn.scheme,delete Wn.user,delete Wn.host,delete Wn.host_type,delete Wn.port}catch(e){Wn=-1}}():a)&&(o=i),a}function Q(){var n,r,i,u,a,c=o,f=o,d=Z();return null!==d?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=null!==(r=ne())?r:"")&&null!==(i=le())&&null!==(u=me())&&null!==(a=null!==(a=Pe())?a:"")?d=[d,n,r,i,u,a]:(d=null,o=f)):(d=null,o=f),null===(d=null!==d?function(){try{Wn.uri=new Hn(Wn.scheme,Wn.user,Wn.host,Wn.port,Wn.uri_params,Wn.uri_headers),delete Wn.scheme,delete Wn.user,delete Wn.host,delete Wn.host_type,delete Wn.port,delete Wn.uri_params,"SIP_URI"===t&&(Wn=Wn.uri)}catch(e){Wn=-1}}():d)&&(o=c),d}function Z(){var e=ee();return null===e?te():e}function ee(){var t,n,r=o;return"sips"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"sips"')),null!==t&&(n=t,t=void(Wn.scheme=n.toLowerCase())),null===t&&(o=r),t}function te(){var t,n,r=o;return"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"sip"')),null!==t&&(n=t,t=void(Wn.scheme=n.toLowerCase())),null===t&&(o=r),t}function ne(){var t,n,r,i=o,u=o,a=re();return null!==a?(r=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=oe())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===l&&s('"@"')),null!==n?a=[a,t,n]:(a=null,o=u)):(a=null,o=u)):(a=null,o=u),null===(a=null!==a?void(Wn.user=decodeURIComponent(e.substring(o-1,i))):a)&&(o=i),a}function re(){var e,t=C();if(null!==(t=null===t&&null===(t=T())?ie():t))for(e=[];null!==t;)e.push(t),null===(t=C())&&null===(t=T())&&(t=ie());else e=null;return e}function ie(){var t;return 38===e.charCodeAt(o)?(t="&",o++):(t=null,0===l&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","')),null===t&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"'))))))))),t}function oe(){var t=o,n=[],r=C();for(null===r&&null===(r=T())&&(38===e.charCodeAt(o)?(r="&",o++):(r=null,0===l&&s('"&"')),null===r&&(61===e.charCodeAt(o)?(r="=",o++):(r=null,0===l&&s('"="')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(36===e.charCodeAt(o)?(r="$",o++):(r=null,0===l&&s('"$"')),null===r&&(44===e.charCodeAt(o)?(r=",",o++):(r=null,0===l&&s('","')))))));null!==r;)n.push(r),null===(r=C())&&null===(r=T())&&(38===e.charCodeAt(o)?(r="&",o++):(r=null,0===l&&s('"&"')),null===r&&(61===e.charCodeAt(o)?(r="=",o++):(r=null,0===l&&s('"="')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(36===e.charCodeAt(o)?(r="$",o++):(r=null,0===l&&s('"$"')),null===r&&(44===e.charCodeAt(o)?(r=",",o++):(r=null,0===l&&s('","')))))));return null===(n=null!==n?void(Wn.password=e.substring(o,t)):n)&&(o=t),n}function le(){var t,n,r,i=o,u=ue();return null!==u?(r=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=ge())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?u=[u,t]:(u=null,o=i)):(u=null,o=i),u}function ue(){var t=o,n=ae();return null!==(n=null===n&&null===(n=ve())?fe():n)&&(Wn.host=e.substring(o,t).toLowerCase(),n=Wn.host),null===n&&(o=t),n}function ae(){var t,n=o,r=o,i=[],u=o,a=se();for(null!==a?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===l&&s('"."')),null!==t?a=[a,t]:(a=null,o=u)):(a=null,o=u);null!==a;)i.push(a),u=o,null!==(a=se())?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===l&&s('"."')),null!==t?a=[a,t]:(a=null,o=u)):(a=null,o=u);return null!==i&&null!==(a=ce())?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===l&&s('"."')),null!==(t=null!==t?t:"")?i=[i,a,t]:(i=null,o=r)):(i=null,o=r),null!==i&&(r=n,Wn.host_type="domain",i=e.substring(o,r)),null===i&&(o=n),i}function se(){var t,n,r=o,i=y();if(null!==i){for(t=[],null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===l&&s('"_"'))));null!==n;)t.push(n),null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===l&&s('"_"'))));null!==t?i=[i,t]:(i=null,o=r)}else i=null,o=r;return i}function ce(){var t,n,r=o,i=d();if(null!==i){for(t=[],null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===l&&s('"_"'))));null!==n;)t.push(n),null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===l&&s('"_"'))));null!==t?i=[i,t]:(i=null,o=r)}else i=null,o=r;return i}function fe(){var t,n,r,i=o,u=o;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===l&&s('"["')),null!==t&&null!==(r=de())?(93===e.charCodeAt(o)?(n="]",o++):(n=null,0===l&&s('"]"')),null!==n?t=[t,r,n]:(t=null,o=u)):(t=null,o=u),null!==t&&(r=i,Wn.host_type="IPv6",t=e.substring(o,r)),null===t&&(o=i),t}function de(){var t,n,r,i,u,a,c,f,d,h,p,v,_,g=o,m=o,y=he();return null!==y?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===l&&s('":"')),null!==c&&null!==(f=he())?(58===e.charCodeAt(o)?(d=":",o++):(d=null,0===l&&s('":"')),null!==d&&null!==(h=he())?(58===e.charCodeAt(o)?(p=":",o++):(p=null,0===l&&s('":"')),null!==p&&null!==(_=pe())?y=[y,t,n,r,i,u,a,c,f,d,h,p,_]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===l&&s('":"')),null!==f&&null!==(d=he())?(58===e.charCodeAt(o)?(h=":",o++):(h=null,0===l&&s('":"')),null!==h&&null!==(p=pe())?y=[y,t,n,r,i,u,a,c,f,d,h,p]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===l&&s('":"')),null!==f&&null!==(d=pe())?y=[y,t,n,r,i,u,a,c,f,d]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=pe())?y=[y,t,n,r,i,u,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=pe())?y=[y,t,n,r,i,u]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=pe())?y=[y,t,n,r]:(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=pe())?y=[y,t]:(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?y=[y,t]:(y=null,o=m),null===y&&(m=o,null!==(y=he())?("::"===e.substr(o,2)?(t="::",o+=2):(t=null,0===l&&s('"::"')),null!==t&&null!==(n=he())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===l&&s('":"')),null!==c&&null!==(f=he())?(58===e.charCodeAt(o)?(d=":",o++):(d=null,0===l&&s('":"')),null!==d&&null!==(h=pe())?y=[y,t,n,r,i,u,a,c,f,d,h]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?("::"===e.substr(o,2)?(n="::",o+=2):(n=null,0===l&&s('"::"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===l&&s('":"')),null!==f&&null!==(d=pe())?y=[y,t,n,r,i,u,a,c,f,d]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?(v=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=v),null!==(n=null!==n?n:"")?("::"===e.substr(o,2)?(r="::",o+=2):(r=null,0===l&&s('"::"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===l&&s('":"')),null!==c&&null!==(f=pe())?y=[y,t,n,r,i,u,a,c,f]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?(v=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=v),null!==(n=null!==n?n:"")?(v=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=v),null!==(r=null!==r?r:"")?("::"===e.substr(o,2)?(i="::",o+=2):(i=null,0===l&&s('"::"')),null!==i&&null!==(u=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=pe())?y=[y,t,n,r,i,u,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?(v=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=v),null!==(n=null!==n?n:"")?(v=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=v),null!==(r=null!==r?r:"")?(v=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?i=[i,u]:(i=null,o=v),null!==(i=null!==i?i:"")?("::"===e.substr(o,2)?(u="::",o+=2):(u=null,0===l&&s('"::"')),null!==u&&null!==(a=pe())?y=[y,t,n,r,i,u,a]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?(v=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=v),null!==(n=null!==n?n:"")?(v=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=v),null!==(r=null!==r?r:"")?(v=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?i=[i,u]:(i=null,o=v),null!==(i=null!==i?i:"")?(v=o,58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(a=he())?u=[u,a]:(u=null,o=v),null!==(u=null!==u?u:"")?("::"===e.substr(o,2)?(a="::",o+=2):(a=null,0===l&&s('"::"')),null!==a&&null!==(c=he())?y=[y,t,n,r,i,u,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?(v=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=v),null!==(n=null!==n?n:"")?(v=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=v),null!==(r=null!==r?r:"")?(v=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?i=[i,u]:(i=null,o=v),null!==(i=null!==i?i:"")?(v=o,58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(a=he())?u=[u,a]:(u=null,o=v),null!==(u=null!==u?u:"")?(v=o,58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=he())?a=[a,c]:(a=null,o=v),null!==(a=null!==a?a:"")?("::"===e.substr(o,2)?(c="::",o+=2):(c=null,0===l&&s('"::"')),null!==c?y=[y,t,n,r,i,u,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m))))))))))))))),null!==y&&(_=g,Wn.host_type="IPv6",y=e.substring(o,_)),null===y&&(o=g),y}function he(){var e,t,n,r=o,i=h();return null!==i&&null!==(e=null!==(e=h())?e:"")&&null!==(t=null!==(t=h())?t:"")&&null!==(n=null!==(n=h())?n:"")?i=[i,e,t,n]:(i=null,o=r),i}function pe(){var t,n,r=o,i=he();return null!==i?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?i=[i,t,n]:(i=null,o=r)):(i=null,o=r),null===i?ve():i}function ve(){var t,n,r,i,u,a,c=o,f=o,d=_e();return null!==d?(46===e.charCodeAt(o)?(a=".",o++):(a=null,0===l&&s('"."')),null!==a&&null!==(t=_e())?(46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')),null!==n&&null!==(r=_e())?(46===e.charCodeAt(o)?(i=".",o++):(i=null,0===l&&s('"."')),null!==i&&null!==(u=_e())?d=[d,a,t,n,r,i,u]:(d=null,o=f)):(d=null,o=f)):(d=null,o=f)):(d=null,o=f),null!==d&&(a=c,Wn.host_type="IPv4",d=e.substring(o,a)),null===d&&(o=c),d}function _e(){var t,n,r,i=o;return"25"===e.substr(o,2)?(t="25",o+=2):(t=null,0===l&&s('"25"')),null!==t?(/^[0-5]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===l&&s("[0-5]")),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null===t&&(i=o,50===e.charCodeAt(o)?(t="2",o++):(t=null,0===l&&s('"2"')),null!==t?(/^[0-4]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===l&&s("[0-4]")),null!==n&&null!==(r=f())?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),null===t&&(i=o,49===e.charCodeAt(o)?(t="1",o++):(t=null,0===l&&s('"1"')),null!==t&&null!==(n=f())&&null!==(r=f())?t=[t,n,r]:(t=null,o=i),null===t&&(i=o,/^[1-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[1-9]")),null!==t&&null!==(n=f())?t=[t,n]:(t=null,o=i),null===t&&(t=f())))),t}function ge(){var e,t,n,r,i=o,l=o,u=f();return null!==(u=null!==u?u:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")?u=[u,r,e,t,n]:(u=null,o=l),null!==u&&(r=u,r=parseInt(r.join("")),u=Wn.port=r),null===u&&(o=i),u}function me(){var t,n,r=[],i=o;for(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null!==t&&null!==(n=ye())?t=[t,n]:(t=null,o=i);null!==t;)r.push(t),i=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null!==t&&null!==(n=ye())?t=[t,n]:(t=null,o=i);return r}function ye(){var e=be();return null===e&&null===(e=Ce())&&null===(e=Se())&&null===(e=Te())&&null===(e=Ee())&&null===(e=Ae())?we():e}function be(){var t,n,r=o,i=o;return"transport="===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===l&&s('"transport="')),null!==t?("udp"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"udp"')),null===n&&("tcp"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"tcp"')),null===n&&("sctp"===e.substr(o,4).toLowerCase()?(n=e.substr(o,4),o+=4):(n=null,0===l&&s('"sctp"')),null===n&&("tls"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"tls"')),null===n&&(n=P())))),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(n=t[1],Wn.uri_params||(Wn.uri_params={}),t=void(Wn.uri_params.transport=n.toLowerCase())),null===t&&(o=r),t}function Ce(){var t,n,r=o,i=o;return"user="===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"user="')),null!==t?("phone"===e.substr(o,5).toLowerCase()?(n=e.substr(o,5),o+=5):(n=null,0===l&&s('"phone"')),null===n&&("ip"===e.substr(o,2).toLowerCase()?(n=e.substr(o,2),o+=2):(n=null,0===l&&s('"ip"')),null===n&&(n=P())),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(n=t[1],Wn.uri_params||(Wn.uri_params={}),t=void(Wn.uri_params.user=n.toLowerCase())),null===t&&(o=r),t}function Se(){var t,n,r=o,i=o;return"method="===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"method="')),null!==t&&null!==(n=ct())?t=[t,n]:(t=null,o=i),null!==t&&(n=t[1],Wn.uri_params||(Wn.uri_params={}),t=void(Wn.uri_params.method=n)),null===t&&(o=r),t}function Te(){var t,n,r=o,i=o;return"ttl="===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"ttl="')),null!==t&&null!==(n=An())?t=[t,n]:(t=null,o=i),null!==t&&(n=t[1],Wn.params||(Wn.params={}),t=void(Wn.params.ttl=n)),null===t&&(o=r),t}function Ee(){var t,n,r=o,i=o;return"maddr="===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"maddr="')),null!==t&&null!==(n=ue())?t=[t,n]:(t=null,o=i),null!==t&&(n=t[1],Wn.uri_params||(Wn.uri_params={}),t=void(Wn.uri_params.maddr=n)),null===t&&(o=r),t}function Ae(){var t,n,r,i,u=o,a=o;return"lr"===e.substr(o,2).toLowerCase()?(t=e.substr(o,2),o+=2):(t=null,0===l&&s('"lr"')),null!==t?(i=o,61===e.charCodeAt(o)?(n="=",o++):(n=null,0===l&&s('"="')),null!==n&&null!==(r=P())?n=[n,r]:(n=null,o=i),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=a)):(t=null,o=a),null!==t&&(Wn.uri_params||(Wn.uri_params={}),t=void(Wn.uri_params.lr=void 0)),null===t&&(o=u),t}function we(){var t,n,r,i=o,u=o,a=Re();return null!==a?(r=o,61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null!==t&&null!==(n=Ie())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?a=[a,t]:(a=null,o=u)):(a=null,o=u),null!==a&&(n=a[0],r=a[1],Wn.uri_params||(Wn.uri_params={}),r=void 0===r?void 0:r[1],a=void(Wn.uri_params[n.toLowerCase()]=r)),null===a&&(o=i),a}function Re(){var e,t=o,n=Oe();if(null!==n)for(e=[];null!==n;)e.push(n),n=Oe();else e=null;return null===(e=null!==e?e.join(""):e)&&(o=t),e}function Ie(){var e,t=o,n=Oe();if(null!==n)for(e=[];null!==n;)e.push(n),n=Oe();else e=null;return null===(e=null!==e?e.join(""):e)&&(o=t),e}function Oe(){var e=ke();return null===e&&null===(e=C())?T():e}function ke(){var t;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===l&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===l&&s('"]"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===l&&s('"&"')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')))))))),t}function Pe(){var t,n,r,i,u,a,c=o;if(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null!==t)if(null!==(n=xe())){for(r=[],a=o,38===e.charCodeAt(o)?(i="&",o++):(i=null,0===l&&s('"&"')),null!==i&&null!==(u=xe())?i=[i,u]:(i=null,o=a);null!==i;)r.push(i),a=o,38===e.charCodeAt(o)?(i="&",o++):(i=null,0===l&&s('"&"')),null!==i&&null!==(u=xe())?i=[i,u]:(i=null,o=a);null!==r?t=[t,n,r]:(t=null,o=c)}else t=null,o=c;else t=null,o=c;return t}function xe(){var t,n,r=o,i=o,u=De();return null!==u?(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null!==t&&null!==(n=Me())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null!==u&&(t=u[0],n=u[2],t=t.join("").toLowerCase(),n=n.join(""),Wn.uri_headers||(Wn.uri_headers={}),u=void(Wn.uri_headers[t]?Wn.uri_headers[t].push(n):Wn.uri_headers[t]=[n])),null===u&&(o=r),u}function De(){var e,t=Ne();if(null!==(t=null===t&&null===(t=C())?T():t))for(e=[];null!==t;)e.push(t),null===(t=Ne())&&null===(t=C())&&(t=T());else e=null;return e}function Me(){var e=[],t=Ne();for(null===t&&null===(t=C())&&(t=T());null!==t;)e.push(t),null===(t=Ne())&&null===(t=C())&&(t=T());return e}function Ne(){var t;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===l&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===l&&s('"]"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')))))))),t}function Le(){var e,t,n,r,i=o,l=ct();return null!==l&&null!==(e=g())&&null!==(t=Ue())&&null!==(n=g())&&null!==(r=et())?l=[l,e,t,n,r]:(l=null,o=i),l}function Ue(){var e=Q();return null===e?je():e}function je(){var t,n,r=o,i=Ke();return null!==i?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=null===(n=Fe())?Ve():n)?i=[i,t,n]:(i=null,o=r)):(i=null,o=r),i}function Fe(){var t,n,r,i=o,u=qe();return null!==(u=null===u?He():u)?(r=o,63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null!==t&&null!==(n=Ze())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?u=[u,t]:(u=null,o=i)):(u=null,o=i),u}function qe(){var t,n,r,i=o;return"//"===e.substr(o,2)?(t="//",o+=2):(t=null,0===l&&s('"//"')),null!==t&&null!==(n=Ye())&&null!==(r=null!==(r=He())?r:"")?t=[t,n,r]:(t=null,o=i),t}function He(){var t,n,r=o;return 47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null!==t&&null!==(n=Be())?t=[t,n]:(t=null,o=r),t}function Ve(){var e,t,n=o,r=Ge();if(null!==r){for(e=[],t=We();null!==t;)e.push(t),t=We();null!==e?r=[r,e]:(r=null,o=n)}else r=null,o=n;return r}function We(){var e=b();return null===e&&null===(e=C())?T():e}function Ge(){var t=C();return null===t&&null===(t=T())&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===l&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","'))))))))))),t}function Be(){var t,n,r,i,u=o,a=ze();if(null!==a){for(t=[],i=o,47===e.charCodeAt(o)?(n="/",o++):(n=null,0===l&&s('"/"')),null!==n&&null!==(r=ze())?n=[n,r]:(n=null,o=i);null!==n;)t.push(n),i=o,47===e.charCodeAt(o)?(n="/",o++):(n=null,0===l&&s('"/"')),null!==n&&null!==(r=ze())?n=[n,r]:(n=null,o=i);null!==t?a=[a,t]:(a=null,o=u)}else a=null,o=u;return a}function ze(){for(var t,n,r,i=o,u=[],a=Je();null!==a;)u.push(a),a=Je();if(null!==u){for(a=[],r=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null!==t&&null!==(n=$e())?t=[t,n]:(t=null,o=r);null!==t;)a.push(t),r=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null!==t&&null!==(n=$e())?t=[t,n]:(t=null,o=r);null!==a?u=[u,a]:(u=null,o=i)}else u=null,o=i;return u}function $e(){for(var e=[],t=Je();null!==t;)e.push(t),t=Je();return e}function Je(){var t=C();return null===t&&null===(t=T())&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===l&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","'))))))))),t}function Ke(){var t,n,r=o,i=o,u=d();if(null!==u){for(t=[],null===(n=d())&&null===(n=f())&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===l&&s('"+"')),null===n&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')))));null!==n;)t.push(n),null===(n=d())&&null===(n=f())&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===l&&s('"+"')),null===n&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')))));null!==t?u=[u,t]:(u=null,o=i)}else u=null,o=i;return null===(u=null!==u?void(Wn.scheme=e.substring(o,r)):u)&&(o=r),u}function Ye(){var e=Xe();return null===e?Qe():e}function Xe(){var t,n=o,r=o,i=ne();return null!==i?(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null!==t?i=[i,t]:(i=null,o=r)):(i=null,o=r),null!==(i=null!==i?i:"")&&null!==(t=le())?i=[i,t]:(i=null,o=n),null!==i?i:""}function Qe(){var t,n=C();if(null===n&&null===(n=T())&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,0===l&&s('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,0===l&&s('","')),null===n&&(59===e.charCodeAt(o)?(n=";",o++):(n=null,0===l&&s('";"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null===n&&(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===l&&s('"@"')),null===n&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,0===l&&s('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,0===l&&s('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===l&&s('"+"')))))))))),null!==n)for(t=[];null!==n;)t.push(n),null===(n=C())&&null===(n=T())&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,0===l&&s('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,0===l&&s('","')),null===n&&(59===e.charCodeAt(o)?(n=";",o++):(n=null,0===l&&s('";"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null===n&&(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===l&&s('"@"')),null===n&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,0===l&&s('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,0===l&&s('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===l&&s('"+"'))))))))));else t=null;return t}function Ze(){for(var e=[],t=We();null!==t;)e.push(t),t=We();return e}function et(){var t,n,r,i,u,a,c=o,d=o;if("sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"SIP"')),null!==t)if(47===e.charCodeAt(o)?(n="/",o++):(n=null,0===l&&s('"/"')),null!==n){if(null!==(i=f()))for(r=[];null!==i;)r.push(i),i=f();else r=null;if(null!==r)if(46===e.charCodeAt(o)?(i=".",o++):(i=null,0===l&&s('"."')),null!==i){if(null!==(a=f()))for(u=[];null!==a;)u.push(a),a=f();else u=null;null!==u?t=[t,n,r,i,u]:(t=null,o=d)}else t=null,o=d;else t=null,o=d}else t=null,o=d;else t=null,o=d;return null===(t=null!==t?void(Wn.sip_version=e.substring(o,c)):t)&&(o=c),t}function tt(){var t;return"INVITE"===e.substr(o,6)?(t="INVITE",o+=6):(t=null,0===l&&s('"INVITE"')),t}function nt(){var t;return"ACK"===e.substr(o,3)?(t="ACK",o+=3):(t=null,0===l&&s('"ACK"')),t}function rt(){var t;return"OPTIONS"===e.substr(o,7)?(t="OPTIONS",o+=7):(t=null,0===l&&s('"OPTIONS"')),t}function it(){var t;return"BYE"===e.substr(o,3)?(t="BYE",o+=3):(t=null,0===l&&s('"BYE"')),t}function ot(){var t;return"CANCEL"===e.substr(o,6)?(t="CANCEL",o+=6):(t=null,0===l&&s('"CANCEL"')),t}function lt(){var t;return"REGISTER"===e.substr(o,8)?(t="REGISTER",o+=8):(t=null,0===l&&s('"REGISTER"')),t}function ut(){var t;return"SUBSCRIBE"===e.substr(o,9)?(t="SUBSCRIBE",o+=9):(t=null,0===l&&s('"SUBSCRIBE"')),t}function at(){var t;return"NOTIFY"===e.substr(o,6)?(t="NOTIFY",o+=6):(t=null,0===l&&s('"NOTIFY"')),t}function st(){var t;return"REFER"===e.substr(o,5)?(t="REFER",o+=5):(t=null,0===l&&s('"REFER"')),t}function ct(){var t=o,n=tt();return null!==(n=null===n&&null===(n=nt())&&null===(n=rt())&&null===(n=it())&&null===(n=ot())&&null===(n=lt())&&null===(n=ut())&&null===(n=at())&&null===(n=st())?P():n)&&(Wn.method=e.substring(o,t),n=Wn.method),null===n&&(o=t),n}function ft(){var e,t,n,r,i=o,l=et();return null!==l&&null!==(e=g())&&null!==(t=dt())&&null!==(n=g())&&null!==(r=pt())?l=[l,e,t,n,r]:(l=null,o=i),l}function dt(){var e,t=o,n=ht();return null!==n&&(e=n,n=void(Wn.status_code=parseInt(e.join("")))),null===n&&(o=t),n}function ht(){var e,t,n=o,r=f();return null!==r&&null!==(e=f())&&null!==(t=f())?r=[r,e,t]:(r=null,o=n),r}function pt(){var t=o,n=[],r=b();for(null===r&&null===(r=C())&&null===(r=T())&&null===(r=O())&&null===(r=k())&&null===(r=g())&&(r=m());null!==r;)n.push(r),null===(r=b())&&null===(r=C())&&null===(r=T())&&null===(r=O())&&null===(r=k())&&null===(r=g())&&(r=m());return null===(n=null!==n?void(Wn.reason_phrase=e.substring(o,t)):n)&&(o=t),n}function vt(){var e,t,n,r,i=o,l=o,u=X();if(null!==(u=null===u?_t():u)){for(e=[],r=o,null!==(t=V())&&null!==(n=mt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=mt())?t=[t,n]:(t=null,o=r);null!==e?u=[u,e]:(u=null,o=l)}else u=null,o=l;return null===(u=null!==u?function(e){var t;Wn.multi_header||(Wn.multi_header=[]);try{t=new Vn(Wn.uri,Wn.display_name,Wn.params),delete Wn.uri,delete Wn.display_name,delete Wn.params}catch(e){t=null}Wn.multi_header.push({possition:o,offset:e,parsed:t})}(i):u)&&(o=i),u}function _t(){var e,t,n,r=o,i=gt();return null!==(i=null!==i?i:"")&&null!==(e=q())&&null!==(t=Q())&&null!==(n=F())?i=[i,e,t,n]:(i=null,o=r),i}function gt(){var e,t,n,r,i=o,l=o,u=P();if(null!==u){for(e=[],r=o,null!==(t=E())&&null!==(n=P())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=E())&&null!==(n=P())?t=[t,n]:(t=null,o=r);null!==e?u=[u,e]:(u=null,o=l)}else u=null,o=l;return null!==(u=null===u?J():u)&&(l=u,u=void(Wn.display_name="string"==typeof l?l:l[1].reduce((function(e,t){return e+t[0]+t[1]}),l[0]))),null===u&&(o=i),u}function mt(){var e=yt();return null===e&&null===(e=bt())?Tt():e}function yt(){var t,n,r,i=o,u=o;return"q"===e.substr(o,1).toLowerCase()?(t=e.substr(o,1),o++):(t=null,0===l&&s('"q"')),null!==t&&null!==(r=L())&&null!==(n=St())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],Wn.params||(Wn.params={}),t=void(Wn.params.q=r)),null===t&&(o=i),t}function bt(){var t,n,r,i=o,u=o;return"expires"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"expires"')),null!==t&&null!==(r=L())&&null!==(n=Ct())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],Wn.params||(Wn.params={}),t=void(Wn.params.expires=r)),null===t&&(o=i),t}function Ct(){var e,t=o,n=f();if(null!==n)for(e=[];null!==n;)e.push(n),n=f();else e=null;return null===(e=null!==e?parseInt(e.join("")):e)&&(o=t),e}function St(){var t,n,r,i,u,a,c=o,d=o;return 48===e.charCodeAt(o)?(t="0",o++):(t=null,0===l&&s('"0"')),null!==t?(a=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')),null!==n&&null!==(r=null!==(r=f())?r:"")&&null!==(i=null!==(i=f())?i:"")&&null!==(u=null!==(u=f())?u:"")?n=[n,r,i,u]:(n=null,o=a),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=d)):(t=null,o=d),null===(t=null!==t?parseFloat(e.substring(o,c)):t)&&(o=c),t}function Tt(){var e,t,n,r=o,i=o,l=P();return null!==l?(n=o,null!==(e=L())&&null!==(t=Et())?e=[e,t]:(e=null,o=n),null!==(e=null!==e?e:"")?l=[l,e]:(l=null,o=i)):(l=null,o=i),null!==l&&(t=l[0],n=l[1],Wn.params||(Wn.params={}),n=void 0===n?void 0:n[1],l=void(Wn.params[t.toLowerCase()]=n)),null===l&&(o=r),l}function Et(){var e=P();return null===e&&null===(e=ue())?$():e}function At(){var t;return"render"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"render"')),null===t&&("session"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"session"')),null===t&&("icon"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"icon"')),null===t&&("alert"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"alert"')),null===t&&(t=P())))),t}function wt(){var e=Rt();return null===e?Tt():e}function Rt(){var t,n,r,i=o;return"handling"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===l&&s('"handling"')),null!==t&&null!==(n=L())?("optional"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,0===l&&s('"optional"')),null===r&&("required"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,0===l&&s('"required"')),null===r&&(r=P())),null!==r?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),t}function It(){var e,t,n,r,i,l,u=o,a=Ot();if(null!==a)if(null!==(e=N()))if(null!==(t=Mt())){for(n=[],l=o,null!==(r=V())&&null!==(i=Nt())?r=[r,i]:(r=null,o=l);null!==r;)n.push(r),l=o,null!==(r=V())&&null!==(i=Nt())?r=[r,i]:(r=null,o=l);null!==n?a=[a,e,t,n]:(a=null,o=u)}else a=null,o=u;else a=null,o=u;else a=null,o=u;return a}function Ot(){var e=kt();return null===e?Pt():e}function kt(){var t;return"text"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"text"')),null===t&&("image"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"image"')),null===t&&("audio"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"audio"')),null===t&&("video"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"video"')),null===t&&("application"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===l&&s('"application"')),null===t&&(t=xt()))))),t}function Pt(){var t;return"message"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"message"')),null===t&&("multipart"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===l&&s('"multipart"')),null===t&&(t=xt())),t}function xt(){var e=P();return null===e?Dt():e}function Dt(){var t,n,r=o;return"x-"===e.substr(o,2).toLowerCase()?(t=e.substr(o,2),o+=2):(t=null,0===l&&s('"x-"')),null!==t&&null!==(n=P())?t=[t,n]:(t=null,o=r),t}function Mt(){var e=xt();return null===e?P():e}function Nt(){var e,t,n=o,r=P();return null!==r&&null!==(e=L())&&null!==(t=Lt())?r=[r,e,t]:(r=null,o=n),r}function Lt(){var e=P();return null===e?$():e}function Ut(){var e,t,n=o,r=f();if(null!==r)for(e=[];null!==r;)e.push(r),r=f();else e=null;return null!==e&&(t=e,e=void(Wn.value=parseInt(t.join("")))),null===e&&(o=n),e}function jt(){var t,n,r,i,u=o,a=x();if(null!==a){for(t=[],i=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')),null!==n&&null!==(r=x())?n=[n,r]:(n=null,o=i);null!==n;)t.push(n),i=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')),null!==n&&null!==(r=x())?n=[n,r]:(n=null,o=i);null!==t?a=[a,t]:(a=null,o=u)}else a=null,o=u;return a}function Ft(){var e=qt();return null===e?Tt():e}function qt(){var t,n,r,i=o,u=o;return"tag"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"tag"')),null!==t&&null!==(r=L())&&null!==(n=P())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.tag=r)),null===t&&(o=i),t}function Ht(){var t,n,r,i,u,a,c,f=o;if("digest"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"Digest"')),null!==t)if(null!==(n=E()))if(null!==(r=Gt())){for(i=[],c=o,null!==(u=H())&&null!==(a=Gt())?u=[u,a]:(u=null,o=c);null!==u;)i.push(u),c=o,null!==(u=H())&&null!==(a=Gt())?u=[u,a]:(u=null,o=c);null!==i?t=[t,n,r,i]:(t=null,o=f)}else t=null,o=f;else t=null,o=f;else t=null,o=f;return null===t?Vt():t}function Vt(){var e,t,n,r,i,l,u=o,a=P();if(null!==a)if(null!==(e=E()))if(null!==(t=Wt())){for(n=[],l=o,null!==(r=H())&&null!==(i=Wt())?r=[r,i]:(r=null,o=l);null!==r;)n.push(r),l=o,null!==(r=H())&&null!==(i=Wt())?r=[r,i]:(r=null,o=l);null!==n?a=[a,e,t,n]:(a=null,o=u)}else a=null,o=u;else a=null,o=u;else a=null,o=u;return a}function Wt(){var e,t,n=o,r=P();return null!==r&&null!==(e=L())&&null!==(t=null===(t=P())?$():t)?r=[r,e,t]:(r=null,o=n),r}function Gt(){var e=Bt();return null===e&&null===(e=$t())&&null===(e=Kt())&&null===(e=Xt())&&null===(e=Qt())&&null===(e=Zt())&&null===(e=en())?Wt():e}function Bt(){var t,n,r,i=o;return"realm"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"realm"')),null!==t&&null!==(n=L())&&null!==(r=zt())?t=[t,n,r]:(t=null,o=i),t}function zt(){var e,t=o,n=J();return null!==n&&(e=n,n=void(Wn.realm=e)),null===n&&(o=t),n}function $t(){var t,n,r,i,u,a,c,f,d=o;if("domain"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"domain"')),null!==t)if(null!==(n=L()))if(null!==(r=G()))if(null!==(i=Jt())){if(u=[],f=o,null!==(c=g()))for(a=[];null!==c;)a.push(c),c=g();else a=null;for(null!==a&&null!==(c=Jt())?a=[a,c]:(a=null,o=f);null!==a;){if(u.push(a),f=o,null!==(c=g()))for(a=[];null!==c;)a.push(c),c=g();else a=null;null!==a&&null!==(c=Jt())?a=[a,c]:(a=null,o=f)}null!==u&&null!==(a=B())?t=[t,n,r,i,u,a]:(t=null,o=d)}else t=null,o=d;else t=null,o=d;else t=null,o=d;else t=null,o=d;return t}function Jt(){var e=je();return null===e?He():e}function Kt(){var t,n,r,i=o;return"nonce"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"nonce"')),null!==t&&null!==(n=L())&&null!==(r=Yt())?t=[t,n,r]:(t=null,o=i),t}function Yt(){var e,t=o,n=J();return null!==n&&(e=n,n=void(Wn.nonce=e)),null===n&&(o=t),n}function Xt(){var t,n,r,i=o,u=o;return"opaque"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"opaque"')),null!==t&&null!==(r=L())&&null!==(n=J())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.opaque=r)),null===t&&(o=i),t}function Qt(){var t,n,r,i,u=o;return"stale"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"stale"')),null!==t&&null!==(n=L())?(i=o,"true"===e.substr(o,4).toLowerCase()?(r=e.substr(o,4),o+=4):(r=null,0===l&&s('"true"')),null===(r=null!==r?void(Wn.stale=!0):r)&&(o=i),null===r&&(i=o,"false"===e.substr(o,5).toLowerCase()?(r=e.substr(o,5),o+=5):(r=null,0===l&&s('"false"')),null===(r=null!==r?void(Wn.stale=!1):r)&&(o=i)),null!==r?t=[t,n,r]:(t=null,o=u)):(t=null,o=u),t}function Zt(){var t,n,r,i=o,u=o;return"algorithm"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===l&&s('"algorithm"')),null!==t&&null!==(r=L())?("md5"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"MD5"')),null===n&&("md5-sess"===e.substr(o,8).toLowerCase()?(n=e.substr(o,8),o+=8):(n=null,0===l&&s('"MD5-sess"')),null===n&&(n=P())),null!==n?t=[t,r,n]:(t=null,o=u)):(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.algorithm=r.toUpperCase())),null===t&&(o=i),t}function en(){var t,n,r,i,u,a,c,f,d,h=o;if("qop"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"qop"')),null!==t)if(null!==(n=L()))if(null!==(r=G())){if(f=o,null!==(i=tn())){for(u=[],d=o,44===e.charCodeAt(o)?(a=",",o++):(a=null,0===l&&s('","')),null!==a&&null!==(c=tn())?a=[a,c]:(a=null,o=d);null!==a;)u.push(a),d=o,44===e.charCodeAt(o)?(a=",",o++):(a=null,0===l&&s('","')),null!==a&&null!==(c=tn())?a=[a,c]:(a=null,o=d);null!==u?i=[i,u]:(i=null,o=f)}else i=null,o=f;null!==i&&null!==(u=B())?t=[t,n,r,i,u]:(t=null,o=h)}else t=null,o=h;else t=null,o=h;else t=null,o=h;return t}function tn(){var t,n,r=o;return"auth-int"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===l&&s('"auth-int"')),null===t&&("auth"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"auth"')),null===t&&(t=P())),null!==t&&(n=t,Wn.qop||(Wn.qop=[]),t=void Wn.qop.push(n.toLowerCase())),null===t&&(o=r),t}function nn(){var e,t,n,r,i=o,l=o,u=_t();if(null!==u){for(e=[],r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==e?u=[u,e]:(u=null,o=l)}else u=null,o=l;return null===(u=null!==u?function(e){var t;Wn.multi_header||(Wn.multi_header=[]);try{t=new Vn(Wn.uri,Wn.display_name,Wn.params),delete Wn.uri,delete Wn.display_name,delete Wn.params}catch(e){t=null}Wn.multi_header.push({possition:o,offset:e,parsed:t})}(i):u)&&(o=i),u}function rn(){var e=on();return null===e?Tt():e}function on(){var t,n,r,i,u=o,a=o;if("cause"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"cause"')),null!==t)if(null!==(i=L())){if(null!==(r=f()))for(n=[];null!==r;)n.push(r),r=f();else n=null;null!==n?t=[t,i,n]:(t=null,o=a)}else t=null,o=a;else t=null,o=a;return null!==t&&(i=t[2],t=void(Wn.cause=parseInt(i.join("")))),null===t&&(o=u),t}function ln(){var e,t,n,r,i=o,l=_t();if(null!==l){for(e=[],r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==e?l=[l,e]:(l=null,o=i)}else l=null,o=i;return l}function un(){var t,n=o;return"active"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"active"')),null===t&&("pending"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"pending"')),null===t&&("terminated"===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===l&&s('"terminated"')),null===t&&(t=P()))),null===(t=null!==t?void(Wn.state=e.substring(o,n)):t)&&(o=n),t}function an(){var t,n,r,i,u=o,a=o;return"reason"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"reason"')),null!==t&&null!==(r=L())&&null!==(n=sn())?t=[t,r,n]:(t=null,o=a),null===(t=null!==t?void(void 0!==(i=t[2])&&(Wn.reason=i)):t)&&(o=u),null===t&&(a=u=o,"expires"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"expires"')),null!==t&&null!==(r=L())&&null!==(n=Ct())?t=[t,r,n]:(t=null,o=a),null===(t=null!==t?void(void 0!==(i=t[2])&&(Wn.expires=i)):t)&&(o=u),null===t&&(a=u=o,"retry_after"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===l&&s('"retry_after"')),null!==t&&null!==(r=L())&&null!==(n=Ct())?t=[t,r,n]:(t=null,o=a),null===(t=null!==t?void(void 0!==(r=t[2])&&(Wn.retry_after=r)):t)&&(o=u),null===t&&(t=Tt()))),t}function sn(){var t;return"deactivated"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===l&&s('"deactivated"')),null===t&&("probation"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===l&&s('"probation"')),null===t&&("rejected"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===l&&s('"rejected"')),null===t&&("timeout"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"timeout"')),null===t&&("giveup"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"giveup"')),null===t&&("noresource"===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===l&&s('"noresource"')),null===t&&("invariant"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===l&&s('"invariant"')),null===t&&(t=P()))))))),t}function cn(){var e=qt();return null===e?Tt():e}function fn(){var e,t,n,r,i,l,u=o,a=yn();if(null!==a)if(null!==(e=E()))if(null!==(t=Sn())){for(n=[],l=o,null!==(r=V())&&null!==(i=dn())?r=[r,i]:(r=null,o=l);null!==r;)n.push(r),l=o,null!==(r=V())&&null!==(i=dn())?r=[r,i]:(r=null,o=l);null!==n?a=[a,e,t,n]:(a=null,o=u)}else a=null,o=u;else a=null,o=u;else a=null,o=u;return a}function dn(){var e=hn();return null===e&&null===(e=pn())&&null===(e=vn())&&null===(e=_n())&&null===(e=gn())?Tt():e}function hn(){var t,n,r,i=o,u=o;return"ttl"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"ttl"')),null!==t&&null!==(r=L())&&null!==(n=An())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.ttl=r)),null===t&&(o=i),t}function pn(){var t,n,r,i=o,u=o;return"maddr"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"maddr"')),null!==t&&null!==(r=L())&&null!==(n=ue())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.maddr=r)),null===t&&(o=i),t}function vn(){var t,n,r,i=o,u=o;return"received"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===l&&s('"received"')),null!==t&&null!==(r=L())&&null!==(n=null===(n=ve())?de():n)?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.received=r)),null===t&&(o=i),t}function _n(){var t,n,r,i=o,u=o;return"branch"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"branch"')),null!==t&&null!==(r=L())&&null!==(n=P())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.branch=r)),null===t&&(o=i),t}function gn(){var t,n,r,i,u=o;return"rport"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"rport"')),null!==t?(i=o,null!==(n=L())&&null!==(r=mn())?n=[n,r]:(n=null,o=i),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=u)):(t=null,o=u),t}function mn(){var e,t,n,r,i=o,l=o,u=f();return null!==(u=null!==u?u:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")?u=[u,r,e,t,n]:(u=null,o=l),null!==u&&(r=u,u=void(Wn.rport=parseInt(r.join("")))),null===u&&(o=i),u}function yn(){var e,t,n,r,i=o,l=bn();return null!==l&&null!==(e=N())&&null!==(t=P())&&null!==(n=N())&&null!==(r=Cn())?l=[l,e,t,n,r]:(l=null,o=i),l}function bn(){var t,n,r=o;return"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"SIP"')),null!==(t=null===t?P():t)&&(n=t,t=void(Wn.protocol=n)),null===t&&(o=r),t}function Cn(){var t,n,r=o;return"udp"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"UDP"')),null===t&&("tcp"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"TCP"')),null===t&&("tls"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"TLS"')),null===t&&("sctp"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"SCTP"')),null===t&&(t=P())))),null!==t&&(n=t,t=void(Wn.transport=n)),null===t&&(o=r),t}function Sn(){var e,t,n,r=o,i=Tn();return null!==i?(n=o,null!==(e=W())&&null!==(t=En())?e=[e,t]:(e=null,o=n),null!==(e=null!==e?e:"")?i=[i,e]:(i=null,o=r)):(i=null,o=r),i}function Tn(){var t=o,n=ve();return null===(n=null!==(n=null===n&&null===(n=fe())?ae():n)?void(Wn.host=e.substring(o,t)):n)&&(o=t),n}function En(){var e,t,n,r,i=o,l=o,u=f();return null!==(u=null!==u?u:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")?u=[u,r,e,t,n]:(u=null,o=l),null!==u&&(r=u,u=void(Wn.port=parseInt(r.join("")))),null===u&&(o=i),u}function An(){var e,t,n=o,r=o,i=f();return null!==i&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")?i=[i,e,t]:(i=null,o=r),null===(i=null!==i?parseInt(i.join("")):i)&&(o=n),i}function wn(){var e,t=o,n=Ct();return null!==n&&(e=n,n=void(Wn.expires=e)),null===n&&(o=t),n}function Rn(){var e=In();return null===e?Tt():e}function In(){var t,n,r,i=o,u=o;return"refresher"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===l&&s('"refresher"')),null!==t&&null!==(r=L())?("uac"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"uac"')),null===n&&("uas"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"uas"'))),null!==n?t=[t,r,n]:(t=null,o=u)):(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.refresher=r.toLowerCase())),null===t&&(o=i),t}function On(){var e=[],t=I();for(null===t&&null===(t=k())&&(t=E());null!==t;)e.push(t),null===(t=I())&&null===(t=k())&&(t=E());return e}function kn(){var t,n,r,i,u,a,c,f,d=o,h=o,p=xn();return null!==p?(45===e.charCodeAt(o)?(t="-",o++):(t=null,0===l&&s('"-"')),null!==t&&null!==(n=Pn())?(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null!==r&&null!==(i=Pn())?(45===e.charCodeAt(o)?(u="-",o++):(u=null,0===l&&s('"-"')),null!==u&&null!==(a=Pn())?(45===e.charCodeAt(o)?(c="-",o++):(c=null,0===l&&s('"-"')),null!==c&&null!==(f=Dn())?p=[p,t,n,r,i,u,a,c,f]:(p=null,o=h)):(p=null,o=h)):(p=null,o=h)):(p=null,o=h)):(p=null,o=h),null!==p&&(p[0],p=void(Wn=e.substring(o+5,d))),null===p&&(o=d),p}function Pn(){var e,t,n,r=o,i=h();return null!==i&&null!==(e=h())&&null!==(t=h())&&null!==(n=h())?i=[i,e,t,n]:(i=null,o=r),i}function xn(){var e,t=o,n=Pn();return null!==n&&null!==(e=Pn())?n=[n,e]:(n=null,o=t),n}function Dn(){var e,t,n=o,r=Pn();return null!==r&&null!==(e=Pn())&&null!==(t=Pn())?r=[r,e,t]:(r=null,o=n),r}function Mn(){var t,n,r,i=o,u=o,a=D();return null!==a?(r=o,64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null!==t&&null!==(n=D())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?a=[a,t]:(a=null,o=u)):(a=null,o=u),null===(a=null!==a?void(Wn.call_id=e.substring(o,i)):a)&&(o=i),a}function Nn(){var e=Ln();return null===e&&null===(e=Un())&&null===(e=jn())?Tt():e}function Ln(){var t,n,r,i=o,u=o;return"to-tag"===e.substr(o,6)?(t="to-tag",o+=6):(t=null,0===l&&s('"to-tag"')),null!==t&&null!==(r=L())&&null!==(n=P())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.to_tag=r)),null===t&&(o=i),t}function Un(){var t,n,r,i=o,u=o;return"from-tag"===e.substr(o,8)?(t="from-tag",o+=8):(t=null,0===l&&s('"from-tag"')),null!==t&&null!==(r=L())&&null!==(n=P())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.from_tag=r)),null===t&&(o=i),t}function jn(){var t,n=o;return"early-only"===e.substr(o,10)?(t="early-only",o+=10):(t=null,0===l&&s('"early-only"')),null===(t=null!==t?void(Wn.early_only=!0):t)&&(o=n),t}var Fn,qn,Hn=n(53),Vn=n(110),Wn={};return null===i[t]()||o!==e.length?(Fn=(i=Math.max(o,u))<e.length?e.charAt(i):null,qn=function(){for(var t=1,n=1,r=!1,i=0;i<Math.max(o,u);i++){var l=e.charAt(i);r="\n"===l?(r||t++,!(n=1)):"\r"===l||"\u2028"===l||"\u2029"===l?(t++,n=1,!0):(n++,!1)}return{line:t,column:n}}(),new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}(a),Fn,i,qn.line,qn.column),-1):Wn},toSource:function(){return this._source}}).SyntaxError=function(e,t,n,i,o){this.name="SyntaxError",this.expected=e,this.found=t,this.message=function(e,t){var n;switch(e.length){case 0:n="end of input";break;case 1:n=e[0];break;default:n=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+n+" but "+(t?r(t):"end of input")+" found."}(e,t),this.offset=n,this.line=i,this.column=o},e.SyntaxError.prototype=Error.prototype,e)},function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},o=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},l=Number.isNaN||function(e){return e!=e};function u(){u.init.call(this)}e.exports=u,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}var l,u,a;_(e,t,o,{once:!0}),"error"!==t&&(u=i,a={once:!0},"function"==typeof(l=e).on&&_(l,"error",u,a))}))},(u.EventEmitter=u).prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o;return s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener||n),i=e._events),o=i[t]),void 0===o?(o=i[t]=n,++e._eventsCount):("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),0<(i=c(e))&&o.length>i&&!o.warned&&(o.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=o.length,n=r,console&&console.warn&&console.warn(n))),e}function d(e,t,n){return(t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n})).listener=n,e.wrapFn=t}function h(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(e=e[t]))return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var r=e,i=new Array(r.length),o=0;o<i.length;++o)i[o]=r[o].listener||r[o];return i}return v(e,e.length)}function p(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function _(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||l(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return c(this)},u.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){if((l=0<t.length?t[0]:l)instanceof Error)throw l;throw(r=new Error("Unhandled error."+(l?" ("+l.message+")":""))).context=l,r}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var u=l.length,a=v(l,u);for(n=0;n<u;++n)i(a[n],this,t)}return!0},u.prototype.on=u.prototype.addListener=function(e,t){return f(this,e,t,!1)},u.prototype.prependListener=function(e,t){return f(this,e,t,!0)},u.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},u.prototype.off=u.prototype.removeListener=function(e,t){var n,r,i,o,l;if(s(t),void 0!==(r=this._events)&&void 0!==(n=r[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){l=n[o].listener,i=o;break}if(i<0)return this;if(0===i)n.shift();else{for(var u=n,a=i;a+1<u.length;a++)u[a]=u[a+1];u.pop()}1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,l||t)}return this},u.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0!==n)if(void 0===n.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]);else if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},u.prototype.listeners=function(e){return h(this,e,!0)},u.prototype.rawListeners=function(e){return h(this,e,!1)},u.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},u.prototype.listenerCount=p,u.prototype.eventNames=function(){return 0<this._eventsCount?o(this._events):[]}},function(e,t,n){"use strict";var r,i,o,l,u,a,s,c,f,d,h,p,v,_,g,m,y,b,C,S,T,E,A,w,R,I,O,k,P,x,D,M,N,L,U,j,F,q,H,V,W,G,B,z,$,J,K,Y,X,Q,Z,ee,te,ne,re,ie,oe,le,ue,ae,se,ce,fe,de,he,pe,ve,_e,ge,me,ye,be,Ce,Se,Te,Ee,Ae,we,Re,Ie,Oe,ke,Pe,xe,De,Me,Ne,Le,Ue,je,Fe,qe,He;n(8)?(r=n(37),i=n(2),o=n(3),l=n(0),u=n(76),ge=n(108),a=n(25),s=n(48),c=n(41),f=n(17),d=n(50),h=n(27),p=n(7),v=n(143),_=n(44),g=n(29),m=n(20),y=n(57),b=n(4),C=n(12),S=n(97),T=n(45),E=n(23),A=n(46).f,w=n(99),R=n(42),I=n(6),O=n(32),Oe=n(66),k=n(64),Fe=n(102),P=n(59),x=n(71),D=n(47),M=n(101),N=n(132),L=n(11),n=n(22),U=L.f,j=n.f,F=i.RangeError,q=i.TypeError,H=i.Uint8Array,W="Shared"+(V="ArrayBuffer"),G="BYTES_PER_ELEMENT",B="prototype",qe=Array[B],z=ge.ArrayBuffer,$=ge.DataView,J=O(0),K=O(2),Y=O(3),X=O(4),Q=O(5),Z=O(6),ee=Oe(!0),te=Oe(!1),ne=Fe.values,re=Fe.keys,ie=Fe.entries,oe=qe.lastIndexOf,le=qe.reduce,ue=qe.reduceRight,ae=qe.join,se=qe.sort,ce=qe.slice,fe=qe.toString,de=qe.toLocaleString,he=I("iterator"),pe=I("toStringTag"),ve=R("typed_constructor"),_e=R("def_constructor"),ge=u.CONSTR,me=u.TYPED,ye=u.VIEW,be="Wrong length!",Ce=O(1,(function(e,t){return we(k(e,e[_e]),t)})),Se=o((function(){return 1===new H(new Uint16Array([1]).buffer)[0]})),Te=!!H&&!!H[B].set&&o((function(){new H(1).set({})})),Ee=function(e,t){if((e=h(e))<0||e%t)throw F("Wrong offset!");return e},Ae=function(e){if(b(e)&&me in e)return e;throw q(e+" is not a typed array!")},we=function(e,t){if(b(e)&&ve in e)return new e(t);throw q("It is not a typed array constructor!")},Re=function(e,t){return Ie(k(e,e[_e]),t)},Ie=function(e,t){for(var n=0,r=t.length,i=we(e,r);n<r;)i[n]=t[n++];return i},Oe=function(e,t,n){U(e,t,{get:function(){return this._d[n]}})},ke=function(e){var t,n,r,i,o,l,u=C(e),s=1<(e=arguments.length)?arguments[1]:void 0,c=void 0!==s,f=w(u);if(null!=f&&!S(f)){for(l=f.call(u),r=[],t=0;!(o=l.next()).done;t++)r.push(o.value);u=r}for(c&&2<e&&(s=a(s,arguments[2],2)),t=0,n=p(u.length),i=we(this,n);t<n;t++)i[t]=c?s(u[t],t):u[t];return i},Pe=function(){for(var e=0,t=arguments.length,n=we(this,t);e<t;)n[e]=arguments[e++];return n},xe=!!H&&o((function(){de.call(new H(1))})),De=function(){return de.apply(xe?ce.call(Ae(this)):Ae(this),arguments)},Me={copyWithin:function(e,t){return N.call(Ae(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return X(Ae(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(e){return M.apply(Ae(this),arguments)},filter:function(e){return Re(this,K(Ae(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return Q(Ae(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return Z(Ae(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){J(Ae(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return te(Ae(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return ee(Ae(this),e,1<arguments.length?arguments[1]:void 0)},join:function(e){return ae.apply(Ae(this),arguments)},lastIndexOf:function(e){return oe.apply(Ae(this),arguments)},map:function(e){return Ce(Ae(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(e){return le.apply(Ae(this),arguments)},reduceRight:function(e){return ue.apply(Ae(this),arguments)},reverse:function(){for(var e,t=this,n=Ae(t).length,r=Math.floor(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t},some:function(e){return Y(Ae(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return se.call(Ae(this),e)},subarray:function(e,t){var n=Ae(this),r=n.length;e=_(e,r);return new(k(n,n[_e]))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,p((void 0===t?r:_(t,r))-e))}},Ne=function(e,t){return Re(this,ce.call(Ae(this),e,t))},Le=function(e){Ae(this);var t=Ee(arguments[1],1),n=this.length,r=C(e),i=p(r.length),o=0;if(n<i+t)throw F(be);for(;o<i;)this[t+o]=r[o++]},Ue={entries:function(){return ie.call(Ae(this))},keys:function(){return re.call(Ae(this))},values:function(){return ne.call(Ae(this))}},je=function(e,t){return b(e)&&e[me]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return je(e,t=g(t,!0))?c(2,e[t]):j(e,t)},qe=function(e,t,n){return!(je(e,t=g(t,!0))&&b(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?U(e,t,n):(e[t]=n.value,e)},ge||(n.f=Fe,L.f=qe),l(l.S+l.F*!ge,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:qe}),o((function(){fe.call({})}))&&(fe=de=function(){return ae.call(this)}),He=d({},Me),d(He,Ue),f(He,he,Ue.values),d(He,{slice:Ne,set:Le,constructor:function(){},toString:fe,toLocaleString:De}),Oe(He,"buffer","b"),Oe(He,"byteOffset","o"),Oe(He,"byteLength","l"),Oe(He,"length","e"),U(He,pe,{get:function(){return this[me]}}),e.exports=function(e,t,n,a){function c(e,n){U(e,n,{get:function(){var e=this,r=n;return(e=e._d).v[h](r*t+e.o,Se)},set:function(e){var r=this,i=n;r=r._d,a&&(e=(e=Math.round(e))<0?0:255<e?255:255&e),r.v[_](i*t+r.o,e,Se)},enumerable:!0})}var d=e+((a=!!a)?"Clamped":"")+"Array",h="get"+e,_="set"+e,g=i[d],m=g||{},C=(e=g&&E(g),!g||!u.ABV),S={},w=g&&g[B];n=!!(C=(C?(g=n((function(e,n,r,i){s(e,g,d,"_d");var o,l,u=0,a=0;if(b(n)){if(!(n instanceof z||(h=y(n))==V||h==W))return me in n?Ie(g,n):ke.call(g,n);var h=n;a=Ee(r,t),r=n.byteLength;if(void 0===i){if(r%t)throw F(be);if((o=r-a)<0)throw F(be)}else if(r<(o=p(i)*t)+a)throw F(be);l=o/t}else l=v(n),h=new z(o=l*t);for(f(e,"_d",{b:h,o:a,l:o,e:l,v:new $(h)});u<l;)c(e,u++)})),w=g[B]=T(He),f(w,"constructor",g)):o((function(){g(1)}))&&o((function(){new g(-1)}))&&x((function(e){new g,new g(null),new g(1.5),new g(e)}),!0)||(g=n((function(e,n,r,i){return s(e,g,d),b(n)?n instanceof z||(e=y(n))==V||e==W?void 0!==i?new m(n,Ee(r,t),i):void 0!==r?new m(n,Ee(r,t)):new m(n):me in n?Ie(g,n):ke.call(g,n):new m(v(n))})),J(e!==Function.prototype?A(m).concat(A(e)):A(m),(function(e){e in g||f(g,e,m[e])})),g[B]=w,r||(w.constructor=g)),w[he]))&&("values"==C.name||null==C.name),e=Ue.values;f(g,ve,!0),f(w,me,d),f(w,ye,!0),f(w,_e,g),(a?new g(1)[pe]==d:pe in w)||U(w,pe,{get:function(){return d}}),S[d]=g,l(l.G+l.W+l.F*(g!=m),S),l(l.S,d,{BYTES_PER_ELEMENT:t}),l(l.S+l.F*o((function(){m.of.call(g,1)})),d,{from:ke,of:Pe}),G in w||f(w,G,t),l(l.P,d,Me),D(d),l(l.P+l.F*Te,d,{set:Le}),l(l.P+l.F*!n,d,Ue),r||w.toString==fe||(w.toString=fe),l(l.P+l.F*o((function(){new g(1).slice()})),d,{slice:Ne}),l(l.P+l.F*(o((function(){return[1,2].toLocaleString()!=new g([1,2]).toLocaleString()}))||!o((function(){w.toLocaleString.call([1,2])}))),d,{toLocaleString:De}),P[d]=n?C:e,r||n||f(w,he,e)}):e.exports=function(){}},function(e,t,n){function r(e,t,n){var r=u.get(e);if(!r){if(!n)return;u.set(e,r=new i)}if(!(e=r.get(t))){if(!n)return;r.set(t,e=new i)}return e}var i=n(138),o=n(0),l=n(60)("metadata"),u=l.store||(l.store=new(n(141)));e.exports={store:u,map:r,has:function(e,t,n){return void 0!==(t=r(t,n,!1))&&t.has(e)},get:function(e,t,n){return void 0===(t=r(t,n,!1))?void 0:t.get(e)},set:function(e,t,n,i){r(n,i,!0).set(e,t)},keys:function(e,t){e=r(e,t,!1);var n=[];return e&&e.forEach((function(e,t){n.push(t)})),n},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){o(o.S,"Reflect",e)}}},function(e,t){e.exports=!1},function(e,t,n){function r(e){u(e,i,{value:{i:"O"+ ++a,w:{}}})}var i=n(42)("meta"),o=n(4),l=n(20),u=n(11).f,a=0,s=Object.isExtensible||function(){return!0},c=!n(3)((function(){return s(Object.preventExtensions({}))})),f=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!l(e,i)){if(!s(e))return"F";if(!t)return"E";r(e)}return e[i].i},getWeak:function(e,t){if(!l(e,i)){if(!s(e))return!0;if(!t)return!1;r(e)}return e[i].w},onFreeze:function(e){return c&&f.NEED&&s(e)&&!l(e,i)&&r(e),e}}},function(e,t,n){var r=n(6)("unscopables"),i=Array.prototype;null==i[r]&&n(17)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&function(e,t){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=l(e);n=t?(n=l(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this;if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var d=n(9),h=n(13),p=n(16),v=n(110),_=n(33),g=new(n(14))("JsSIP:SIPMessage").debug,m=function(){function e(t,n,r,i,o,l){if(s(this,e),!t||!n||!r)return null;i=i||{},this.ua=r,this.headers={},this.method=t,this.ruri=n,this.body=l,this.extraHeaders=p.cloneArray(o),i.route_set?this.setHeader("route",i.route_set):r.configuration.use_preloaded_route&&this.setHeader("route","<".concat(r.transport.sip_uri,";lr>")),this.setHeader("via",""),this.setHeader("max-forwards",h.MAX_FORWARDS),l=i.to_uri||n,o=i.to_tag?{tag:i.to_tag}:null,n=void 0!==i.to_display_name?i.to_display_name:null,this.to=new v(l,n,o),this.setHeader("to",this.to.toString()),l=i.from_uri||r.configuration.uri,n={tag:i.from_tag||p.newTag()},o=void 0!==i.from_display_name?i.from_display_name:r.configuration.display_name||null,this.from=new v(l,o,n),this.setHeader("from",this.from.toString()),l=i.call_id||r.configuration.jssip_id+p.createRandomToken(15),this.call_id=l,this.setHeader("call-id",l),o=i.cseq||Math.floor(1e4*Math.random()),this.cseq=o,this.setHeader("cseq","".concat(o," ").concat(t))}return f(e,[{key:"setHeader",value:function(e,t){for(var n=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),r=0;r<this.extraHeaders.length;r++)n.test(this.extraHeaders[r])&&this.extraHeaders.splice(r,1);this.headers[p.headerize(e)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(e){var t=this.headers[p.headerize(e)];if(t){if(t[0])return t[0]}else{var n,r=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),i=u(this.extraHeaders);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(r.test(o))return o.substring(o.indexOf(":")+1).trim()}}catch(e){i.e(e)}finally{i.f()}}}},{key:"getHeaders",value:function(e){var t=this.headers[p.headerize(e)],n=[];if(t){var r,i=u(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(o)}}catch(e){i.e(e)}finally{i.f()}}else{var l,a=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),s=u(this.extraHeaders);try{for(s.s();!(l=s.n()).done;){var c=l.value;a.test(c)&&n.push(c.substring(c.indexOf(":")+1).trim())}}catch(e){s.e(e)}finally{s.f()}}return n}},{key:"hasHeader",value:function(e){if(this.headers[p.headerize(e)])return!0;var t,n=new RegExp("^\\s*".concat(e,"\\s*:"),"i"),r=u(this.extraHeaders);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(n.test(i))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"parseSDP",value:function(e){return!e&&this.sdp||(this.sdp=d.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){var e,t="".concat(this.method," ").concat(this.ruri," SIP/2.0\r\n");for(e in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,e)){var n,r=u(this.headers[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;t+="".concat(e,": ").concat(i,"\r\n")}}catch(e){r.e(e)}finally{r.f()}}var o,l=u(this.extraHeaders);try{for(l.s();!(o=l.n()).done;){var a=o.value;t+="".concat(a.trim(),"\r\n")}}catch(e){l.e(e)}finally{l.f()}var s=[];switch(this.method){case h.REGISTER:s.push("path","gruu");break;case h.INVITE:this.ua.configuration.session_timers&&s.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&s.push("gruu"),s.push("ice","replaces");break;case h.UPDATE:this.ua.configuration.session_timers&&s.push("timer"),s.push("ice")}s.push("outbound");var c=this.ua.configuration.user_agent||h.USER_AGENT;return!this.extraHeaders.find((function(e){return-1!==e.indexOf("X-Client-Info")}))&&this.ua.xClientInfoHeader&&(t+="".concat(this.ua.xClientInfoHeader,"\r\n")),t=(t=(t+="Allow: ".concat(h.ALLOWED_METHODS,"\r\n"))+"Supported: ".concat(s,"\r\n"))+"User-Agent: ".concat(c,"\r\n"),this.body?(c=p.str_utf8_length(this.body),t=(t+="Content-Length: ".concat(c,"\r\n\r\n"))+this.body):t+="Content-Length: 0\r\n\r\n",t}},{key:"clone",value:function(){var t=new e(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach((function(e){t.headers[e]=this.headers[e].slice()}),this),t.body=this.body,t.extraHeaders=p.cloneArray(this.extraHeaders),t.to=this.to,t.from=this.from,t.call_id=this.call_id,t.cseq=this.cseq,t}}]),e}(),y=(n=function(){i(t,m);var e=o(t);function t(n,r,i,o,l){return s(this,t),(n=e.call(this,h.INVITE,n,r,i,o,l)).transaction=null,n}return f(t,[{key:"cancel",value:function(e){this.transaction.cancel(e)}},{key:"clone",value:function(){var e=new t(this.ruri,this.ua);return Object.keys(this.headers).forEach((function(t){e.headers[t]=this.headers[t].slice()}),this),e.body=this.body,e.extraHeaders=p.cloneArray(this.extraHeaders),e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e.transaction=this.transaction,e}}]),t}(),function(){function e(){s(this,e),this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}return f(e,[{key:"addHeader",value:function(e,t){t={raw:t},e=p.headerize(e),this.headers[e]?this.headers[e].push(t):this.headers[e]=[t]}},{key:"getHeader",value:function(e){if((e=this.headers[p.headerize(e)])&&e[0])return e[0].raw}},{key:"getHeaders",value:function(e){var t=[];if(!(e=this.headers[p.headerize(e)]))return[];var n,r=u(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push(i.raw)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"hasHeader",value:function(e){return!!this.headers[p.headerize(e)]}},{key:"parseHeader",value:function(e){var t,n,r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(e=p.headerize(e),this.headers[e]){if(!(i>=this.headers[e].length))return n=(t=this.headers[e][i]).raw,t.parsed||(-1!==(r=_.parse(n,e.replace(/-/g,"_")))?t.parsed=r:(this.headers[e].splice(i,1),void g('error parsing "'.concat(e,'" header field with value "').concat(n,'"'))));g('not so many "'.concat(e,'" headers present'))}else g('header "'.concat(e,'" not present'))}},{key:"s",value:function(e,t){return this.parseHeader(e,t)}},{key:"setHeader",value:function(e,t){t={raw:t},this.headers[p.headerize(e)]=[t]}},{key:"parseSDP",value:function(e){return!e&&this.sdp||(this.sdp=d.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){return this.data}}]),e}()),b=function(){i(t,y);var e=o(t);function t(n){var r;return s(this,t),(r=e.call(this)).ua=n,r.headers={},r.ruri=null,r.transport=null,r.server_transaction=null,r}return f(t,[{key:"reply",value:function(e,t,n,r,i,o){var l=[],a=this.getHeader("To");if(t=t||null,!(e=e||null)||e<100||699<e)throw new TypeError("Invalid status_code: ".concat(e));if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(t));t=t||h.REASON_PHRASE[e]||"",n=p.cloneArray(n);var s="SIP/2.0 ".concat(e," ").concat(t,"\r\n");if(this.method===h.INVITE&&100<e&&e<=200){var c,f=u(this.getHeaders("record-route"));try{for(f.s();!(c=f.n()).done;){var d=c.value;s+="Record-Route: ".concat(d,"\r\n")}}catch(e){f.e(e)}finally{f.f()}}var v,_=u(this.getHeaders("via"));try{for(_.s();!(v=_.n()).done;){var g=v.value;s+="Via: ".concat(g,"\r\n")}}catch(e){_.e(e)}finally{_.f()}!this.to_tag&&100<e?a+=";tag=".concat(p.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(a+=";tag=".concat(this.to_tag)),s=(s=(s=(s+="To: ".concat(a,"\r\n"))+"From: ".concat(this.getHeader("From"),"\r\n"))+"Call-ID: ".concat(this.call_id,"\r\n"))+"CSeq: ".concat(this.cseq," ").concat(this.method,"\r\n");var m,y=u(n);try{for(y.s();!(m=y.n()).done;){var b=m.value;s+="".concat(b.trim(),"\r\n")}}catch(e){y.e(e)}finally{y.f()}switch(this.method){case h.INVITE:this.ua.configuration.session_timers&&l.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&l.push("gruu"),l.push("ice","replaces");break;case h.UPDATE:this.ua.configuration.session_timers&&l.push("timer"),r&&l.push("ice"),l.push("replaces")}l.push("outbound"),!n.find((function(e){return-1!==e.indexOf("X-Client-Info")}))&&this.ua.xClientInfoHeader&&(s+="".concat(this.ua.xClientInfoHeader,"\r\n")),s+="Allow: ".concat(h.ALLOWED_METHODS,"\r\n"),this.method!==h.OPTIONS&&415!==e||(s+="Accept: ".concat(h.ACCEPTED_BODY_TYPES,"\r\n")),s+="Supported: ".concat(l,"\r\n"),r?(t=p.str_utf8_length(r),s=(s+="Content-Type: application/sdp\r\n")+"Content-Length: ".concat(t,"\r\n\r\n")+r):s+="Content-Length: ".concat(0,"\r\n\r\n"),this.server_transaction.receiveResponse(e,s,i,o)}},{key:"reply_sl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=this.getHeaders("via");if(!e||e<100||699<e)throw new TypeError("Invalid status_code: ".concat(e));if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(t));t=t||h.REASON_PHRASE[e]||"";var r,i="SIP/2.0 ".concat(e," ").concat(t,"\r\n"),o=u(n);try{for(o.s();!(r=o.n()).done;){var l=r.value;i+="Via: ".concat(l,"\r\n")}}catch(e){o.e(e)}finally{o.f()}t=this.getHeader("To"),!this.to_tag&&100<e?t+=";tag=".concat(p.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(t+=";tag=".concat(this.to_tag)),i=(i=(i=(i=(i+="To: ".concat(t,"\r\n"))+"From: ".concat(this.getHeader("From"),"\r\n"))+"Call-ID: ".concat(this.call_id,"\r\n"))+"CSeq: ".concat(this.cseq," ").concat(this.method,"\r\n"))+"Content-Length: ".concat(0,"\r\n\r\n"),this.transport.send(i)}}]),t}();e.exports={OutgoingRequest:m,InitialOutgoingInviteRequest:n,IncomingRequest:b,IncomingResponse:function(){i(t,y);var e=o(t);function t(){var n;return s(this,t),(n=e.call(this)).headers={},n.status_code=null,n.reason_phrase=null,n}return f(t)}()}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(117),i=n(85);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(27),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){function r(){}var i=n(1),o=n(118),l=n(85),u=n(84)("IE_PROTO"),a="prototype",s=function(){var e=n(82)("iframe"),t=l.length;for(e.style.display="none",n(86).appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;t--;)delete s[a][l[t]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(r[a]=i(e),n=new r,r[a]=null,n[u]=e):n=s(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(117),i=n(85).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(2),i=n(11),o=n(8),l=n(6)("species");e.exports=function(e){e=r[e],o&&e&&!e[l]&&i.f(e,l,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(25),i=n(130),o=n(97),l=n(1),u=n(7),a=n(99),s={},c={};(t=e.exports=function(e,t,n,f,d){d=d?function(){return e}:a(e);var h,p,v,_,g=r(n,f,t?2:1),m=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");if(o(d)){for(h=u(e.length);m<h;m++)if((_=t?g(l(p=e[m])[0],p[1]):g(e[m]))===s||_===c)return _}else for(v=d.call(e);!(p=v.next()).done;)if((_=i(v,g,p.value,t))===s||_===c)return _}).BREAK=s,t.RETURN=c},function(e,t,n){var r=n(18);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(r(e)&&e._t===t)return e;throw TypeError("Incompatible receiver, "+t+" required!")}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function a(e){var t=f();return function(){var n,i=h(e);n=t?(n=h(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this;if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)})(e)}function c(e,t,n){return(c=f()?Reflect.construct.bind():function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&d(t,n.prototype),t}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(){u(t,s(Error));var e=a(t);function t(n,r){var i;return l(this,t),(i=e.call(this)).code=1,i.name="CONFIGURATION_ERROR",i.parameter=n,i.value=r,i.message=i.value?"Invalid value ".concat(JSON.stringify(i.value),' for parameter "').concat(i.parameter,'"'):"Missing parameter: ".concat(i.parameter),i}return o(t)}(),v=function(){u(t,s(Error));var e=a(t);function t(n){var r;return l(this,t),(r=e.call(this)).code=2,r.name="INVALID_STATE_ERROR",r.status=n,r.message="Invalid status: ".concat(n),r}return o(t)}(),_=function(){u(t,s(Error));var e=a(t);function t(n){var r;return l(this,t),(r=e.call(this)).code=3,r.name="NOT_SUPPORTED_ERROR",r.message=n,r}return o(t)}(),g=function(){u(t,s(Error));var e=a(t);function t(n){var r;return l(this,t),(r=e.call(this)).code=4,r.name="NOT_READY_ERROR",r.message=n,r}return o(t)}();e.exports={ConfigurationError:p,InvalidStateError:v,NotSupportedError:_,NotReadyError:g}},function(e,t,n){"use strict";function r(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=n(13),u=n(16),a=n(33);e.exports=function(){function e(t,n,r,i){var o,u,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{},c=this,f=e;if(!(c instanceof f))throw new TypeError("Cannot call a class as a function");if(!r)throw new TypeError('missing or invalid "host" parameter');for(o in this._parameters={},this._headers={},this._scheme=t||l.SIP,this._user=n,this._host=r,this._port=i,a)Object.prototype.hasOwnProperty.call(a,o)&&this.setParam(o,a[o]);for(u in s)Object.prototype.hasOwnProperty.call(s,u)&&this.setHeader(u,s[u])}var t,n,i;return t=e,i=[{key:"parse",value:function(e){if(-1!==(e=a.parse(e,"SIP_URI")))return e}}],(n=[{key:"scheme",get:function(){return this._scheme},set:function(e){this._scheme=e.toLowerCase()}},{key:"user",get:function(){return this._user},set:function(e){this._user=e}},{key:"host",get:function(){return this._host},set:function(e){this._host=e.toLowerCase()}},{key:"port",get:function(){return this._port},set:function(e){this._port=0===e?e:parseInt(e,10)||null}},{key:"setParam",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){var t;if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e))return t=this._parameters[e],delete this._parameters[e],t}},{key:"clearParams",value:function(){this._parameters={}}},{key:"setHeader",value:function(e,t){this._headers[u.headerize(e)]=Array.isArray(t)?t:[t]}},{key:"getHeader",value:function(e){if(e)return this._headers[u.headerize(e)]}},{key:"hasHeader",value:function(e){if(e)return!!this._headers.hasOwnProperty(u.headerize(e))}},{key:"deleteHeader",value:function(e){var t;if(e=u.headerize(e),this._headers.hasOwnProperty(e))return t=this._headers[e],delete this._headers[e],t}},{key:"clearHeaders",value:function(){this._headers={}}},{key:"clone",value:function(){return new e(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}},{key:"toString",value:function(){var e,t,n=[],i="".concat(this._scheme,":");for(e in this._user&&(i+="".concat(u.escapeUser(this._user),"@")),i+=this._host,!this._port&&0!==this._port||(i+=":".concat(this._port)),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(i+=";".concat(e),null!==this._parameters[e]&&(i+="=".concat(this._parameters[e])));for(t in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,t)){var o,l=r(this._headers[t]);try{for(l.s();!(o=l.n()).done;){var a=o.value;n.push("".concat(t,"=").concat(a))}}catch(e){l.e(e)}finally{l.f()}}return 0<n.length&&(i+="?".concat(n.join("&"))),i}},{key:"toAor",value:function(e){var t="".concat(this._scheme,":");return this._user&&(t+="".concat(u.escapeUser(this._user),"@")),t+=this._host,e&&(this._port||0===this._port)&&(t+=":".concat(this._port)),t}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){const r=n(10),i=n(112),o=n(113),l=(t.str_utf8_length=e=>unescape(encodeURIComponent(e)).length,t.isFunction=e=>void 0!==e&&"[object Function]"===Object.prototype.toString.call(e)),u=(t.isString=e=>void 0!==e&&"[object String]"===Object.prototype.toString.call(e),t.isDecimal=e=>!isNaN(e)&&parseFloat(e)===parseInt(e,10),t.isEmpty=e=>null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e),t.hasMethods=function(e,...t){for(const n of t)if(l(e[n]))return!1;return!0},t.createRandomToken=(e,t=32)=>{let n,r,i="";for(n=0;n<e;n++)r=Math.random()*t|0,i+=r.toString(t);return i}),a=(t.newTag=()=>u(10),t.newUUID=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),t.hostType=e=>{if(e&&-1!==(e=o.parse(e,"host")))return e.host_type},t.escapeUser=e=>encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/"));t.normalizeTarget=(e,t)=>{if(e){if(e instanceof i)return e;if("string"==typeof e){const o=e.split("@");let l,u;switch(o.length){case 1:if(!t)return;l=e,u=t;break;case 2:l=o[0],u=o[1];break;default:l=o.slice(0,o.length-1).join("@"),u=o[o.length-1]}var n;if(l=l.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(l)&&(l=l.replace(/[-.()]/g,"")),e=`${r.SIP}:${a(l)}@`+u,n=i.parse(e))return n}}},t.headerize=e=>{var t={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"};const n=e.toLowerCase().replace(/_/g,"-").split("-");let r="";var i=n.length;let o;for(o=0;o<i;o++)0!==o&&(r+="-"),r+=n[o].charAt(0).toUpperCase()+n[o].substring(1);return t[r]?t[r]:r},t.sipErrorCause=e=>{for(const t in r.SIP_ERROR_CAUSES)if(-1!==r.SIP_ERROR_CAUSES[t].indexOf(e))return r.causes[t];return r.causes.SIP_FAILURE_CODE},t.getRandomTestNetIP=()=>"192.0.2."+(1,254,Math.floor(254*Math.random()+1)),t.calculateMD5=e=>{function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n=2147483648&e,r=2147483648&t,i=1073741824&e,o=1073741824&t;e=(1073741823&e)+(1073741823&t);return i&o?2147483648^e^n^r:i|o?1073741824&e?3221225472^e^n^r:1073741824^e^n^r:e^n^r}function r(e,r,i,o,l,u,a){return e=n(e,n(n(r&i|~r&o,l),a)),n(t(e,u),r)}function i(e,r,i,o,l,u,a){return e=n(e,n(n(r&o|i&~o,l),a)),n(t(e,u),r)}function o(e,r,i,o,l,u,a){return e=n(e,n(n(r^i^o,l),a)),n(t(e,u),r)}function l(e,r,i,o,l,u,a){return e=n(e,n(n(i^(r|~o),l),a)),n(t(e,u),r)}function u(e){let t,n,r="",i="";for(n=0;n<=3;n++)t=e>>>8*n&255,i="0"+t.toString(16),r+=i.substr(i.length-2,2);return r}let a,s,c,f,d,h,p,v,_;var g=function(e){let t;var n=e.length,r=16*(1+((r=n+8)-r%64)/64);const i=new Array(r-1);let o=0,l=0;for(;l<n;)t=(l-l%4)/4,o=l%4*8,i[t]=i[t]|e.charCodeAt(l)<<o,l++;return t=(l-l%4)/4,o=l%4*8,i[t]=i[t]|128<<o,i[r-2]=n<<3,i[r-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");let t="";for(let r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):t=127<n&&n<2048?(t+=String.fromCharCode(n>>6|192))+String.fromCharCode(63&n|128):(t=(t+=String.fromCharCode(n>>12|224))+String.fromCharCode(n>>6&63|128))+String.fromCharCode(63&n|128)}return t}(e));for(h=1732584193,p=4023233417,v=2562383102,_=271733878,a=0;a<g.length;a+=16)s=h,c=p,f=v,d=_,h=r(h,p,v,_,g[a+0],7,3614090360),_=r(_,h,p,v,g[a+1],12,3905402710),v=r(v,_,h,p,g[a+2],17,606105819),p=r(p,v,_,h,g[a+3],22,3250441966),h=r(h,p,v,_,g[a+4],7,4118548399),_=r(_,h,p,v,g[a+5],12,1200080426),v=r(v,_,h,p,g[a+6],17,2821735955),p=r(p,v,_,h,g[a+7],22,4249261313),h=r(h,p,v,_,g[a+8],7,1770035416),_=r(_,h,p,v,g[a+9],12,2336552879),v=r(v,_,h,p,g[a+10],17,4294925233),p=r(p,v,_,h,g[a+11],22,2304563134),h=r(h,p,v,_,g[a+12],7,1804603682),_=r(_,h,p,v,g[a+13],12,4254626195),v=r(v,_,h,p,g[a+14],17,2792965006),p=r(p,v,_,h,g[a+15],22,1236535329),h=i(h,p,v,_,g[a+1],5,4129170786),_=i(_,h,p,v,g[a+6],9,3225465664),v=i(v,_,h,p,g[a+11],14,643717713),p=i(p,v,_,h,g[a+0],20,3921069994),h=i(h,p,v,_,g[a+5],5,3593408605),_=i(_,h,p,v,g[a+10],9,38016083),v=i(v,_,h,p,g[a+15],14,3634488961),p=i(p,v,_,h,g[a+4],20,3889429448),h=i(h,p,v,_,g[a+9],5,568446438),_=i(_,h,p,v,g[a+14],9,3275163606),v=i(v,_,h,p,g[a+3],14,4107603335),p=i(p,v,_,h,g[a+8],20,1163531501),h=i(h,p,v,_,g[a+13],5,2850285829),_=i(_,h,p,v,g[a+2],9,4243563512),v=i(v,_,h,p,g[a+7],14,1735328473),p=i(p,v,_,h,g[a+12],20,2368359562),h=o(h,p,v,_,g[a+5],4,4294588738),_=o(_,h,p,v,g[a+8],11,2272392833),v=o(v,_,h,p,g[a+11],16,1839030562),p=o(p,v,_,h,g[a+14],23,4259657740),h=o(h,p,v,_,g[a+1],4,2763975236),_=o(_,h,p,v,g[a+4],11,1272893353),v=o(v,_,h,p,g[a+7],16,4139469664),p=o(p,v,_,h,g[a+10],23,3200236656),h=o(h,p,v,_,g[a+13],4,681279174),_=o(_,h,p,v,g[a+0],11,3936430074),v=o(v,_,h,p,g[a+3],16,3572445317),p=o(p,v,_,h,g[a+6],23,76029189),h=o(h,p,v,_,g[a+9],4,3654602809),_=o(_,h,p,v,g[a+12],11,3873151461),v=o(v,_,h,p,g[a+15],16,530742520),p=o(p,v,_,h,g[a+2],23,3299628645),h=l(h,p,v,_,g[a+0],6,4096336452),_=l(_,h,p,v,g[a+7],10,1126891415),v=l(v,_,h,p,g[a+14],15,2878612391),p=l(p,v,_,h,g[a+5],21,4237533241),h=l(h,p,v,_,g[a+12],6,1700485571),_=l(_,h,p,v,g[a+3],10,2399980690),v=l(v,_,h,p,g[a+10],15,4293915773),p=l(p,v,_,h,g[a+1],21,2240044497),h=l(h,p,v,_,g[a+8],6,1873313359),_=l(_,h,p,v,g[a+15],10,4264355552),v=l(v,_,h,p,g[a+6],15,2734768916),p=l(p,v,_,h,g[a+13],21,1309151649),h=l(h,p,v,_,g[a+4],6,4149444226),_=l(_,h,p,v,g[a+11],10,3174756917),v=l(v,_,h,p,g[a+2],15,718787259),p=l(p,v,_,h,g[a+9],21,3951481745),h=n(h,s),p=n(p,c),v=n(v,f),_=n(_,d);return(u(h)+u(p)+u(v)+u(_)).toLowerCase()},t.closeMediaStream=e=>{if(e)try{let t;if(e.getTracks)for(const n of t=e.getTracks())n.stop();else{for(const n of t=e.getAudioTracks())n.stop();for(const n of t=e.getVideoTracks())n.stop()}}catch(t){"function"!=typeof e.stop&&"object"!=typeof e.stop||e.stop()}},t.cloneArray=e=>e&&e.slice()||[],t.cloneObject=(e,t={})=>e&&Object.assign({},e)||t},function(e,t,n){"use strict";const r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(e=>e.trim())},r.splitSections=function(e){return e.split("\nm=").map((e,t)=>(0<t?"m="+e:e).trim()+"\r\n")},r.getDescription=function(e){return(e=r.splitSections(e))&&e[0]},r.getMediaSections=function(e){const t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(e=>0===e.indexOf(t))},r.parseCandidate=function(e){let t;const n={foundation:(t=(0===e.indexOf("a=candidate:")?e.substring(12):e.substring(10)).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":n.relatedAddress=t[e+1];break;case"rport":n.relatedPort=parseInt(t[e+1],10);break;case"tcptype":n.tcpType=t[e+1];break;case"ufrag":n.ufrag=t[e+1],n.usernameFragment=t[e+1];break;default:void 0===n[t[e]]&&(n[t[e]]=t[e+1])}return n},r.writeCandidate=function(e){const t=[];t.push(e.foundation);var n=("rtp"===(n=e.component)?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port),e.type);return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){let t=e.substr(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){const t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:0<t[0].indexOf("/")?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){const t={};let n;const r=e.substr(e.indexOf(" ")+1).split(";");for(let e=0;e<r.length;e++)n=r[e].trim().split("="),t[n[0].trim()]=n[1];return t},r.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach(t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){const t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" ");const n={ssrc:parseInt(e.substr(7,t-7),10)};var r=e.indexOf(":",t);return-1<r?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){const t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(e=>parseInt(e,10))}},r.getMid=function(e){const t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){const t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.parseCryptoLine=function(e){const t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){const n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},r.parseRtpParameters=function(e){const t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]};var n=r.splitLines(e)[0].split(" ");for(let l=3;l<n.length;l++){var i=n[l],o=r.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(o){const n=r.parseRtpMap(o);switch(o=r.matchPrefix(e,"a=fmtp:"+i+" "),n.parameters=o.length?r.parseFmtp(o[0]):{},n.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(r.parseRtcpFb),t.codecs.push(n),n.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(n.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(e=>{t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){let n="",i=(n=(n=(n=(n+="m="+e+" ")+(0<t.codecs.length?"9":"0")+" UDP/TLS/RTP/SAVPF ")+t.codecs.map(e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType).join(" ")+"\r\n")+"c=IN IP4 0.0.0.0\r\na=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(e=>{n=(n=(n+=r.writeRtpMap(e))+r.writeFmtp(e))+r.writeRtcpFb(e)}),0);return t.codecs.forEach(e=>{e.maxptime>i&&(i=e.maxptime)}),0<i&&(n+="a=maxptime:"+i+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach(e=>{n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){const t=[],n=r.parseRtpParameters(e),i=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC");var l=r.matchPrefix(e,"a=ssrc:").map(e=>r.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute);const u=0<l.length&&l[0].ssrc;let a;0<(l=r.matchPrefix(e,"a=ssrc-group:FID").map(e=>e.substr(17).split(" ").map(e=>parseInt(e,10)))).length&&1<l[0].length&&l[0][0]===u&&(a=l[0][1]),n.codecs.forEach(e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let n={ssrc:u,codecPayloadType:parseInt(e.parameters.apt,10)};u&&a&&(n.rtx={ssrc:a}),t.push(n),i&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:u,mechanism:o?"red+ulpfec":"red"},t.push(n))}}),0===t.length&&u&&t.push({ssrc:u});let s=r.matchPrefix(e,"b=");return s.length&&(s=0===s[0].indexOf("b=TIAS:")?parseInt(s[0].substr(7),10):0===s[0].indexOf("b=AS:")?1e3*parseInt(s[0].substr(5),10)*.95-16e3:void 0,t.forEach(e=>{e.maxBitrate=s})),t},r.parseRtcpParameters=function(e){const t={};var n=((n=r.matchPrefix(e,"a=ssrc:").map(e=>r.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute)[0])&&(t.cname=n.value,t.ssrc=n.ssrc),r.matchPrefix(e,"a=rtcp-rsize"));t.reducedSize=0<n.length,t.compound=0===n.length,n=r.matchPrefix(e,"a=rtcp-mux");return t.mux=0<n.length,t},r.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},r.parseMsid=function(e){let t;const n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};const i=r.matchPrefix(e,"a=ssrc:").map(e=>r.parseSsrcMedia(e)).filter(e=>"msid"===e.attribute);return 0<i.length?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t=r.parseMLine(e);const n=r.matchPrefix(e,"a=max-message-size:");let i;0<n.length&&(i=parseInt(n[0].substr(19),10)),isNaN(i)&&(i=65536);const o=r.matchPrefix(e,"a=sctp-port:");if(0<o.length)return{port:parseInt(o[0].substr(12),10),protocol:t.fmt,maxMessageSize:i};const l=r.matchPrefix(e,"a=sctpmap:");return 0<l.length?(t=l[0].substr(10).split(" "),{port:parseInt(t[0],10),protocol:t[1],maxMessageSize:i}):void 0},r.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){let i;return t=void 0!==t?t:2,"v=0\r\no="+(n||"thisisadapterortc")+" "+(i=e||r.generateSessionId())+" "+t+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.getDirection=function(e,t){const n=r.splitLines(e);for(let e=0;e<n.length;e++)switch(n[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[e].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){const t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){return{username:(e=r.matchPrefix(e,"o=")[0].substr(2).split(" "))[0],sessionId:e[1],sessionVersion:parseInt(e[2],10),netType:e[3],addressType:e[4],address:e[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const t=r.splitLines(e);for(let e=0;e<t.length;e++)if(t[e].length<2||"="!==t[e].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){var r=n(11).f,i=n(20),o=n(6)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(26),i=n(6)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=Object(e),i))?t:o?r(e):"Object"==(t=r(e))&&"function"==typeof e.callee?"Arguments":t}},function(e,t,n){function r(e,t,n){var r={},o=l((function(){return!!u[e]()||"â€‹Â…"!="â€‹Â…"[e]()}));t=r[e]=o?t(c):u[e];n&&(r[n]=t),i(i.P+i.F*o,"String",r)}var i=n(0),o=n(30),l=n(3),u=n(88),a=(n="["+u+"]",RegExp("^"+n+n+"*")),s=RegExp(n+n+"*$"),c=r.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(a,"")),2&t?e.replace(s,""):e};e.exports=r},function(e,t){e.exports={}},function(e,t,n){var r=n(24),i=n(2),o="__core-js_shared__",l=i[o]||(i[o]={});(e.exports=function(e,t){return l[e]||(l[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(37)?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(26);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(1);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(1),i=n(15),o=n(6)("species");e.exports=function(e,t){return void 0===(e=r(e).constructor)||null==(e=r(e)[o])?t:i(e)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&function(e,t){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);n=t?(n=c(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this;if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return s(i)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=n(34).EventEmitter,d=n(13),h=n(40),p=n(154),v=new(n=n(14))("JsSIP:NonInviteClientTransaction").debug,_=new n("JsSIP:InviteClientTransaction").debug,g=new n("JsSIP:AckClientTransaction").debug,m=new n("JsSIP:NonInviteServerTransaction").debug,y=new n("JsSIP:InviteServerTransaction").debug,b={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},C=(n=function(){u(t,f);var e=a(t);function t(n,r,o,l){i(this,t),(u=e.call(this)).type=b.NON_INVITE_CLIENT,u.id="z9hG4bK".concat(Math.floor(1e7*Math.random())),u.ua=n,u.transport=r,u.request=o,u.eventHandlers=l;var u;o="SIP/2.0/".concat(r.via_transport);return o+=" ".concat(n.configuration.via_host,";branch=").concat(u.id),u.request.setHeader("via",o),u.ua.newTransaction(s(u)),u}return l(t,[{key:"C",get:function(){return b}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"send",value:function(){var e=this;this.stateChanged(b.STATUS_TRYING),this.F=setTimeout((function(){e.timer_F()}),p.TIMER_F),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){v("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}},{key:"timer_F",value:function(){v("Timer F expired for transaction ".concat(this.id)),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}},{key:"timer_K",value:function(){this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"receiveResponse",value:function(e){var t=this,n=e.status_code;if(n<200)switch(this.state){case b.STATUS_TRYING:case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e)}else switch(this.state){case b.STATUS_TRYING:case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_COMPLETED),clearTimeout(this.F),408===n?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(e),this.K=setTimeout((function(){t.timer_K()}),p.TIMER_K)}}}]),t}(),function(){u(t,f);var e=a(t);function t(n,r,o,l){i(this,t),(u=e.call(this)).type=b.INVITE_CLIENT,u.id="z9hG4bK".concat(Math.floor(1e7*Math.random())),u.ua=n,u.transport=r,u.request=o,u.eventHandlers=l,o.transaction=s(u);var u;l="SIP/2.0/".concat(r.via_transport);return l+=" ".concat(n.configuration.via_host,";branch=").concat(u.id),u.request.setHeader("via",l),u.ua.newTransaction(s(u)),u}return l(t,[{key:"C",get:function(){return b}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"send",value:function(){var e=this;this.stateChanged(b.STATUS_CALLING),this.B=setTimeout((function(){e.timer_B()}),p.TIMER_B),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==b.STATUS_ACCEPTED&&(_("transport error occurred, deleting transaction ".concat(this.id)),this.eventHandlers.onTransportError()),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_M",value:function(){_("Timer M expired for transaction ".concat(this.id)),this.state===b.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"timer_B",value:function(){_("Timer B expired for transaction ".concat(this.id)),this.state===b.STATUS_CALLING&&(this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}},{key:"timer_D",value:function(){_("Timer D expired for transaction ".concat(this.id)),clearTimeout(this.B),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"sendACK",value:function(e){var t=this,n=new h.OutgoingRequest(d.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});n.setHeader("from",this.request.getHeader("from")),n.setHeader("via",this.request.getHeader("via")),n.setHeader("to",e.getHeader("to")),this.D=setTimeout((function(){t.timer_D()}),p.TIMER_D),this.transport.send(n)}},{key:"cancel",value:function(e){var t;this.state===b.STATUS_PROCEEDING&&((t=new h.OutgoingRequest(d.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq})).setHeader("from",this.request.getHeader("from")),t.setHeader("via",this.request.getHeader("via")),t.setHeader("to",this.request.getHeader("to")),e&&t.setHeader("reason",e),this.transport.send(t))}},{key:"receiveResponse",value:function(e){var t=this,n=e.status_code;if(100<=n&&n<=199)switch(this.state){case b.STATUS_CALLING:this.stateChanged(b.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(e);break;case b.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(e)}else if(200<=n&&n<=299)switch(this.state){case b.STATUS_CALLING:case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_ACCEPTED),this.M=setTimeout((function(){t.timer_M()}),p.TIMER_M),this.eventHandlers.onReceiveResponse(e);break;case b.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(e)}else if(300<=n&&n<=699)switch(this.state){case b.STATUS_CALLING:case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_COMPLETED),this.sendACK(e),this.eventHandlers.onReceiveResponse(e);break;case b.STATUS_COMPLETED:this.sendACK(e)}}}]),t}()),S=function(){u(t,f);var e=a(t);function t(n,r,o,l){i(this,t),(u=e.call(this)).id="z9hG4bK".concat(Math.floor(1e7*Math.random())),u.transport=r,u.request=o,u.eventHandlers=l;var u;o="SIP/2.0/".concat(r.via_transport);return o+=" ".concat(n.configuration.via_host,";branch=").concat(u.id),u.request.setHeader("via",o),u}return l(t,[{key:"C",get:function(){return b}},{key:"send",value:function(){this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){g("transport error occurred for transaction ".concat(this.id)),this.eventHandlers.onTransportError()}}]),t}(),T=function(){u(t,f);var e=a(t);function t(n,r,o){var l;return i(this,t),(l=e.call(this)).type=b.NON_INVITE_SERVER,l.id=o.via_branch,l.ua=n,l.transport=r,l.request=o,l.last_response="",o.server_transaction=s(l),l.state=b.STATUS_TRYING,n.newTransaction(s(l)),l}return l(t,[{key:"C",get:function(){return b}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"timer_J",value:function(){m("Timer J expired for transaction ".concat(this.id)),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,m("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.J),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"receiveResponse",value:function(e,t,n,r){var i=this;if(100===e)switch(this.state){case b.STATUS_TRYING:this.stateChanged(b.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case b.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(200<=e&&e<=699)switch(this.state){case b.STATUS_TRYING:case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout((function(){i.timer_J()}),p.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}}}]),t}(),E=function(){u(t,f);var e=a(t);function t(n,r,o){var l;return i(this,t),(l=e.call(this)).type=b.INVITE_SERVER,l.id=o.via_branch,l.ua=n,l.transport=r,l.request=o,l.last_response="",o.server_transaction=s(l),l.state=b.STATUS_PROCEEDING,n.newTransaction(s(l)),l.resendProvisionalTimer=null,o.reply(100),l}return l(t,[{key:"C",get:function(){return b}},{key:"stateChanged",value:function(e){this.state=e,this.emit("stateChanged")}},{key:"timer_H",value:function(){y("Timer H expired for transaction ".concat(this.id)),this.state===b.STATUS_COMPLETED&&y("ACK not received, dialog will be terminated"),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_I",value:function(){this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_L",value:function(){y("Timer L expired for transaction ".concat(this.id)),this.state===b.STATUS_ACCEPTED&&(this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,y("transport error occurred, deleting transaction ".concat(this.id)),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(b.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"resend_provisional",value:function(){this.transport.send(this.last_response)||this.onTransportError()}},{key:"receiveResponse",value:function(e,t,n,r){var i=this;if(100<=e&&e<=199&&this.state===b.STATUS_PROCEEDING&&(this.transport.send(t)||this.onTransportError(),this.last_response=t),100<e&&e<=199&&this.state===b.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval((function(){i.resend_provisional()}),p.PROVISIONAL_RESPONSE_INTERVAL));else if(200<=e&&e<=299)switch(this.state){case b.STATUS_PROCEEDING:this.stateChanged(b.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout((function(){i.timer_L()}),p.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case b.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else 300<=e&&e<=699&&this.state===b.STATUS_PROCEEDING&&(null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(b.STATUS_COMPLETED),this.H=setTimeout((function(){i.timer_H()}),p.TIMER_H),n&&n()):(this.onTransportError(),r&&r()))}}]),t}();e.exports={C:b,NonInviteClientTransaction:n,InviteClientTransaction:C,AckClientTransaction:S,NonInviteServerTransaction:T,InviteServerTransaction:E,checkTransaction:function(e,t){var n,r=e._transactions;switch(t.method){case d.INVITE:if(n=r.ist[t.via_branch])return n.state===b.STATUS_PROCEEDING&&n.transport.send(n.last_response),!0;break;case d.ACK:if(!(n=r.ist[t.via_branch]))return!1;if(n.state===b.STATUS_ACCEPTED)return!1;if(n.state===b.STATUS_COMPLETED)return n.state=b.STATUS_CONFIRMED,n.I=setTimeout((function(){n.timer_I()}),p.TIMER_I),!0;break;case d.CANCEL:return(n=r.ist[t.via_branch])?(t.reply_sl(200),n.state!==b.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:if(n=r.nist[t.via_branch]){switch(n.state){case b.STATUS_TRYING:break;case b.STATUS_PROCEEDING:case b.STATUS_COMPLETED:n.transport.send(n.last_response)}return!0}}}}},function(e,t,n){var r=n(21),i=n(7),o=n(44);e.exports=function(e){return function(t,n,l){var u,a=r(t),s=i(a.length),c=o(l,s);if(e&&n!=n){for(;c<s;)if((u=a[c++])!=u)return!0}else for(;c<s;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(26);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(27),i=n(30);e.exports=function(e){return function(t,n){t=String(i(t)),n=r(n);var o,l=t.length;return n<0||l<=n?e?"":void 0:(o=t.charCodeAt(n))<55296||56319<o||n+1===l||(l=t.charCodeAt(n+1))<56320||57343<l?e?t.charAt(n):o:e?t.slice(n,n+2):l-56320+(o-55296<<10)+65536}}},function(e,t,n){var r=n(4),i=n(26),o=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(6)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],l=o[r]();l.next=function(){return{done:n=!0}},o[r]=function(){return l},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(57),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(n=n.call(e,t)))throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(134);var r,i=n(18),o=n(17),l=n(3),u=n(30),a=n(6),s=n(103),c=a("species"),f=!l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=(r=(n=/(?:)/).exec,n.exec=function(){return r.apply(this,arguments)},2===(n="ab".split(n)).length&&"a"===n[0]&&"b"===n[1]);e.exports=function(e,t,n){var r,h,p=a(e),v=!l((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),_=v?!l((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[p](""),!t})):void 0;v&&_&&("replace"!==e||f)&&("split"!==e||d)||(r=/./[p],n=(_=n(u,p,""[e],(function(e,t,n,i,o){return t.exec===s?v&&!o?{done:!0,value:r.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}})))[0],h=_[1],i(String.prototype,e,n),o(RegExp.prototype,p,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}))}},function(e,t,n){n=n(2).navigator,e.exports=n&&n.userAgent||""},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(18),l=n(50),u=n(38),a=n(49),s=n(48),c=n(4),f=n(3),d=n(71),h=n(56),p=n(89);e.exports=function(e,t,n,v,_,g){function m(e){var t=R[e];o(R,e,"delete"==e||"has"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})}var y,b,C,S,T,E=r[e],A=E,w=_?"set":"add",R=A&&A.prototype,I={};return"function"==typeof A&&(g||R.forEach&&!f((function(){(new A).entries().next()})))?(b=(y=new A)[w](g?{}:-0,1)!=y,C=f((function(){y.has(1)})),S=d((function(e){new A(e)})),T=!g&&f((function(){for(var e=new A,t=5;t--;)e[w](t,t);return!e.has(-0)})),S||(((A=t((function(t,n){return s(t,A,e),t=p(new E,t,A),null!=n&&a(n,_,t[w],t),t}))).prototype=R).constructor=A),(C||T)&&(m("delete"),m("has"),_&&m("get")),(T||b)&&m(w),g&&R.clear&&delete R.clear):(A=v.getConstructor(t,e,_,w),l(A.prototype,n),u.NEED=!0),h(A,e),I[e]=A,i(i.G+i.W+i.F*(A!=E),I),g||v.setStrong(A,e,_),A}},function(e,t,n){for(var r,i=n(2),o=n(17),l=(n=n(42))("typed_array"),u=n("view"),a=n=!(!i.ArrayBuffer||!i.DataView),s=0,c="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");s<9;)(r=i[c[s++]])?(o(r.prototype,l,!0),o(r.prototype,u,!0)):a=!1;e.exports={ABV:n,CONSTR:a,TYPED:l,VIEW:u}},function(e,t,n){"use strict";e.exports=n(37)||!n(3)((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete n(2)[e]}))},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(0),i=n(15),o=n(25),l=n(49);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,u,a=arguments[1];return i(this),(t=void 0!==a)&&i(a),null==e?new this:(n=[],t?(r=0,u=o(a,arguments[2],2),l(e,!1,(function(e){n.push(u(e,r++))}))):l(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(13),o=n(371),l=n(65),u=new(n(14))("JsSIP:RequestSender").debug,a={onRequestTimeout:function(){},onTransportError:function(){},onReceiveResponse:function(){},onAuthenticated:function(){}};e.exports=function(){function e(t,n,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");for(var o in this._ua=t,this._eventHandlers=r,this._method=n.method,this._request=n,this._auth=null,this._challenged=!1,this._staled=!1,a)!Object.prototype.hasOwnProperty.call(a,o)||this._eventHandlers[o]||(this._eventHandlers[o]=a[o]);t.status!==t.C.STATUS_USER_CLOSED||this._method===i.BYE&&this._method===i.ACK||this._eventHandlers.onTransportError()}var t,n;return t=e,(n=[{key:"send",value:function(){var e=this,t={onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onReceiveResponse:function(t){e._receiveResponse(t)}};switch(this._method){case"INVITE":this.clientTransaction=new l.InviteClientTransaction(this._ua,this._ua.transport,this._request,t);break;case"ACK":this.clientTransaction=new l.AckClientTransaction(this._ua,this._ua.transport,this._request,t);break;default:this.clientTransaction=new l.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,t)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}},{key:"_receiveResponse",value:function(e){var t,n=e.status_code;401!==n&&407!==n||null===this._ua.configuration.password&&null===this._ua.configuration.ha1?this._eventHandlers.onReceiveResponse(e):(n=401===e.status_code?(t=e.parseHeader("www-authenticate"),"authorization"):(t=e.parseHeader("proxy-authenticate"),"proxy-authorization"),t?!this._challenged||!this._staled&&!0===t.stale?(this._auth||(this._auth=new o({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),this._auth.authenticate(this._request,t)?(this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),t.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq","".concat(this._request.cseq," ").concat(this._method)),this._request.setHeader(n,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()):this._eventHandlers.onReceiveResponse(e)):this._eventHandlers.onReceiveResponse(e):(u("".concat(e.status_code," with wrong or missing challenge, cannot authenticate")),this._eventHandlers.onReceiveResponse(e)))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(4),i=n(2).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(2),i=n(24),o=n(37),l=n(116),u=n(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=!o&&r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:l.f(e)})}},function(e,t,n){var r=n(60)("keys"),i=n(42);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){n=n(2).document,e.exports=n&&n.documentElement},function(e,t,n){function r(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")}var i=n(4),o=n(1);e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(25)(Function.call,n(22).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return r(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:r}},function(e,t){e.exports="\t\n\v\f\r Â áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},function(e,t,n){var r=n(4),i=n(87).set;e.exports=function(e,t,n){return(t=t.constructor)!==n&&"function"==typeof t&&(t=t.prototype)!==n.prototype&&r(t)&&i&&i(e,t),e}},function(e,t,n){"use strict";var r=n(27),i=n(30);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;0<o;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||22025.465794806718<n(10)||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){"use strict";function r(){return this}var i=n(37),o=n(0),l=n(18),u=n(17),a=n(59),s=n(94),c=n(56),f=n(23),d=n(6)("iterator"),h=!([].keys&&"next"in[].keys()),p="values";e.exports=function(e,t,n,v,_,g,m){function y(e){if(!h&&e in E)return E[e];switch(e){case"keys":case p:return function(){return new n(this,e)}}return function(){return new n(this,e)}}s(n,t,v);v=t+" Iterator";var b,C,S=_==p,T=!1,E=e.prototype,A=E[d]||E["@@iterator"]||_&&E[_],w=A||y(_),R=_?S?y("entries"):w:void 0,I="Array"==t&&E.entries||A;if(I&&(I=f(I.call(new e)))!==Object.prototype&&I.next&&(c(I,v,!0),i||"function"==typeof I[d]||u(I,d,r)),S&&A&&A.name!==p&&(T=!0,w=function(){return A.call(this)}),i&&!m||!h&&!T&&E[d]||u(E,d,w),a[t]=w,a[v]=r,_)if(b={values:S?w:y(p),keys:g?w:y("keys"),entries:R},m)for(C in b)C in E||l(E,C,b[C]);else o(o.P+o.F*(h||T),t,b);return b}},function(e,t,n){"use strict";var r=n(45),i=n(41),o=n(56),l={};n(17)(l,n(6)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(l,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(70),i=n(30);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(59),i=n(6)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(11),i=n(41);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(57),i=n(6)("iterator"),o=n(59);e.exports=n(24).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(251);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(12),i=n(44),o=n(7);e.exports=function(e){for(var t,n=r(this),l=o(n.length),u=i(1<(t=arguments.length)?arguments[1]:void 0,l),a=void 0===(t=2<t?arguments[2]:void 0)?l:i(t,l);u<a;)n[u++]=e;return n}},function(e,t,n){"use strict";var r=n(39),i=n(133),o=n(59),l=n(21);e.exports=n(93)(Array,"Array",(function(e,t){this._t=l(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r,i,o=n(63),l=RegExp.prototype.exec,u=String.prototype.replace,a=(n=l,"lastIndex"),s=(r=/a/,i=/b*/g,l.call(r,"a"),l.call(i,"a"),0!==r[a]||0!==i[a]),c=void 0!==/()??/.exec("")[1];e.exports=n=s||c?function(e){var t,n,r,i;return c&&(n=new RegExp("^"+this.source+"$(?!\\s)",o.call(this))),s&&(t=this[a]),r=l.call(this,e),s&&r&&(this[a]=this.global?r.index+r[0].length:t),c&&r&&1<r.length&&u.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}:n},function(e,t,n){"use strict";var r=n(69)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){function r(){var e,t=+this;g.hasOwnProperty(t)&&(e=g[t],delete g[t],e())}function i(e){r.call(e.data)}var o,l=n(25),u=n(123),a=n(86),s=n(82),c=n(2),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,v=c.Dispatch,_=0,g={},m="onreadystatechange";d&&h||(d=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return g[++_]=function(){u("function"==typeof e?e:Function(e),t)},o(_),_},h=function(e){delete g[e]},"process"==n(26)(f)?o=function(e){f.nextTick(l(r,e,1))}:v&&v.now?o=function(e){v.now(l(r,e,1))}:p?(p=(n=new p).port2,n.port1.onmessage=i,o=l(p.postMessage,p,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(o=function(e){c.postMessage(e+"","*")},c.addEventListener("message",i,!1)):o=m in s("script")?function(e){a.appendChild(s("script"))[m]=function(){a.removeChild(this),r.call(e)}}:function(e){setTimeout(l(r,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){var r=n(2),i=n(105).set,o=r.MutationObserver||r.WebKitMutationObserver,l=r.process,u=r.Promise,a="process"==n(26)(l);e.exports=function(){function e(){var e,r;for(a&&(e=l.domain)&&e.exit();t;){r=t.fn,t=t.next;try{r()}catch(e){throw t?c():n=void 0,e}}n=void 0,e&&e.enter()}var t,n,s,c,f,d;return c=a?function(){l.nextTick(e)}:!o||r.navigator&&r.navigator.standalone?u&&u.resolve?(s=u.resolve(void 0),function(){s.then(e)}):function(){i.call(r,e)}:(f=!0,d=document.createTextNode(""),new o(e).observe(d,{characterData:!0}),function(){d.data=f=!f}),function(e){e={fn:e,next:void 0},n&&(n.next=e),t||(t=e,c()),n=e}}},function(e,t,n){"use strict";var r=n(15);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var r=n(2),i=n(8),o=n(37),l=n(76),u=n(17),a=n(50),s=n(3),c=n(48),f=n(27),d=n(7),h=n(143),p=n(46).f,v=n(11).f,_=n(101),g=(n=n(56),"ArrayBuffer"),m="DataView",y="prototype",b="Wrong index!",C=r[g],S=r[m],T=r.Math,E=r.RangeError,A=r.Infinity,w=C,R=T.abs,I=T.pow,O=T.floor,k=T.log,P=T.LN2,x=(r="byteLength",T="byteOffset",i?"_b":"buffer"),D=i?"_l":r,M=i?"_o":T;function N(e,t,n){var r,i,o,l=new Array(n),u=8*n-t-1,a=(n=(1<<u)-1)>>1,s=23===t?I(2,-24)-I(2,-77):0,c=0,f=e<0||0===e&&1/e<0?1:0;for((e=R(e))!=e||e===A?(i=e!=e?1:0,r=n):(r=O(k(e)/P),e*(o=I(2,-r))<1&&(r--,o*=2),2<=(e+=1<=r+a?s/o:s*I(2,1-a))*o&&(r++,o/=2),n<=r+a?(i=0,r=n):1<=r+a?(i=(e*o-1)*I(2,t),r+=a):(i=e*I(2,a-1)*I(2,t),r=0));8<=t;l[c++]=255&i,i/=256,t-=8);for(r=r<<t|i,u+=t;0<u;l[c++]=255&r,r/=256,u-=8);return l[--c]|=128*f,l}function L(e,t,n){var r,i,o=(1<<(i=8*n-t-1))-1,l=o>>1,u=i-7,a=n-1,s=127&(i=e[a--]);for(i>>=7;0<u;s=256*s+e[a],a--,u-=8);for(r=s&(1<<-u)-1,s>>=-u,u+=t;0<u;r=256*r+e[a],a--,u-=8);if(0===s)s=1-l;else{if(s===o)return r?NaN:i?-A:A;r+=I(2,t),s-=l}return(i?-1:1)*r*I(2,s-t)}function U(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function j(e){return[255&e]}function F(e){return[255&e,e>>8&255]}function q(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function H(e){return N(e,52,8)}function V(e){return N(e,23,4)}function W(e,t,n){v(e[y],t,{get:function(){return this[n]}})}function G(e,t,n,r){if((n=h(+n))+t>e[D])throw E(b);var i=e[x]._b;n+=e[M],e=i.slice(n,n+t);return r?e:e.reverse()}function B(e,t,n,r,i,o){if((n=h(+n))+t>e[D])throw E(b);for(var l=e[x]._b,u=n+e[M],a=r(+i),s=0;s<t;s++)l[u+s]=a[o?s:t-s-1]}if(l.ABV){if(!s((function(){C(1)}))||!s((function(){new C(-1)}))||s((function(){return new C,new C(1.5),new C(NaN),C.name!=g}))){s=(C=function(e){return c(this,C),new w(h(e))})[y]=w[y];for(var z,$=p(w),J=0;$.length>J;)(z=$[J++])in C||u(C,z,w[z]);o||(s.constructor=C)}p=new S(new C(2));var K=S[y].setInt8;p.setInt8(0,2147483648),p.setInt8(1,2147483649),!p.getInt8(0)&&p.getInt8(1)||a(S[y],{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},!0)}else C=function(e){c(this,C,g),e=h(e),this._b=_.call(new Array(e),0),this[D]=e},S=function(e,t,n){c(this,S,m),c(e,C,m);var r=e[D];if((t=f(t))<0||r<t)throw E("Wrong offset!");if(r<t+(n=void 0===n?r-t:d(n)))throw E("Wrong length!");this[x]=e,this[M]=t,this[D]=n},i&&(W(C,r,"_l"),W(S,"buffer","_b"),W(S,r,"_l"),W(S,T,"_o")),a(S[y],{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){return((e=G(this,2,e,arguments[1]))[1]<<8|e[0])<<16>>16},getUint16:function(e){return(e=G(this,2,e,arguments[1]))[1]<<8|e[0]},getInt32:function(e){return U(G(this,4,e,arguments[1]))},getUint32:function(e){return U(G(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return L(G(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return L(G(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){B(this,1,e,j,t)},setUint8:function(e,t){B(this,1,e,j,t)},setInt16:function(e,t){B(this,2,e,F,t,arguments[2])},setUint16:function(e,t){B(this,2,e,F,t,arguments[2])},setInt32:function(e,t){B(this,4,e,q,t,arguments[2])},setUint32:function(e,t){B(this,4,e,q,t,arguments[2])},setFloat32:function(e,t){B(this,4,e,V,t,arguments[2])},setFloat64:function(e,t){B(this,8,e,H,t,arguments[2])}});n(C,g),n(S,m),u(S[y],l.VIEW,!0),t[g]=C,t[m]=S},function(e){e.exports=JSON.parse('{"name":"@cdep/jssip","title":"JsSIP","description":"the Javascript SIP library","version":"3.7.5","homepage":"https://jssip.net","author":"JosÃ© Luis MillÃ¡n <jmillan@aliax.net> (https://github.com/jmillan)","contributors":["IÃ±aki Baz Castillo <ibc@aliax.net> (https://github.com/ibc)"],"types":"lib/JsSIP.d.ts","main":"lib-es5/JsSIP.js","keywords":["sip","websocket","webrtc","node","browser","library"],"license":"MIT","repository":{"type":"git","url":"https://github.com/versatica/JsSIP.git"},"bugs":{"url":"https://github.com/versatica/JsSIP/issues"},"dependencies":{"@types/debug":"^4.1.5","@types/node":"^14.14.34","debug":"^4.3.1","events":"^3.3.0","sdp-transform":"^2.14.1","util":"^0.12.4"},"devDependencies":{"@babel/core":"^7.13.10","@babel/preset-env":"^7.13.10","ansi-colors":"^3.2.4","browserify":"^16.5.1","eslint":"^5.16.0","fancy-log":"^1.3.3","gulp":"^4.0.2","gulp-babel":"^8.0.0","gulp-eslint":"^5.0.0","gulp-expect-file":"^1.0.2","gulp-header":"^2.0.9","gulp-nodeunit-runner":"^0.2.2","gulp-plumber":"^1.2.1","gulp-rename":"^1.4.0","gulp-uglify-es":"^1.0.4","pegjs":"^0.7.0","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},"scripts":{"lint":"gulp lint","test":"gulp test","prepublishOnly":"gulp babel"}}')},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(53),o=n(33);e.exports=function(){function e(t,n,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(!(t&&t instanceof i))throw new TypeError('missing or invalid "uri" parameter');for(var o in this._uri=t,this._parameters={},this.display_name=n,r)Object.prototype.hasOwnProperty.call(r,o)&&this.setParam(o,r[o])}var t,n,l;return t=e,l=[{key:"parse",value:function(e){if(-1!==(e=o.parse(e,"Name_Addr_Header")))return e}}],(n=[{key:"uri",get:function(){return this._uri}},{key:"display_name",get:function(){return this._display_name},set:function(e){this._display_name=0===e?"0":e}},{key:"setParam",value:function(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){var t;if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e))return t=this._parameters[e],delete this._parameters[e],t}},{key:"clearParams",value:function(){this._parameters={}}},{key:"clone",value:function(){return new e(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}},{key:"_quote",value:function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}},{key:"toString",value:function(){var e,t=this._display_name?'"'.concat(this._quote(this._display_name),'" '):"";for(e in t+="<".concat(this._uri.toString(),">"),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(t+=";".concat(e),null!==this._parameters[e]&&(t+="=".concat(this._parameters[e])));return t}}])&&r(t.prototype,n),l&&r(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){(function(r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");let e=0,r=0;t[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(e++,"%c"===t&&(r=e))}),t.splice(r,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(366)(t);e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(152))},function(e,t,n){const r=n(10),i=n(54),o=n(113);e.exports=class e{static parse(e){if(-1!==(e=o.parse(e,"SIP_URI")))return e}constructor(e,t,n,i,o={},l={}){if(!n)throw new TypeError('missing or invalid "host" parameter');this._parameters={},this._headers={},this._scheme=e||r.SIP,this._user=t,this._host=n,this._port=i;for(const e in o)Object.prototype.hasOwnProperty.call(o,e)&&this.setParam(e,o[e]);for(const e in l)Object.prototype.hasOwnProperty.call(l,e)&&this.setHeader(e,l[e])}get scheme(){return this._scheme}set scheme(e){this._scheme=e.toLowerCase()}get user(){return this._user}set user(e){this._user=e}get host(){return this._host}set host(e){this._host=e.toLowerCase()}get port(){return this._port}set port(e){this._port=0===e?e:parseInt(e,10)||null}setParam(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}getParam(e){if(e)return this._parameters[e.toLowerCase()]}hasParam(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}deleteParam(e){var t;if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e))return t=this._parameters[e],delete this._parameters[e],t}clearParams(){this._parameters={}}setHeader(e,t){this._headers[i.headerize(e)]=Array.isArray(t)?t:[t]}getHeader(e){if(e)return this._headers[i.headerize(e)]}hasHeader(e){if(e)return!!this._headers.hasOwnProperty(i.headerize(e))}deleteHeader(e){var t;if(e=i.headerize(e),this._headers.hasOwnProperty(e))return t=this._headers[e],delete this._headers[e],t}clearHeaders(){this._headers={}}clone(){return new e(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}toString(){const e=[];let t=this._scheme+":";this._user&&(t+=i.escapeUser(this._user)+"@"),t+=this._host,!this._port&&0!==this._port||(t+=":"+this._port);for(const e in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(t+=";"+e,null!==this._parameters[e]&&(t+="="+this._parameters[e]));for(const t in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,t))for(const n of this._headers[t])e.push(t+"="+n);return 0<e.length&&(t+="?"+e.join("&")),t}toAor(e){let t=this._scheme+":";return this._user&&(t+=i.escapeUser(this._user)+"@"),t+=this._host,e&&(this._port||0===this._port)&&(t+=":"+this._port),t}}},function(e,t,n){function r(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}e.exports=((e={parse:function(e,t){var i={CRLF:c,DIGIT:f,ALPHA:d,HEXDIG:h,WSP:p,OCTET:v,DQUOTE:_,SP:g,HTAB:m,alphanum:y,reserved:b,unreserved:C,mark:S,escaped:T,LWS:E,SWS:A,HCOLON:w,TEXT_UTF8_TRIM:R,TEXT_UTF8char:I,UTF8_NONASCII:O,UTF8_CONT:k,LHEX:function(){var t;return null===(t=f())&&(/^[a-f]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[a-f]"))),t},token:P,token_nodot:x,separators:function(){var t;return 40===e.charCodeAt(o)?(t="(",o++):(t=null,0===l&&s('"("')),null===t&&(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===l&&s('")"')),null===t&&(60===e.charCodeAt(o)?(t="<",o++):(t=null,0===l&&s('"<"')),null===t&&(62===e.charCodeAt(o)?(t=">",o++):(t=null,0===l&&s('">"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","')),null===t&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(92===e.charCodeAt(o)?(t="\\",o++):(t=null,0===l&&s('"\\\\"')),null===t&&null===(t=_())&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null===t&&(91===e.charCodeAt(o)?(t="[",o++):(t=null,0===l&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===l&&s('"]"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null===t&&(123===e.charCodeAt(o)?(t="{",o++):(t=null,0===l&&s('"{"')),null===t&&(125===e.charCodeAt(o)?(t="}",o++):(t=null,0===l&&s('"}"')),null===t&&null===(t=g())&&(t=m())))))))))))))))),t},word:D,STAR:M,SLASH:N,EQUAL:L,LPAREN:U,RPAREN:j,RAQUOT:F,LAQUOT:q,COMMA:H,SEMI:V,COLON:W,LDQUOT:G,RDQUOT:B,comment:function e(){var t,n,r,i;if(i=o,null!==(t=U())){for(n=[],null===(r=z())&&null===(r=Y())&&(r=e());null!==r;)n.push(r),null===(r=z())&&null===(r=Y())&&(r=e());null!==n&&null!==(r=j())?t=[t,n,r]:(t=null,o=i)}else t=null,o=i;return t},ctext:z,quoted_string:$,quoted_string_clean:J,qdtext:K,quoted_pair:Y,SIP_URI_noparams:X,SIP_URI:Q,uri_scheme:Z,uri_scheme_sips:ee,uri_scheme_sip:te,userinfo:ne,user:re,user_unreserved:ie,password:oe,hostport:le,host:ue,hostname:ae,domainlabel:se,toplabel:ce,IPv6reference:fe,IPv6address:de,h16:he,ls32:pe,IPv4address:ve,dec_octet:_e,port:ge,uri_parameters:me,uri_parameter:ye,transport_param:be,user_param:Ce,method_param:Se,ttl_param:Te,maddr_param:Ee,lr_param:Ae,other_param:we,pname:Re,pvalue:Ie,paramchar:Oe,param_unreserved:ke,headers:Pe,header:xe,hname:De,hvalue:Me,hnv_unreserved:Ne,Request_Response:function(){var e;return null===(e=ft())&&(e=Le()),e},Request_Line:Le,Request_URI:Ue,absoluteURI:je,hier_part:Fe,net_path:qe,abs_path:He,opaque_part:Ve,uric:We,uric_no_slash:Ge,path_segments:Be,segment:ze,param:$e,pchar:Je,scheme:Ke,authority:Ye,srvr:Xe,reg_name:Qe,query:Ze,SIP_Version:et,INVITEm:tt,ACKm:nt,OPTIONSm:rt,BYEm:it,CANCELm:ot,REGISTERm:lt,SUBSCRIBEm:ut,NOTIFYm:at,REFERm:st,Method:ct,Status_Line:ft,Status_Code:dt,extension_code:ht,Reason_Phrase:pt,Allow_Events:function(){var e,t,n,r,i,l;if(i=o,null!==(e=jt())){for(t=[],l=o,null!==(n=H())&&null!==(r=jt())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=jt())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Call_ID:function(){var t,n,r,i,u,a;return u=i=o,null!==(t=D())?(a=o,64===e.charCodeAt(o)?(n="@",o++):(n=null,0===l&&s('"@"')),null!==n&&null!==(r=D())?n=[n,r]:(n=null,o=a),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=u)):(t=null,o=u),null!==t&&(t=void(Wn=e.substring(o,i))),null===t&&(o=i),t},Contact:function(){var e,t,n,r,i,l,u;if(i=o,null===(e=M()))if(l=o,null!==(e=vt())){for(t=[],u=o,null!==(n=H())&&null!==(r=vt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=vt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(){for(var e=Wn.multi_header.length,t=0;t<e;t++)if(null===Wn.multi_header[t].parsed){Wn=null;break}Wn=null!==Wn?Wn.multi_header:-1}()),null===e&&(o=i),e},contact_param:vt,name_addr:_t,display_name:gt,contact_params:mt,c_p_q:yt,c_p_expires:bt,delta_seconds:Ct,qvalue:St,generic_param:Tt,gen_value:Et,Content_Disposition:function(){var e,t,n,r,i,l;if(i=o,null!==(e=At())){for(t=[],l=o,null!==(n=V())&&null!==(r=wt())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=wt())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},disp_type:At,disp_param:wt,handling_param:Rt,Content_Encoding:function(){var e,t,n,r,i,l;if(i=o,null!==(e=P())){for(t=[],l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Content_Length:function(){var e,t,n;if(n=o,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=void(Wn=parseInt(e.join("")))),null===e&&(o=n),e},Content_Type:function(){var t,n;return n=o,null!==(t=It())&&(t=void(Wn=e.substring(o,n))),null===t&&(o=n),t},media_type:It,m_type:Ot,discrete_type:kt,composite_type:Pt,extension_token:xt,x_token:Dt,m_subtype:Mt,m_parameter:Nt,m_value:Lt,CSeq:function(){var e,t,n,r;return r=o,null!==(e=Ut())&&null!==(t=E())&&null!==(n=ct())?e=[e,t,n]:(e=null,o=r),e},CSeq_value:Ut,Expires:function(){var e,t;return t=o,null!==(e=Ct())&&(e=void(Wn=e)),null===e&&(o=t),e},Event:function(){var e,t,n,r,i,l,u;if(l=i=o,null!==(e=jt())){for(t=[],u=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(e){Wn.event=e.join("").toLowerCase()}(e[0])),null===e&&(o=i),e},event_type:jt,From:function(){var e,t,n,r,i,l,u;if(l=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],u=o,null!==(n=V())&&null!==(r=Ft())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=Ft())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(){var e=Wn.tag;try{Wn=new Vn(Wn.uri,Wn.display_name,Wn.params),e&&Wn.setParam("tag",e)}catch(e){Wn=-1}}()),null===e&&(o=i),e},from_param:Ft,tag_param:qt,Max_Forwards:function(){var e,t,n;if(n=o,null!==(t=f()))for(e=[];null!==t;)e.push(t),t=f();else e=null;return null!==e&&(e=void(Wn=parseInt(e.join("")))),null===e&&(o=n),e},Min_Expires:function(){var e,t;return t=o,null!==(e=Ct())&&(e=void(Wn=e)),null===e&&(o=t),e},Name_Addr_Header:function(){var e,t,n,r,i,l,u,a,s,c;for(s=a=o,e=[],t=gt();null!==t;)e.push(t),t=gt();if(null!==e)if(null!==(t=q()))if(null!==(n=Q()))if(null!==(r=F())){for(i=[],c=o,null!==(l=V())&&null!==(u=Tt())?l=[l,u]:(l=null,o=c);null!==l;)i.push(l),c=o,null!==(l=V())&&null!==(u=Tt())?l=[l,u]:(l=null,o=c);null!==i?e=[e,t,n,r,i]:(e=null,o=s)}else e=null,o=s;else e=null,o=s;else e=null,o=s;else e=null,o=s;return null!==e&&(e=function(){try{Wn=new Vn(Wn.uri,Wn.display_name,Wn.params)}catch(e){Wn=-1}}()),null===e&&(o=a),e},Proxy_Authenticate:function(){return Ht()},challenge:Ht,other_challenge:Vt,auth_param:Wt,digest_cln:Gt,realm:Bt,realm_value:zt,domain:$t,URI:Jt,nonce:Kt,nonce_value:Yt,opaque:Xt,stale:Qt,algorithm:Zt,qop_options:en,qop_value:tn,Proxy_Require:function(){var e,t,n,r,i,l;if(i=o,null!==(e=P())){for(t=[],l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Record_Route:function(){var e,t,n,r,i,l,u;if(l=i=o,null!==(e=nn())){for(t=[],u=o,null!==(n=H())&&null!==(r=nn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=H())&&null!==(r=nn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(){for(var e=Wn.multi_header.length,t=0;t<e;t++)if(null===Wn.multi_header[t].parsed){Wn=null;break}Wn=null!==Wn?Wn.multi_header:-1}()),null===e&&(o=i),e},rec_route:nn,Reason:function(){var t,n,r,i,u,a,c;if(a=u=o,"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"SIP"')),null===t&&(t=P()),null!==t){for(n=[],c=o,null!==(r=V())&&null!==(i=rn())?r=[r,i]:(r=null,o=c);null!==r;)n.push(r),c=o,null!==(r=V())&&null!==(i=rn())?r=[r,i]:(r=null,o=c);null!==n?t=[t,n]:(t=null,o=a)}else t=null,o=a;return null!==t&&(t=function(e){Wn.protocol=e.toLowerCase(),Wn.params||(Wn.params={}),Wn.params.text&&'"'===Wn.params.text[0]&&(e=Wn.params.text,Wn.text=e.substring(1,e.length-1),delete Wn.params.text)}(t[0])),null===t&&(o=u),t},reason_param:rn,reason_cause:on,Require:function(){var e,t,n,r,i,l;if(i=o,null!==(e=P())){for(t=[],l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},Route:function(){var e,t,n,r,i,l;if(i=o,null!==(e=ln())){for(t=[],l=o,null!==(n=H())&&null!==(r=ln())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=ln())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},route_param:ln,Subscription_State:function(){var e,t,n,r,i,l;if(i=o,null!==(e=un())){for(t=[],l=o,null!==(n=V())&&null!==(r=an())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=an())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},substate_value:un,subexp_params:an,event_reason_value:sn,Subject:function(){var e;return null!==(e=R())?e:""},Supported:function(){var e,t,n,r,i,l;if(i=o,null!==(e=P())){for(t=[],l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=P())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return null!==e?e:""},To:function(){var e,t,n,r,i,l,u;if(l=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],u=o,null!==(n=V())&&null!==(r=cn())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=cn())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(){var e=Wn.tag;try{Wn=new Vn(Wn.uri,Wn.display_name,Wn.params),e&&Wn.setParam("tag",e)}catch(e){Wn=-1}}()),null===e&&(o=i),e},to_param:cn,Via:function(){var e,t,n,r,i,l;if(i=o,null!==(e=fn())){for(t=[],l=o,null!==(n=H())&&null!==(r=fn())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=H())&&null!==(r=fn())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},via_param:fn,via_params:dn,via_ttl:hn,via_maddr:pn,via_received:vn,via_branch:_n,response_port:gn,rport:mn,sent_protocol:yn,protocol_name:bn,transport:Cn,sent_by:Sn,via_host:Tn,via_port:En,ttl:An,WWW_Authenticate:function(){return Ht()},Session_Expires:function(){var e,t,n,r,i,l;if(i=o,null!==(e=wn())){for(t=[],l=o,null!==(n=V())&&null!==(r=Rn())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=Rn())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},s_e_expires:wn,s_e_params:Rn,s_e_refresher:In,extension_header:function(){var e,t,n,r;return r=o,null!==(e=P())&&null!==(t=w())&&null!==(n=On())?e=[e,t,n]:(e=null,o=r),e},header_value:On,message_body:function(){var e,t;for(e=[],t=v();null!==t;)e.push(t),t=v();return e},uuid_URI:function(){var t,n,r;return r=o,"uuid:"===e.substr(o,5)?(t="uuid:",o+=5):(t=null,0===l&&s('"uuid:"')),null!==t&&null!==(n=kn())?t=[t,n]:(t=null,o=r),t},uuid:kn,hex4:Pn,hex8:xn,hex12:Dn,Refer_To:function(){var e,t,n,r,i,l,u;if(l=i=o,null===(e=X())&&(e=_t()),null!==e){for(t=[],u=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=V())&&null!==(r=Tt())?n=[n,r]:(n=null,o=u);null!==t?e=[e,t]:(e=null,o=l)}else e=null,o=l;return null!==e&&(e=function(){try{Wn=new Vn(Wn.uri,Wn.display_name,Wn.params)}catch(e){Wn=-1}}()),null===e&&(o=i),e},Replaces:function(){var e,t,n,r,i,l;if(i=o,null!==(e=Mn())){for(t=[],l=o,null!==(n=V())&&null!==(r=Nn())?n=[n,r]:(n=null,o=l);null!==n;)t.push(n),l=o,null!==(n=V())&&null!==(r=Nn())?n=[n,r]:(n=null,o=l);null!==t?e=[e,t]:(e=null,o=i)}else e=null,o=i;return e},call_id:Mn,replaces_param:Nn,to_tag:Ln,from_tag:Un,early_flag:jn};if(void 0!==t){if(void 0===i[t])throw new Error("Invalid rule name: "+r(t)+".")}else t="CRLF";var o=0,l=0,u=0,a=[];function s(e){o<u||(u<o&&(u=o,a=[]),a.push(e))}function c(){var t;return"\r\n"===e.substr(o,2)?(t="\r\n",o+=2):(t=null,0===l&&s('"\\r\\n"')),t}function f(){var t;return/^[0-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[0-9]")),t}function d(){var t;return/^[a-zA-Z]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[a-zA-Z]")),t}function h(){var t;return/^[0-9a-fA-F]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[0-9a-fA-F]")),t}function p(){var e=g();return null===e?m():e}function v(){var t;return/^[\0-\xFF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[\\0-\\xFF]")),t}function _(){var t;return/^["]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s('["]')),t}function g(){var t;return 32===e.charCodeAt(o)?(t=" ",o++):(t=null,0===l&&s('" "')),t}function m(){var t;return 9===e.charCodeAt(o)?(t="\t",o++):(t=null,0===l&&s('"\\t"')),t}function y(){var t;return/^[a-zA-Z0-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[a-zA-Z0-9]")),t}function b(){var t;return 59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===l&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","'))))))))))),t}function C(){var e=y();return null===e?S():e}function S(){var t;return 45===e.charCodeAt(o)?(t="-",o++):(t=null,0===l&&s('"-"')),null===t&&(95===e.charCodeAt(o)?(t="_",o++):(t=null,0===l&&s('"_"')),null===t&&(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===l&&s('"."')),null===t&&(33===e.charCodeAt(o)?(t="!",o++):(t=null,0===l&&s('"!"')),null===t&&(126===e.charCodeAt(o)?(t="~",o++):(t=null,0===l&&s('"~"')),null===t&&(42===e.charCodeAt(o)?(t="*",o++):(t=null,0===l&&s('"*"')),null===t&&(39===e.charCodeAt(o)?(t="'",o++):(t=null,0===l&&s('"\'"')),null===t&&(40===e.charCodeAt(o)?(t="(",o++):(t=null,0===l&&s('"("')),null===t&&(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===l&&s('")"')))))))))),t}function T(){var t,n,r,i=o,u=o;return 37===e.charCodeAt(o)?(t="%",o++):(t=null,0===l&&s('"%"')),null!==t&&null!==(n=h())&&null!==(r=h())?t=[t,n,r]:(t=null,o=u),null===(t=null!==t?t.join(""):t)&&(o=i),t}function E(){for(var e,t=o,n=o,r=o,i=[],l=p();null!==l;)i.push(l),l=p();if(null!==i&&null!==(l=c())?i=[i,l]:(i=null,o=r),null!==(i=null!==i?i:"")){if(null!==(e=p()))for(l=[];null!==e;)l.push(e),e=p();else l=null;null!==l?i=[i,l]:(i=null,o=n)}else i=null,o=n;return null===(i=null!==i?" ":i)&&(o=t),i}function A(){var e=E();return null!==e?e:""}function w(){var t,n=o,r=o,i=[],u=g();for(null===u&&(u=m());null!==u;)i.push(u),null===(u=g())&&(u=m());return null!==i?(58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(t=A())?i=[i,u,t]:(i=null,o=r)):(i=null,o=r),null===(i=null!==i?":":i)&&(o=n),i}function R(){var t,n,r,i,l=o,u=o,a=I();if(null!==a)for(t=[];null!==a;)t.push(a),a=I();else t=null;if(null!==t){for(a=[],i=o,n=[],r=E();null!==r;)n.push(r),r=E();for(null!==n&&null!==(r=I())?n=[n,r]:(n=null,o=i);null!==n;){for(a.push(n),i=o,n=[],r=E();null!==r;)n.push(r),r=E();null!==n&&null!==(r=I())?n=[n,r]:(n=null,o=i)}null!==a?t=[t,a]:(t=null,o=u)}else t=null,o=u;return null===(t=null!==t?e.substring(o,l):t)&&(o=l),t}function I(){var t;return/^[!-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[!-~]")),null===t?O():t}function O(){var t;return/^[\x80-\uFFFF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[\\x80-\\uFFFF]")),t}function k(){var t;return/^[\x80-\xBF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[\\x80-\\xBF]")),t}function P(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===l&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"')))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===l&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"'))))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function x(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"'))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"')))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function D(){var t,n=o,r=y();if(null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===l&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"')),null===r&&(40===e.charCodeAt(o)?(r="(",o++):(r=null,0===l&&s('"("')),null===r&&(41===e.charCodeAt(o)?(r=")",o++):(r=null,0===l&&s('")"')),null===r&&(60===e.charCodeAt(o)?(r="<",o++):(r=null,0===l&&s('"<"')),null===r&&(62===e.charCodeAt(o)?(r=">",o++):(r=null,0===l&&s('">"')),null===r&&(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null===r&&(92===e.charCodeAt(o)?(r="\\",o++):(r=null,0===l&&s('"\\\\"')),null===r&&null===(r=_())&&(47===e.charCodeAt(o)?(r="/",o++):(r=null,0===l&&s('"/"')),null===r&&(91===e.charCodeAt(o)?(r="[",o++):(r=null,0===l&&s('"["')),null===r&&(93===e.charCodeAt(o)?(r="]",o++):(r=null,0===l&&s('"]"')),null===r&&(63===e.charCodeAt(o)?(r="?",o++):(r=null,0===l&&s('"?"')),null===r&&(123===e.charCodeAt(o)?(r="{",o++):(r=null,0===l&&s('"{"')),null===r&&(125===e.charCodeAt(o)?(r="}",o++):(r=null,0===l&&s('"}"')))))))))))))))))))))))),null!==r)for(t=[];null!==r;)t.push(r),null===(r=y())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,0===l&&s('"."')),null===r&&(33===e.charCodeAt(o)?(r="!",o++):(r=null,0===l&&s('"!"')),null===r&&(37===e.charCodeAt(o)?(r="%",o++):(r=null,0===l&&s('"%"')),null===r&&(42===e.charCodeAt(o)?(r="*",o++):(r=null,0===l&&s('"*"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,0===l&&s('"_"')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(96===e.charCodeAt(o)?(r="`",o++):(r=null,0===l&&s('"`"')),null===r&&(39===e.charCodeAt(o)?(r="'",o++):(r=null,0===l&&s('"\'"')),null===r&&(126===e.charCodeAt(o)?(r="~",o++):(r=null,0===l&&s('"~"')),null===r&&(40===e.charCodeAt(o)?(r="(",o++):(r=null,0===l&&s('"("')),null===r&&(41===e.charCodeAt(o)?(r=")",o++):(r=null,0===l&&s('")"')),null===r&&(60===e.charCodeAt(o)?(r="<",o++):(r=null,0===l&&s('"<"')),null===r&&(62===e.charCodeAt(o)?(r=">",o++):(r=null,0===l&&s('">"')),null===r&&(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null===r&&(92===e.charCodeAt(o)?(r="\\",o++):(r=null,0===l&&s('"\\\\"')),null===r&&null===(r=_())&&(47===e.charCodeAt(o)?(r="/",o++):(r=null,0===l&&s('"/"')),null===r&&(91===e.charCodeAt(o)?(r="[",o++):(r=null,0===l&&s('"["')),null===r&&(93===e.charCodeAt(o)?(r="]",o++):(r=null,0===l&&s('"]"')),null===r&&(63===e.charCodeAt(o)?(r="?",o++):(r=null,0===l&&s('"?"')),null===r&&(123===e.charCodeAt(o)?(r="{",o++):(r=null,0===l&&s('"{"')),null===r&&(125===e.charCodeAt(o)?(r="}",o++):(r=null,0===l&&s('"}"'))))))))))))))))))))))));else t=null;return null===(t=null!==t?e.substring(o,n):t)&&(o=n),t}function M(){var t,n,r=o,i=o,u=A();return null!==u?(42===e.charCodeAt(o)?(t="*",o++):(t=null,0===l&&s('"*"')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?"*":u)&&(o=r),u}function N(){var t,n,r=o,i=o,u=A();return null!==u?(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?"/":u)&&(o=r),u}function L(){var t,n,r=o,i=o,u=A();return null!==u?(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?"=":u)&&(o=r),u}function U(){var t,n,r=o,i=o,u=A();return null!==u?(40===e.charCodeAt(o)?(t="(",o++):(t=null,0===l&&s('"("')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?"(":u)&&(o=r),u}function j(){var t,n,r=o,i=o,u=A();return null!==u?(41===e.charCodeAt(o)?(t=")",o++):(t=null,0===l&&s('")"')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?")":u)&&(o=r),u}function F(){var t,n,r=o,i=o;return 62===e.charCodeAt(o)?(t=">",o++):(t=null,0===l&&s('">"')),null!==t&&null!==(n=A())?t=[t,n]:(t=null,o=i),null===(t=null!==t?">":t)&&(o=r),t}function q(){var t,n=o,r=o,i=A();return null!==i?(60===e.charCodeAt(o)?(t="<",o++):(t=null,0===l&&s('"<"')),null!==t?i=[i,t]:(i=null,o=r)):(i=null,o=r),null===(i=null!==i?"<":i)&&(o=n),i}function H(){var t,n,r=o,i=o,u=A();return null!==u?(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?",":u)&&(o=r),u}function V(){var t,n,r=o,i=o,u=A();return null!==u?(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?";":u)&&(o=r),u}function W(){var t,n,r=o,i=o,u=A();return null!==u?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=A())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null===(u=null!==u?":":u)&&(o=r),u}function G(){var e,t=o,n=o,r=A();return null!==r&&null!==(e=_())?r=[r,e]:(r=null,o=n),null===(r=null!==r?'"':r)&&(o=t),r}function B(){var e,t=o,n=o,r=_();return null!==r&&null!==(e=A())?r=[r,e]:(r=null,o=n),null===(r=null!==r?'"':r)&&(o=t),r}function z(){var t;return/^[!-']/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[!-']")),null===t&&(/^[*-[]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[*-[]")),null===t&&(/^[\]-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[\\]-~]")),null===t&&null===(t=O())&&(t=E()))),t}function $(){var t,n,r,i=o,l=o,u=A();if(null!==u)if(null!==(t=_())){for(n=[],null===(r=K())&&(r=Y());null!==r;)n.push(r),null===(r=K())&&(r=Y());null!==n&&null!==(r=_())?u=[u,t,n,r]:(u=null,o=l)}else u=null,o=l;else u=null,o=l;return null===(u=null!==u?e.substring(o,i):u)&&(o=i),u}function J(){var t,n,r,i=o,l=o,u=A();if(null!==u)if(null!==(r=_())){for(t=[],null===(n=K())&&(n=Y());null!==n;)t.push(n),null===(n=K())&&(n=Y());null!==t&&null!==(n=_())?u=[u,r,t,n]:(u=null,o=l)}else u=null,o=l;else u=null,o=l;return null===(u=null!==u?(r=e.substring(o,i).trim()).substring(1,r.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1"):u)&&(o=i),u}function K(){var t=E();return null===t&&(33===e.charCodeAt(o)?(t="!",o++):(t=null,0===l&&s('"!"')),null===t&&(/^[#-[]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[#-[]")),null===t&&(/^[\]-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[\\]-~]")),null===t&&(t=O())))),t}function Y(){var t,n,r=o;return 92===e.charCodeAt(o)?(t="\\",o++):(t=null,0===l&&s('"\\\\"')),null!==t?(/^[\0-\t]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===l&&s("[\\0-\\t]")),null===n&&(/^[\x0B-\f]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===l&&s("[\\x0B-\\f]")),null===n&&(/^[\x0E-]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===l&&s("[\\x0E-]")))),null!==n?t=[t,n]:(t=null,o=r)):(t=null,o=r),t}function X(){var t,n,r,i=o,u=o,a=Z();return null!==a?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=null!==(n=ne())?n:"")&&null!==(r=le())?a=[a,t,n,r]:(a=null,o=u)):(a=null,o=u),null===(a=null!==a?function(){try{Wn.uri=new Hn(Wn.scheme,Wn.user,Wn.host,Wn.port),delete Wn.scheme,delete Wn.user,delete Wn.host,delete Wn.host_type,delete Wn.port}catch(e){Wn=-1}}():a)&&(o=i),a}function Q(){var n,r,i,u,a,c=o,f=o,d=Z();return null!==d?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=null!==(r=ne())?r:"")&&null!==(i=le())&&null!==(u=me())&&null!==(a=null!==(a=Pe())?a:"")?d=[d,n,r,i,u,a]:(d=null,o=f)):(d=null,o=f),null===(d=null!==d?function(){try{Wn.uri=new Hn(Wn.scheme,Wn.user,Wn.host,Wn.port,Wn.uri_params,Wn.uri_headers),delete Wn.scheme,delete Wn.user,delete Wn.host,delete Wn.host_type,delete Wn.port,delete Wn.uri_params,"SIP_URI"===t&&(Wn=Wn.uri)}catch(e){Wn=-1}}():d)&&(o=c),d}function Z(){var e=ee();return null===e?te():e}function ee(){var t,n,r=o;return"sips"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"sips"')),null!==t&&(n=t,t=void(Wn.scheme=n.toLowerCase())),null===t&&(o=r),t}function te(){var t,n,r=o;return"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"sip"')),null!==t&&(n=t,t=void(Wn.scheme=n.toLowerCase())),null===t&&(o=r),t}function ne(){var t,n,r,i=o,u=o,a=re();return null!==a?(r=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=oe())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===l&&s('"@"')),null!==n?a=[a,t,n]:(a=null,o=u)):(a=null,o=u)):(a=null,o=u),null===(a=null!==a?void(Wn.user=decodeURIComponent(e.substring(o-1,i))):a)&&(o=i),a}function re(){var e,t=C();if(null!==(t=null===t&&null===(t=T())?ie():t))for(e=[];null!==t;)e.push(t),null===(t=C())&&null===(t=T())&&(t=ie());else e=null;return e}function ie(){var t;return 38===e.charCodeAt(o)?(t="&",o++):(t=null,0===l&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","')),null===t&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"'))))))))),t}function oe(){var t=o,n=[],r=C();for(null===r&&null===(r=T())&&(38===e.charCodeAt(o)?(r="&",o++):(r=null,0===l&&s('"&"')),null===r&&(61===e.charCodeAt(o)?(r="=",o++):(r=null,0===l&&s('"="')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(36===e.charCodeAt(o)?(r="$",o++):(r=null,0===l&&s('"$"')),null===r&&(44===e.charCodeAt(o)?(r=",",o++):(r=null,0===l&&s('","')))))));null!==r;)n.push(r),null===(r=C())&&null===(r=T())&&(38===e.charCodeAt(o)?(r="&",o++):(r=null,0===l&&s('"&"')),null===r&&(61===e.charCodeAt(o)?(r="=",o++):(r=null,0===l&&s('"="')),null===r&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,0===l&&s('"+"')),null===r&&(36===e.charCodeAt(o)?(r="$",o++):(r=null,0===l&&s('"$"')),null===r&&(44===e.charCodeAt(o)?(r=",",o++):(r=null,0===l&&s('","')))))));return null===(n=null!==n?void(Wn.password=e.substring(o,t)):n)&&(o=t),n}function le(){var t,n,r,i=o,u=ue();return null!==u?(r=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=ge())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?u=[u,t]:(u=null,o=i)):(u=null,o=i),u}function ue(){var t=o,n=ae();return null!==(n=null===n&&null===(n=ve())?fe():n)&&(Wn.host=e.substring(o,t).toLowerCase(),n=Wn.host),null===n&&(o=t),n}function ae(){var t,n=o,r=o,i=[],u=o,a=se();for(null!==a?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===l&&s('"."')),null!==t?a=[a,t]:(a=null,o=u)):(a=null,o=u);null!==a;)i.push(a),u=o,null!==(a=se())?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===l&&s('"."')),null!==t?a=[a,t]:(a=null,o=u)):(a=null,o=u);return null!==i&&null!==(a=ce())?(46===e.charCodeAt(o)?(t=".",o++):(t=null,0===l&&s('"."')),null!==(t=null!==t?t:"")?i=[i,a,t]:(i=null,o=r)):(i=null,o=r),null!==i&&(r=n,Wn.host_type="domain",i=e.substring(o,r)),null===i&&(o=n),i}function se(){var t,n,r=o,i=y();if(null!==i){for(t=[],null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===l&&s('"_"'))));null!==n;)t.push(n),null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===l&&s('"_"'))));null!==t?i=[i,t]:(i=null,o=r)}else i=null,o=r;return i}function ce(){var t,n,r=o,i=d();if(null!==i){for(t=[],null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===l&&s('"_"'))));null!==n;)t.push(n),null===(n=y())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,0===l&&s('"_"'))));null!==t?i=[i,t]:(i=null,o=r)}else i=null,o=r;return i}function fe(){var t,n,r,i=o,u=o;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===l&&s('"["')),null!==t&&null!==(r=de())?(93===e.charCodeAt(o)?(n="]",o++):(n=null,0===l&&s('"]"')),null!==n?t=[t,r,n]:(t=null,o=u)):(t=null,o=u),null!==t&&(r=i,Wn.host_type="IPv6",t=e.substring(o,r)),null===t&&(o=i),t}function de(){var t,n,r,i,u,a,c,f,d,h,p,v,_,g=o,m=o,y=he();return null!==y?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===l&&s('":"')),null!==c&&null!==(f=he())?(58===e.charCodeAt(o)?(d=":",o++):(d=null,0===l&&s('":"')),null!==d&&null!==(h=he())?(58===e.charCodeAt(o)?(p=":",o++):(p=null,0===l&&s('":"')),null!==p&&null!==(_=pe())?y=[y,t,n,r,i,u,a,c,f,d,h,p,_]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===l&&s('":"')),null!==f&&null!==(d=he())?(58===e.charCodeAt(o)?(h=":",o++):(h=null,0===l&&s('":"')),null!==h&&null!==(p=pe())?y=[y,t,n,r,i,u,a,c,f,d,h,p]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===l&&s('":"')),null!==f&&null!==(d=pe())?y=[y,t,n,r,i,u,a,c,f,d]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=pe())?y=[y,t,n,r,i,u,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=pe())?y=[y,t,n,r,i,u]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=pe())?y=[y,t,n,r]:(y=null,o=m)):(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=pe())?y=[y,t]:(y=null,o=m),null===y&&(m=o,"::"===e.substr(o,2)?(y="::",o+=2):(y=null,0===l&&s('"::"')),null!==y&&null!==(t=he())?y=[y,t]:(y=null,o=m),null===y&&(m=o,null!==(y=he())?("::"===e.substr(o,2)?(t="::",o+=2):(t=null,0===l&&s('"::"')),null!==t&&null!==(n=he())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===l&&s('":"')),null!==c&&null!==(f=he())?(58===e.charCodeAt(o)?(d=":",o++):(d=null,0===l&&s('":"')),null!==d&&null!==(h=pe())?y=[y,t,n,r,i,u,a,c,f,d,h]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?("::"===e.substr(o,2)?(n="::",o+=2):(n=null,0===l&&s('"::"')),null!==n&&null!==(r=he())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=he())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,0===l&&s('":"')),null!==f&&null!==(d=pe())?y=[y,t,n,r,i,u,a,c,f,d]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?(v=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=v),null!==(n=null!==n?n:"")?("::"===e.substr(o,2)?(r="::",o+=2):(r=null,0===l&&s('"::"')),null!==r&&null!==(i=he())?(58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(a=he())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,0===l&&s('":"')),null!==c&&null!==(f=pe())?y=[y,t,n,r,i,u,a,c,f]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?(v=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=v),null!==(n=null!==n?n:"")?(v=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=v),null!==(r=null!==r?r:"")?("::"===e.substr(o,2)?(i="::",o+=2):(i=null,0===l&&s('"::"')),null!==i&&null!==(u=he())?(58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=pe())?y=[y,t,n,r,i,u,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?(v=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=v),null!==(n=null!==n?n:"")?(v=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=v),null!==(r=null!==r?r:"")?(v=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?i=[i,u]:(i=null,o=v),null!==(i=null!==i?i:"")?("::"===e.substr(o,2)?(u="::",o+=2):(u=null,0===l&&s('"::"')),null!==u&&null!==(a=pe())?y=[y,t,n,r,i,u,a]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?(v=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=v),null!==(n=null!==n?n:"")?(v=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=v),null!==(r=null!==r?r:"")?(v=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?i=[i,u]:(i=null,o=v),null!==(i=null!==i?i:"")?(v=o,58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(a=he())?u=[u,a]:(u=null,o=v),null!==(u=null!==u?u:"")?("::"===e.substr(o,2)?(a="::",o+=2):(a=null,0===l&&s('"::"')),null!==a&&null!==(c=he())?y=[y,t,n,r,i,u,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m),null===y&&(m=o,null!==(y=he())?(v=o,58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?t=[t,n]:(t=null,o=v),null!==(t=null!==t?t:"")?(v=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null!==n&&null!==(r=he())?n=[n,r]:(n=null,o=v),null!==(n=null!==n?n:"")?(v=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,0===l&&s('":"')),null!==r&&null!==(i=he())?r=[r,i]:(r=null,o=v),null!==(r=null!==r?r:"")?(v=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,0===l&&s('":"')),null!==i&&null!==(u=he())?i=[i,u]:(i=null,o=v),null!==(i=null!==i?i:"")?(v=o,58===e.charCodeAt(o)?(u=":",o++):(u=null,0===l&&s('":"')),null!==u&&null!==(a=he())?u=[u,a]:(u=null,o=v),null!==(u=null!==u?u:"")?(v=o,58===e.charCodeAt(o)?(a=":",o++):(a=null,0===l&&s('":"')),null!==a&&null!==(c=he())?a=[a,c]:(a=null,o=v),null!==(a=null!==a?a:"")?("::"===e.substr(o,2)?(c="::",o+=2):(c=null,0===l&&s('"::"')),null!==c?y=[y,t,n,r,i,u,a,c]:(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m)):(y=null,o=m))))))))))))))),null!==y&&(_=g,Wn.host_type="IPv6",y=e.substring(o,_)),null===y&&(o=g),y}function he(){var e,t,n,r=o,i=h();return null!==i&&null!==(e=null!==(e=h())?e:"")&&null!==(t=null!==(t=h())?t:"")&&null!==(n=null!==(n=h())?n:"")?i=[i,e,t,n]:(i=null,o=r),i}function pe(){var t,n,r=o,i=he();return null!==i?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=he())?i=[i,t,n]:(i=null,o=r)):(i=null,o=r),null===i?ve():i}function ve(){var t,n,r,i,u,a,c=o,f=o,d=_e();return null!==d?(46===e.charCodeAt(o)?(a=".",o++):(a=null,0===l&&s('"."')),null!==a&&null!==(t=_e())?(46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')),null!==n&&null!==(r=_e())?(46===e.charCodeAt(o)?(i=".",o++):(i=null,0===l&&s('"."')),null!==i&&null!==(u=_e())?d=[d,a,t,n,r,i,u]:(d=null,o=f)):(d=null,o=f)):(d=null,o=f)):(d=null,o=f),null!==d&&(a=c,Wn.host_type="IPv4",d=e.substring(o,a)),null===d&&(o=c),d}function _e(){var t,n,r,i=o;return"25"===e.substr(o,2)?(t="25",o+=2):(t=null,0===l&&s('"25"')),null!==t?(/^[0-5]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===l&&s("[0-5]")),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null===t&&(i=o,50===e.charCodeAt(o)?(t="2",o++):(t=null,0===l&&s('"2"')),null!==t?(/^[0-4]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,0===l&&s("[0-4]")),null!==n&&null!==(r=f())?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),null===t&&(i=o,49===e.charCodeAt(o)?(t="1",o++):(t=null,0===l&&s('"1"')),null!==t&&null!==(n=f())&&null!==(r=f())?t=[t,n,r]:(t=null,o=i),null===t&&(i=o,/^[1-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,0===l&&s("[1-9]")),null!==t&&null!==(n=f())?t=[t,n]:(t=null,o=i),null===t&&(t=f())))),t}function ge(){var e,t,n,r,i=o,l=o,u=f();return null!==(u=null!==u?u:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")?u=[u,r,e,t,n]:(u=null,o=l),null!==u&&(r=u,r=parseInt(r.join("")),u=Wn.port=r),null===u&&(o=i),u}function me(){var t,n,r=[],i=o;for(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null!==t&&null!==(n=ye())?t=[t,n]:(t=null,o=i);null!==t;)r.push(t),i=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null!==t&&null!==(n=ye())?t=[t,n]:(t=null,o=i);return r}function ye(){var e=be();return null===e&&null===(e=Ce())&&null===(e=Se())&&null===(e=Te())&&null===(e=Ee())&&null===(e=Ae())?we():e}function be(){var t,n,r=o,i=o;return"transport="===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===l&&s('"transport="')),null!==t?("udp"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"udp"')),null===n&&("tcp"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"tcp"')),null===n&&("sctp"===e.substr(o,4).toLowerCase()?(n=e.substr(o,4),o+=4):(n=null,0===l&&s('"sctp"')),null===n&&("tls"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"tls"')),null===n&&(n=P())))),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(n=t[1],Wn.uri_params||(Wn.uri_params={}),t=void(Wn.uri_params.transport=n.toLowerCase())),null===t&&(o=r),t}function Ce(){var t,n,r=o,i=o;return"user="===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"user="')),null!==t?("phone"===e.substr(o,5).toLowerCase()?(n=e.substr(o,5),o+=5):(n=null,0===l&&s('"phone"')),null===n&&("ip"===e.substr(o,2).toLowerCase()?(n=e.substr(o,2),o+=2):(n=null,0===l&&s('"ip"')),null===n&&(n=P())),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(n=t[1],Wn.uri_params||(Wn.uri_params={}),t=void(Wn.uri_params.user=n.toLowerCase())),null===t&&(o=r),t}function Se(){var t,n,r=o,i=o;return"method="===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"method="')),null!==t&&null!==(n=ct())?t=[t,n]:(t=null,o=i),null!==t&&(n=t[1],Wn.uri_params||(Wn.uri_params={}),t=void(Wn.uri_params.method=n)),null===t&&(o=r),t}function Te(){var t,n,r=o,i=o;return"ttl="===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"ttl="')),null!==t&&null!==(n=An())?t=[t,n]:(t=null,o=i),null!==t&&(n=t[1],Wn.params||(Wn.params={}),t=void(Wn.params.ttl=n)),null===t&&(o=r),t}function Ee(){var t,n,r=o,i=o;return"maddr="===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"maddr="')),null!==t&&null!==(n=ue())?t=[t,n]:(t=null,o=i),null!==t&&(n=t[1],Wn.uri_params||(Wn.uri_params={}),t=void(Wn.uri_params.maddr=n)),null===t&&(o=r),t}function Ae(){var t,n,r,i,u=o,a=o;return"lr"===e.substr(o,2).toLowerCase()?(t=e.substr(o,2),o+=2):(t=null,0===l&&s('"lr"')),null!==t?(i=o,61===e.charCodeAt(o)?(n="=",o++):(n=null,0===l&&s('"="')),null!==n&&null!==(r=P())?n=[n,r]:(n=null,o=i),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=a)):(t=null,o=a),null!==t&&(Wn.uri_params||(Wn.uri_params={}),t=void(Wn.uri_params.lr=void 0)),null===t&&(o=u),t}function we(){var t,n,r,i=o,u=o,a=Re();return null!==a?(r=o,61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null!==t&&null!==(n=Ie())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?a=[a,t]:(a=null,o=u)):(a=null,o=u),null!==a&&(n=a[0],r=a[1],Wn.uri_params||(Wn.uri_params={}),r=void 0===r?void 0:r[1],a=void(Wn.uri_params[n.toLowerCase()]=r)),null===a&&(o=i),a}function Re(){var e,t=o,n=Oe();if(null!==n)for(e=[];null!==n;)e.push(n),n=Oe();else e=null;return null===(e=null!==e?e.join(""):e)&&(o=t),e}function Ie(){var e,t=o,n=Oe();if(null!==n)for(e=[];null!==n;)e.push(n),n=Oe();else e=null;return null===(e=null!==e?e.join(""):e)&&(o=t),e}function Oe(){var e=ke();return null===e&&null===(e=C())?T():e}function ke(){var t;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===l&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===l&&s('"]"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===l&&s('"&"')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')))))))),t}function Pe(){var t,n,r,i,u,a,c=o;if(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null!==t)if(null!==(n=xe())){for(r=[],a=o,38===e.charCodeAt(o)?(i="&",o++):(i=null,0===l&&s('"&"')),null!==i&&null!==(u=xe())?i=[i,u]:(i=null,o=a);null!==i;)r.push(i),a=o,38===e.charCodeAt(o)?(i="&",o++):(i=null,0===l&&s('"&"')),null!==i&&null!==(u=xe())?i=[i,u]:(i=null,o=a);null!==r?t=[t,n,r]:(t=null,o=c)}else t=null,o=c;else t=null,o=c;return t}function xe(){var t,n,r=o,i=o,u=De();return null!==u?(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null!==t&&null!==(n=Me())?u=[u,t,n]:(u=null,o=i)):(u=null,o=i),null!==u&&(t=u[0],n=u[2],t=t.join("").toLowerCase(),n=n.join(""),Wn.uri_headers||(Wn.uri_headers={}),u=void(Wn.uri_headers[t]?Wn.uri_headers[t].push(n):Wn.uri_headers[t]=[n])),null===u&&(o=r),u}function De(){var e,t=Ne();if(null!==(t=null===t&&null===(t=C())?T():t))for(e=[];null!==t;)e.push(t),null===(t=Ne())&&null===(t=C())&&(t=T());else e=null;return e}function Me(){var e=[],t=Ne();for(null===t&&null===(t=C())&&(t=T());null!==t;)e.push(t),null===(t=Ne())&&null===(t=C())&&(t=T());return e}function Ne(){var t;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,0===l&&s('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,0===l&&s('"]"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')))))))),t}function Le(){var e,t,n,r,i=o,l=ct();return null!==l&&null!==(e=g())&&null!==(t=Ue())&&null!==(n=g())&&null!==(r=et())?l=[l,e,t,n,r]:(l=null,o=i),l}function Ue(){var e=Q();return null===e?je():e}function je(){var t,n,r=o,i=Ke();return null!==i?(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null!==t&&null!==(n=null===(n=Fe())?Ve():n)?i=[i,t,n]:(i=null,o=r)):(i=null,o=r),i}function Fe(){var t,n,r,i=o,u=qe();return null!==(u=null===u?He():u)?(r=o,63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null!==t&&null!==(n=Ze())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?u=[u,t]:(u=null,o=i)):(u=null,o=i),u}function qe(){var t,n,r,i=o;return"//"===e.substr(o,2)?(t="//",o+=2):(t=null,0===l&&s('"//"')),null!==t&&null!==(n=Ye())&&null!==(r=null!==(r=He())?r:"")?t=[t,n,r]:(t=null,o=i),t}function He(){var t,n,r=o;return 47===e.charCodeAt(o)?(t="/",o++):(t=null,0===l&&s('"/"')),null!==t&&null!==(n=Be())?t=[t,n]:(t=null,o=r),t}function Ve(){var e,t,n=o,r=Ge();if(null!==r){for(e=[],t=We();null!==t;)e.push(t),t=We();null!==e?r=[r,e]:(r=null,o=n)}else r=null,o=n;return r}function We(){var e=b();return null===e&&null===(e=C())?T():e}function Ge(){var t=C();return null===t&&null===(t=T())&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,0===l&&s('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===l&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","'))))))))))),t}function Be(){var t,n,r,i,u=o,a=ze();if(null!==a){for(t=[],i=o,47===e.charCodeAt(o)?(n="/",o++):(n=null,0===l&&s('"/"')),null!==n&&null!==(r=ze())?n=[n,r]:(n=null,o=i);null!==n;)t.push(n),i=o,47===e.charCodeAt(o)?(n="/",o++):(n=null,0===l&&s('"/"')),null!==n&&null!==(r=ze())?n=[n,r]:(n=null,o=i);null!==t?a=[a,t]:(a=null,o=u)}else a=null,o=u;return a}function ze(){for(var t,n,r,i=o,u=[],a=Je();null!==a;)u.push(a),a=Je();if(null!==u){for(a=[],r=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null!==t&&null!==(n=$e())?t=[t,n]:(t=null,o=r);null!==t;)a.push(t),r=o,59===e.charCodeAt(o)?(t=";",o++):(t=null,0===l&&s('";"')),null!==t&&null!==(n=$e())?t=[t,n]:(t=null,o=r);null!==a?u=[u,a]:(u=null,o=i)}else u=null,o=i;return u}function $e(){for(var e=[],t=Je();null!==t;)e.push(t),t=Je();return e}function Je(){var t=C();return null===t&&null===(t=T())&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,0===l&&s('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,0===l&&s('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,0===l&&s('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,0===l&&s('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,0===l&&s('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,0===l&&s('","'))))))))),t}function Ke(){var t,n,r=o,i=o,u=d();if(null!==u){for(t=[],null===(n=d())&&null===(n=f())&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===l&&s('"+"')),null===n&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')))));null!==n;)t.push(n),null===(n=d())&&null===(n=f())&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===l&&s('"+"')),null===n&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,0===l&&s('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')))));null!==t?u=[u,t]:(u=null,o=i)}else u=null,o=i;return null===(u=null!==u?void(Wn.scheme=e.substring(o,r)):u)&&(o=r),u}function Ye(){var e=Xe();return null===e?Qe():e}function Xe(){var t,n=o,r=o,i=ne();return null!==i?(64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null!==t?i=[i,t]:(i=null,o=r)):(i=null,o=r),null!==(i=null!==i?i:"")&&null!==(t=le())?i=[i,t]:(i=null,o=n),null!==i?i:""}function Qe(){var t,n=C();if(null===n&&null===(n=T())&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,0===l&&s('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,0===l&&s('","')),null===n&&(59===e.charCodeAt(o)?(n=";",o++):(n=null,0===l&&s('";"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null===n&&(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===l&&s('"@"')),null===n&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,0===l&&s('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,0===l&&s('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===l&&s('"+"')))))))))),null!==n)for(t=[];null!==n;)t.push(n),null===(n=C())&&null===(n=T())&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,0===l&&s('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,0===l&&s('","')),null===n&&(59===e.charCodeAt(o)?(n=";",o++):(n=null,0===l&&s('";"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,0===l&&s('":"')),null===n&&(64===e.charCodeAt(o)?(n="@",o++):(n=null,0===l&&s('"@"')),null===n&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,0===l&&s('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,0===l&&s('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,0===l&&s('"+"'))))))))));else t=null;return t}function Ze(){for(var e=[],t=We();null!==t;)e.push(t),t=We();return e}function et(){var t,n,r,i,u,a,c=o,d=o;if("sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"SIP"')),null!==t)if(47===e.charCodeAt(o)?(n="/",o++):(n=null,0===l&&s('"/"')),null!==n){if(null!==(i=f()))for(r=[];null!==i;)r.push(i),i=f();else r=null;if(null!==r)if(46===e.charCodeAt(o)?(i=".",o++):(i=null,0===l&&s('"."')),null!==i){if(null!==(a=f()))for(u=[];null!==a;)u.push(a),a=f();else u=null;null!==u?t=[t,n,r,i,u]:(t=null,o=d)}else t=null,o=d;else t=null,o=d}else t=null,o=d;else t=null,o=d;return null===(t=null!==t?void(Wn.sip_version=e.substring(o,c)):t)&&(o=c),t}function tt(){var t;return"INVITE"===e.substr(o,6)?(t="INVITE",o+=6):(t=null,0===l&&s('"INVITE"')),t}function nt(){var t;return"ACK"===e.substr(o,3)?(t="ACK",o+=3):(t=null,0===l&&s('"ACK"')),t}function rt(){var t;return"OPTIONS"===e.substr(o,7)?(t="OPTIONS",o+=7):(t=null,0===l&&s('"OPTIONS"')),t}function it(){var t;return"BYE"===e.substr(o,3)?(t="BYE",o+=3):(t=null,0===l&&s('"BYE"')),t}function ot(){var t;return"CANCEL"===e.substr(o,6)?(t="CANCEL",o+=6):(t=null,0===l&&s('"CANCEL"')),t}function lt(){var t;return"REGISTER"===e.substr(o,8)?(t="REGISTER",o+=8):(t=null,0===l&&s('"REGISTER"')),t}function ut(){var t;return"SUBSCRIBE"===e.substr(o,9)?(t="SUBSCRIBE",o+=9):(t=null,0===l&&s('"SUBSCRIBE"')),t}function at(){var t;return"NOTIFY"===e.substr(o,6)?(t="NOTIFY",o+=6):(t=null,0===l&&s('"NOTIFY"')),t}function st(){var t;return"REFER"===e.substr(o,5)?(t="REFER",o+=5):(t=null,0===l&&s('"REFER"')),t}function ct(){var t=o,n=tt();return null!==(n=null===n&&null===(n=nt())&&null===(n=rt())&&null===(n=it())&&null===(n=ot())&&null===(n=lt())&&null===(n=ut())&&null===(n=at())&&null===(n=st())?P():n)&&(Wn.method=e.substring(o,t),n=Wn.method),null===n&&(o=t),n}function ft(){var e,t,n,r,i=o,l=et();return null!==l&&null!==(e=g())&&null!==(t=dt())&&null!==(n=g())&&null!==(r=pt())?l=[l,e,t,n,r]:(l=null,o=i),l}function dt(){var e,t=o,n=ht();return null!==n&&(e=n,n=void(Wn.status_code=parseInt(e.join("")))),null===n&&(o=t),n}function ht(){var e,t,n=o,r=f();return null!==r&&null!==(e=f())&&null!==(t=f())?r=[r,e,t]:(r=null,o=n),r}function pt(){var t=o,n=[],r=b();for(null===r&&null===(r=C())&&null===(r=T())&&null===(r=O())&&null===(r=k())&&null===(r=g())&&(r=m());null!==r;)n.push(r),null===(r=b())&&null===(r=C())&&null===(r=T())&&null===(r=O())&&null===(r=k())&&null===(r=g())&&(r=m());return null===(n=null!==n?void(Wn.reason_phrase=e.substring(o,t)):n)&&(o=t),n}function vt(){var e,t,n,r,i=o,l=o,u=X();if(null!==(u=null===u?_t():u)){for(e=[],r=o,null!==(t=V())&&null!==(n=mt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=mt())?t=[t,n]:(t=null,o=r);null!==e?u=[u,e]:(u=null,o=l)}else u=null,o=l;return null===(u=null!==u?function(e){var t;Wn.multi_header||(Wn.multi_header=[]);try{t=new Vn(Wn.uri,Wn.display_name,Wn.params),delete Wn.uri,delete Wn.display_name,delete Wn.params}catch(e){t=null}Wn.multi_header.push({possition:o,offset:e,parsed:t})}(i):u)&&(o=i),u}function _t(){var e,t,n,r=o,i=gt();return null!==(i=null!==i?i:"")&&null!==(e=q())&&null!==(t=Q())&&null!==(n=F())?i=[i,e,t,n]:(i=null,o=r),i}function gt(){var e,t,n,r,i=o,l=o,u=P();if(null!==u){for(e=[],r=o,null!==(t=E())&&null!==(n=P())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=E())&&null!==(n=P())?t=[t,n]:(t=null,o=r);null!==e?u=[u,e]:(u=null,o=l)}else u=null,o=l;return null!==(u=null===u?J():u)&&(l=u,u=void(Wn.display_name="string"==typeof l?l:l[1].reduce((function(e,t){return e+t[0]+t[1]}),l[0]))),null===u&&(o=i),u}function mt(){var e=yt();return null===e&&null===(e=bt())?Tt():e}function yt(){var t,n,r,i=o,u=o;return"q"===e.substr(o,1).toLowerCase()?(t=e.substr(o,1),o++):(t=null,0===l&&s('"q"')),null!==t&&null!==(r=L())&&null!==(n=St())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],Wn.params||(Wn.params={}),t=void(Wn.params.q=r)),null===t&&(o=i),t}function bt(){var t,n,r,i=o,u=o;return"expires"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"expires"')),null!==t&&null!==(r=L())&&null!==(n=Ct())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],Wn.params||(Wn.params={}),t=void(Wn.params.expires=r)),null===t&&(o=i),t}function Ct(){var e,t=o,n=f();if(null!==n)for(e=[];null!==n;)e.push(n),n=f();else e=null;return null===(e=null!==e?parseInt(e.join("")):e)&&(o=t),e}function St(){var t,n,r,i,u,a,c=o,d=o;return 48===e.charCodeAt(o)?(t="0",o++):(t=null,0===l&&s('"0"')),null!==t?(a=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')),null!==n&&null!==(r=null!==(r=f())?r:"")&&null!==(i=null!==(i=f())?i:"")&&null!==(u=null!==(u=f())?u:"")?n=[n,r,i,u]:(n=null,o=a),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=d)):(t=null,o=d),null===(t=null!==t?parseFloat(e.substring(o,c)):t)&&(o=c),t}function Tt(){var e,t,n,r=o,i=o,l=P();return null!==l?(n=o,null!==(e=L())&&null!==(t=Et())?e=[e,t]:(e=null,o=n),null!==(e=null!==e?e:"")?l=[l,e]:(l=null,o=i)):(l=null,o=i),null!==l&&(t=l[0],n=l[1],Wn.params||(Wn.params={}),n=void 0===n?void 0:n[1],l=void(Wn.params[t.toLowerCase()]=n)),null===l&&(o=r),l}function Et(){var e=P();return null===e&&null===(e=ue())?$():e}function At(){var t;return"render"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"render"')),null===t&&("session"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"session"')),null===t&&("icon"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"icon"')),null===t&&("alert"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"alert"')),null===t&&(t=P())))),t}function wt(){var e=Rt();return null===e?Tt():e}function Rt(){var t,n,r,i=o;return"handling"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===l&&s('"handling"')),null!==t&&null!==(n=L())?("optional"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,0===l&&s('"optional"')),null===r&&("required"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,0===l&&s('"required"')),null===r&&(r=P())),null!==r?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),t}function It(){var e,t,n,r,i,l,u=o,a=Ot();if(null!==a)if(null!==(e=N()))if(null!==(t=Mt())){for(n=[],l=o,null!==(r=V())&&null!==(i=Nt())?r=[r,i]:(r=null,o=l);null!==r;)n.push(r),l=o,null!==(r=V())&&null!==(i=Nt())?r=[r,i]:(r=null,o=l);null!==n?a=[a,e,t,n]:(a=null,o=u)}else a=null,o=u;else a=null,o=u;else a=null,o=u;return a}function Ot(){var e=kt();return null===e?Pt():e}function kt(){var t;return"text"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"text"')),null===t&&("image"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"image"')),null===t&&("audio"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"audio"')),null===t&&("video"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"video"')),null===t&&("application"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===l&&s('"application"')),null===t&&(t=xt()))))),t}function Pt(){var t;return"message"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"message"')),null===t&&("multipart"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===l&&s('"multipart"')),null===t&&(t=xt())),t}function xt(){var e=P();return null===e?Dt():e}function Dt(){var t,n,r=o;return"x-"===e.substr(o,2).toLowerCase()?(t=e.substr(o,2),o+=2):(t=null,0===l&&s('"x-"')),null!==t&&null!==(n=P())?t=[t,n]:(t=null,o=r),t}function Mt(){var e=xt();return null===e?P():e}function Nt(){var e,t,n=o,r=P();return null!==r&&null!==(e=L())&&null!==(t=Lt())?r=[r,e,t]:(r=null,o=n),r}function Lt(){var e=P();return null===e?$():e}function Ut(){var e,t,n=o,r=f();if(null!==r)for(e=[];null!==r;)e.push(r),r=f();else e=null;return null!==e&&(t=e,e=void(Wn.value=parseInt(t.join("")))),null===e&&(o=n),e}function jt(){var t,n,r,i,u=o,a=x();if(null!==a){for(t=[],i=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')),null!==n&&null!==(r=x())?n=[n,r]:(n=null,o=i);null!==n;)t.push(n),i=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,0===l&&s('"."')),null!==n&&null!==(r=x())?n=[n,r]:(n=null,o=i);null!==t?a=[a,t]:(a=null,o=u)}else a=null,o=u;return a}function Ft(){var e=qt();return null===e?Tt():e}function qt(){var t,n,r,i=o,u=o;return"tag"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"tag"')),null!==t&&null!==(r=L())&&null!==(n=P())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.tag=r)),null===t&&(o=i),t}function Ht(){var t,n,r,i,u,a,c,f=o;if("digest"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"Digest"')),null!==t)if(null!==(n=E()))if(null!==(r=Gt())){for(i=[],c=o,null!==(u=H())&&null!==(a=Gt())?u=[u,a]:(u=null,o=c);null!==u;)i.push(u),c=o,null!==(u=H())&&null!==(a=Gt())?u=[u,a]:(u=null,o=c);null!==i?t=[t,n,r,i]:(t=null,o=f)}else t=null,o=f;else t=null,o=f;else t=null,o=f;return null===t?Vt():t}function Vt(){var e,t,n,r,i,l,u=o,a=P();if(null!==a)if(null!==(e=E()))if(null!==(t=Wt())){for(n=[],l=o,null!==(r=H())&&null!==(i=Wt())?r=[r,i]:(r=null,o=l);null!==r;)n.push(r),l=o,null!==(r=H())&&null!==(i=Wt())?r=[r,i]:(r=null,o=l);null!==n?a=[a,e,t,n]:(a=null,o=u)}else a=null,o=u;else a=null,o=u;else a=null,o=u;return a}function Wt(){var e,t,n=o,r=P();return null!==r&&null!==(e=L())&&null!==(t=null===(t=P())?$():t)?r=[r,e,t]:(r=null,o=n),r}function Gt(){var e=Bt();return null===e&&null===(e=$t())&&null===(e=Kt())&&null===(e=Xt())&&null===(e=Qt())&&null===(e=Zt())&&null===(e=en())?Wt():e}function Bt(){var t,n,r,i=o;return"realm"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"realm"')),null!==t&&null!==(n=L())&&null!==(r=zt())?t=[t,n,r]:(t=null,o=i),t}function zt(){var e,t=o,n=J();return null!==n&&(e=n,n=void(Wn.realm=e)),null===n&&(o=t),n}function $t(){var t,n,r,i,u,a,c,f,d=o;if("domain"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"domain"')),null!==t)if(null!==(n=L()))if(null!==(r=G()))if(null!==(i=Jt())){if(u=[],f=o,null!==(c=g()))for(a=[];null!==c;)a.push(c),c=g();else a=null;for(null!==a&&null!==(c=Jt())?a=[a,c]:(a=null,o=f);null!==a;){if(u.push(a),f=o,null!==(c=g()))for(a=[];null!==c;)a.push(c),c=g();else a=null;null!==a&&null!==(c=Jt())?a=[a,c]:(a=null,o=f)}null!==u&&null!==(a=B())?t=[t,n,r,i,u,a]:(t=null,o=d)}else t=null,o=d;else t=null,o=d;else t=null,o=d;else t=null,o=d;return t}function Jt(){var e=je();return null===e?He():e}function Kt(){var t,n,r,i=o;return"nonce"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"nonce"')),null!==t&&null!==(n=L())&&null!==(r=Yt())?t=[t,n,r]:(t=null,o=i),t}function Yt(){var e,t=o,n=J();return null!==n&&(e=n,n=void(Wn.nonce=e)),null===n&&(o=t),n}function Xt(){var t,n,r,i=o,u=o;return"opaque"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"opaque"')),null!==t&&null!==(r=L())&&null!==(n=J())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.opaque=r)),null===t&&(o=i),t}function Qt(){var t,n,r,i,u=o;return"stale"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"stale"')),null!==t&&null!==(n=L())?(i=o,"true"===e.substr(o,4).toLowerCase()?(r=e.substr(o,4),o+=4):(r=null,0===l&&s('"true"')),null===(r=null!==r?void(Wn.stale=!0):r)&&(o=i),null===r&&(i=o,"false"===e.substr(o,5).toLowerCase()?(r=e.substr(o,5),o+=5):(r=null,0===l&&s('"false"')),null===(r=null!==r?void(Wn.stale=!1):r)&&(o=i)),null!==r?t=[t,n,r]:(t=null,o=u)):(t=null,o=u),t}function Zt(){var t,n,r,i=o,u=o;return"algorithm"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===l&&s('"algorithm"')),null!==t&&null!==(r=L())?("md5"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"MD5"')),null===n&&("md5-sess"===e.substr(o,8).toLowerCase()?(n=e.substr(o,8),o+=8):(n=null,0===l&&s('"MD5-sess"')),null===n&&(n=P())),null!==n?t=[t,r,n]:(t=null,o=u)):(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.algorithm=r.toUpperCase())),null===t&&(o=i),t}function en(){var t,n,r,i,u,a,c,f,d,h=o;if("qop"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"qop"')),null!==t)if(null!==(n=L()))if(null!==(r=G())){if(f=o,null!==(i=tn())){for(u=[],d=o,44===e.charCodeAt(o)?(a=",",o++):(a=null,0===l&&s('","')),null!==a&&null!==(c=tn())?a=[a,c]:(a=null,o=d);null!==a;)u.push(a),d=o,44===e.charCodeAt(o)?(a=",",o++):(a=null,0===l&&s('","')),null!==a&&null!==(c=tn())?a=[a,c]:(a=null,o=d);null!==u?i=[i,u]:(i=null,o=f)}else i=null,o=f;null!==i&&null!==(u=B())?t=[t,n,r,i,u]:(t=null,o=h)}else t=null,o=h;else t=null,o=h;else t=null,o=h;return t}function tn(){var t,n,r=o;return"auth-int"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===l&&s('"auth-int"')),null===t&&("auth"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"auth"')),null===t&&(t=P())),null!==t&&(n=t,Wn.qop||(Wn.qop=[]),t=void Wn.qop.push(n.toLowerCase())),null===t&&(o=r),t}function nn(){var e,t,n,r,i=o,l=o,u=_t();if(null!==u){for(e=[],r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==e?u=[u,e]:(u=null,o=l)}else u=null,o=l;return null===(u=null!==u?function(e){var t;Wn.multi_header||(Wn.multi_header=[]);try{t=new Vn(Wn.uri,Wn.display_name,Wn.params),delete Wn.uri,delete Wn.display_name,delete Wn.params}catch(e){t=null}Wn.multi_header.push({possition:o,offset:e,parsed:t})}(i):u)&&(o=i),u}function rn(){var e=on();return null===e?Tt():e}function on(){var t,n,r,i,u=o,a=o;if("cause"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"cause"')),null!==t)if(null!==(i=L())){if(null!==(r=f()))for(n=[];null!==r;)n.push(r),r=f();else n=null;null!==n?t=[t,i,n]:(t=null,o=a)}else t=null,o=a;else t=null,o=a;return null!==t&&(i=t[2],t=void(Wn.cause=parseInt(i.join("")))),null===t&&(o=u),t}function ln(){var e,t,n,r,i=o,l=_t();if(null!==l){for(e=[],r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==t;)e.push(t),r=o,null!==(t=V())&&null!==(n=Tt())?t=[t,n]:(t=null,o=r);null!==e?l=[l,e]:(l=null,o=i)}else l=null,o=i;return l}function un(){var t,n=o;return"active"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"active"')),null===t&&("pending"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"pending"')),null===t&&("terminated"===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===l&&s('"terminated"')),null===t&&(t=P()))),null===(t=null!==t?void(Wn.state=e.substring(o,n)):t)&&(o=n),t}function an(){var t,n,r,i,u=o,a=o;return"reason"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"reason"')),null!==t&&null!==(r=L())&&null!==(n=sn())?t=[t,r,n]:(t=null,o=a),null===(t=null!==t?void(void 0!==(i=t[2])&&(Wn.reason=i)):t)&&(o=u),null===t&&(a=u=o,"expires"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"expires"')),null!==t&&null!==(r=L())&&null!==(n=Ct())?t=[t,r,n]:(t=null,o=a),null===(t=null!==t?void(void 0!==(i=t[2])&&(Wn.expires=i)):t)&&(o=u),null===t&&(a=u=o,"retry_after"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===l&&s('"retry_after"')),null!==t&&null!==(r=L())&&null!==(n=Ct())?t=[t,r,n]:(t=null,o=a),null===(t=null!==t?void(void 0!==(r=t[2])&&(Wn.retry_after=r)):t)&&(o=u),null===t&&(t=Tt()))),t}function sn(){var t;return"deactivated"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,0===l&&s('"deactivated"')),null===t&&("probation"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===l&&s('"probation"')),null===t&&("rejected"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===l&&s('"rejected"')),null===t&&("timeout"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,0===l&&s('"timeout"')),null===t&&("giveup"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"giveup"')),null===t&&("noresource"===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,0===l&&s('"noresource"')),null===t&&("invariant"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===l&&s('"invariant"')),null===t&&(t=P()))))))),t}function cn(){var e=qt();return null===e?Tt():e}function fn(){var e,t,n,r,i,l,u=o,a=yn();if(null!==a)if(null!==(e=E()))if(null!==(t=Sn())){for(n=[],l=o,null!==(r=V())&&null!==(i=dn())?r=[r,i]:(r=null,o=l);null!==r;)n.push(r),l=o,null!==(r=V())&&null!==(i=dn())?r=[r,i]:(r=null,o=l);null!==n?a=[a,e,t,n]:(a=null,o=u)}else a=null,o=u;else a=null,o=u;else a=null,o=u;return a}function dn(){var e=hn();return null===e&&null===(e=pn())&&null===(e=vn())&&null===(e=_n())&&null===(e=gn())?Tt():e}function hn(){var t,n,r,i=o,u=o;return"ttl"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"ttl"')),null!==t&&null!==(r=L())&&null!==(n=An())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.ttl=r)),null===t&&(o=i),t}function pn(){var t,n,r,i=o,u=o;return"maddr"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"maddr"')),null!==t&&null!==(r=L())&&null!==(n=ue())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.maddr=r)),null===t&&(o=i),t}function vn(){var t,n,r,i=o,u=o;return"received"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,0===l&&s('"received"')),null!==t&&null!==(r=L())&&null!==(n=null===(n=ve())?de():n)?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.received=r)),null===t&&(o=i),t}function _n(){var t,n,r,i=o,u=o;return"branch"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,0===l&&s('"branch"')),null!==t&&null!==(r=L())&&null!==(n=P())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.branch=r)),null===t&&(o=i),t}function gn(){var t,n,r,i,u=o;return"rport"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,0===l&&s('"rport"')),null!==t?(i=o,null!==(n=L())&&null!==(r=mn())?n=[n,r]:(n=null,o=i),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=u)):(t=null,o=u),t}function mn(){var e,t,n,r,i=o,l=o,u=f();return null!==(u=null!==u?u:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")?u=[u,r,e,t,n]:(u=null,o=l),null!==u&&(r=u,u=void(Wn.rport=parseInt(r.join("")))),null===u&&(o=i),u}function yn(){var e,t,n,r,i=o,l=bn();return null!==l&&null!==(e=N())&&null!==(t=P())&&null!==(n=N())&&null!==(r=Cn())?l=[l,e,t,n,r]:(l=null,o=i),l}function bn(){var t,n,r=o;return"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"SIP"')),null!==(t=null===t?P():t)&&(n=t,t=void(Wn.protocol=n)),null===t&&(o=r),t}function Cn(){var t,n,r=o;return"udp"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"UDP"')),null===t&&("tcp"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"TCP"')),null===t&&("tls"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,0===l&&s('"TLS"')),null===t&&("sctp"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,0===l&&s('"SCTP"')),null===t&&(t=P())))),null!==t&&(n=t,t=void(Wn.transport=n)),null===t&&(o=r),t}function Sn(){var e,t,n,r=o,i=Tn();return null!==i?(n=o,null!==(e=W())&&null!==(t=En())?e=[e,t]:(e=null,o=n),null!==(e=null!==e?e:"")?i=[i,e]:(i=null,o=r)):(i=null,o=r),i}function Tn(){var t=o,n=ve();return null===(n=null!==(n=null===n&&null===(n=fe())?ae():n)?void(Wn.host=e.substring(o,t)):n)&&(o=t),n}function En(){var e,t,n,r,i=o,l=o,u=f();return null!==(u=null!==u?u:"")&&null!==(r=null!==(r=f())?r:"")&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")&&null!==(n=null!==(n=f())?n:"")?u=[u,r,e,t,n]:(u=null,o=l),null!==u&&(r=u,u=void(Wn.port=parseInt(r.join("")))),null===u&&(o=i),u}function An(){var e,t,n=o,r=o,i=f();return null!==i&&null!==(e=null!==(e=f())?e:"")&&null!==(t=null!==(t=f())?t:"")?i=[i,e,t]:(i=null,o=r),null===(i=null!==i?parseInt(i.join("")):i)&&(o=n),i}function wn(){var e,t=o,n=Ct();return null!==n&&(e=n,n=void(Wn.expires=e)),null===n&&(o=t),n}function Rn(){var e=In();return null===e?Tt():e}function In(){var t,n,r,i=o,u=o;return"refresher"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,0===l&&s('"refresher"')),null!==t&&null!==(r=L())?("uac"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"uac"')),null===n&&("uas"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,0===l&&s('"uas"'))),null!==n?t=[t,r,n]:(t=null,o=u)):(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.refresher=r.toLowerCase())),null===t&&(o=i),t}function On(){var e=[],t=I();for(null===t&&null===(t=k())&&(t=E());null!==t;)e.push(t),null===(t=I())&&null===(t=k())&&(t=E());return e}function kn(){var t,n,r,i,u,a,c,f,d=o,h=o,p=xn();return null!==p?(45===e.charCodeAt(o)?(t="-",o++):(t=null,0===l&&s('"-"')),null!==t&&null!==(n=Pn())?(45===e.charCodeAt(o)?(r="-",o++):(r=null,0===l&&s('"-"')),null!==r&&null!==(i=Pn())?(45===e.charCodeAt(o)?(u="-",o++):(u=null,0===l&&s('"-"')),null!==u&&null!==(a=Pn())?(45===e.charCodeAt(o)?(c="-",o++):(c=null,0===l&&s('"-"')),null!==c&&null!==(f=Dn())?p=[p,t,n,r,i,u,a,c,f]:(p=null,o=h)):(p=null,o=h)):(p=null,o=h)):(p=null,o=h)):(p=null,o=h),null!==p&&(p[0],p=void(Wn=e.substring(o+5,d))),null===p&&(o=d),p}function Pn(){var e,t,n,r=o,i=h();return null!==i&&null!==(e=h())&&null!==(t=h())&&null!==(n=h())?i=[i,e,t,n]:(i=null,o=r),i}function xn(){var e,t=o,n=Pn();return null!==n&&null!==(e=Pn())?n=[n,e]:(n=null,o=t),n}function Dn(){var e,t,n=o,r=Pn();return null!==r&&null!==(e=Pn())&&null!==(t=Pn())?r=[r,e,t]:(r=null,o=n),r}function Mn(){var t,n,r,i=o,u=o,a=D();return null!==a?(r=o,64===e.charCodeAt(o)?(t="@",o++):(t=null,0===l&&s('"@"')),null!==t&&null!==(n=D())?t=[t,n]:(t=null,o=r),null!==(t=null!==t?t:"")?a=[a,t]:(a=null,o=u)):(a=null,o=u),null===(a=null!==a?void(Wn.call_id=e.substring(o,i)):a)&&(o=i),a}function Nn(){var e=Ln();return null===e&&null===(e=Un())&&null===(e=jn())?Tt():e}function Ln(){var t,n,r,i=o,u=o;return"to-tag"===e.substr(o,6)?(t="to-tag",o+=6):(t=null,0===l&&s('"to-tag"')),null!==t&&null!==(r=L())&&null!==(n=P())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.to_tag=r)),null===t&&(o=i),t}function Un(){var t,n,r,i=o,u=o;return"from-tag"===e.substr(o,8)?(t="from-tag",o+=8):(t=null,0===l&&s('"from-tag"')),null!==t&&null!==(r=L())&&null!==(n=P())?t=[t,r,n]:(t=null,o=u),null!==t&&(r=t[2],t=void(Wn.from_tag=r)),null===t&&(o=i),t}function jn(){var t,n=o;return"early-only"===e.substr(o,10)?(t="early-only",o+=10):(t=null,0===l&&s('"early-only"')),null===(t=null!==t?void(Wn.early_only=!0):t)&&(o=n),t}var Fn,qn,Hn=n(112),Vn=n(384),Wn={};return null===i[t]()||o!==e.length?(Fn=(i=Math.max(o,u))<e.length?e.charAt(i):null,qn=function(){for(var t=1,n=1,r=!1,i=0;i<Math.max(o,u);i++){var l=e.charAt(i);r="\n"===l?(r||t++,!(n=1)):"\r"===l||"\u2028"===l||"\u2029"===l?(t++,n=1,!0):(n++,!1)}return{line:t,column:n}}(),new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}(a),Fn,i,qn.line,qn.column),-1):Wn},toSource:function(){return this._source}}).SyntaxError=function(e,t,n,i,o){this.name="SyntaxError",this.expected=e,this.found=t,this.message=function(e,t){var n;switch(e.length){case 0:n="end of input";break;case 1:n=e[0];break;default:n=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+n+" but "+(t?r(t):"end of input")+" found."}(e,t),this.offset=n,this.line=i,this.column=o},e.SyntaxError.prototype=Error.prototype,e)},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,l,u,a,s="Expected a function",c="__lodash_hash_undefined__",f="__lodash_placeholder__",d=9007199254740991,h=4294967295,p=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],v="[object Arguments]",_="[object Array]",g="[object Boolean]",m="[object Date]",y="[object Error]",b="[object Function]",C="[object GeneratorFunction]",S="[object Map]",T="[object Number]",E="[object Object]",A="[object Promise]",w="[object RegExp]",R="[object Set]",I="[object String]",O="[object Symbol]",k="[object WeakMap]",P="[object ArrayBuffer]",x="[object DataView]",D="[object Float32Array]",M="[object Float64Array]",N="[object Int8Array]",L="[object Int16Array]",U="[object Int32Array]",j="[object Uint8Array]",F="[object Uint8ClampedArray]",q="[object Uint16Array]",H="[object Uint32Array]",V=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,$=RegExp(B.source),J=RegExp(z.source),K=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,ie=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,ae=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,se=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,ve=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,me=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ye=/($^)/,be=/['\n\r\u2028\u2029\\]/g,Ce="\\ud800-\\udfff",Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\ufe0e\\ufe0f",Ee="["+Ce+"]",Ae="["+(ke="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000")+"]",we="["+Se+"]",Re="["+(l="\\u2700-\\u27bf")+"]",Ie="["+(Je="a-z\\xdf-\\xf6\\xf8-\\xff")+"]",Oe="(?:"+Ie+"|"+(ke="[^"+Ce+ke+"\\d+"+l+Je+(u="A-Z\\xc0-\\xd6\\xd8-\\xde")+"]")+")",ke="(?:"+(u="["+u+"]")+"|"+ke+")",Pe="(?:['â€™](?:d|ll|m|re|s|t|ve))?",xe="(?:['â€™](?:D|LL|M|RE|S|T|VE))?",De=(De="["+Te+"]?")+(Me="(?:"+we+"|"+(l="\\ud83c[\\udffb-\\udfff]")+")?")+"(?:\\u200d(?:"+[Je="[^"+Ce+"]",Ke="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")"+De+Me+")*",Me="(?:"+[Re,Ke,a].join("|")+")"+De,Ne=(Re="(?:"+[Je+we+"?",we,Ke,a,Ee].join("|")+")",RegExp("['â€™]","g")),Le=RegExp(we,"g"),Ue=RegExp(l+"(?="+l+")|"+Re+De,"g"),je=RegExp([u+"?"+Ie+"+"+Pe+"(?="+[Ae,u,"$"].join("|")+")",ke+"+"+xe+"(?="+[Ae,u+Oe,"$"].join("|")+")",u+"?"+Oe+"+"+Pe,u+"+"+xe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Me].join("|"),"g"),Fe=RegExp("[\\u200d"+Ce+Se+Te+"]"),qe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,He=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ve=-1,We={},Ge=(We[D]=We[M]=We[N]=We[L]=We[U]=We[j]=We[F]=We[q]=We[H]=!0,We[v]=We[_]=We[P]=We[g]=We[x]=We[m]=We[y]=We[b]=We[S]=We[T]=We[E]=We[w]=We[R]=We[I]=We[k]=!1,{}),Be=(Ge[v]=Ge[_]=Ge[P]=Ge[x]=Ge[g]=Ge[m]=Ge[D]=Ge[M]=Ge[N]=Ge[L]=Ge[U]=Ge[S]=Ge[T]=Ge[E]=Ge[w]=Ge[R]=Ge[I]=Ge[O]=Ge[j]=Ge[F]=Ge[q]=Ge[H]=!0,Ge[y]=Ge[b]=Ge[k]=!1,{"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"}),ze=parseFloat,$e=parseInt,Je="object"==typeof e&&e&&e.Object===Object&&e,Ke="object"==typeof self&&self&&self.Object===Object&&self,Ye=Je||Ke||Function("return this")(),Xe=(a=t&&!t.nodeType&&t)&&"object"==typeof r&&r&&!r.nodeType&&r,Qe=Xe&&Xe.exports===a,Ze=Qe&&Je.process,et=(Ee=function(){try{var e=Xe&&Xe.require&&Xe.require("util").types;return e||Ze&&Ze.binding&&Ze.binding("util")}catch(e){}}())&&Ee.isArrayBuffer,tt=Ee&&Ee.isDate,nt=Ee&&Ee.isMap,rt=Ee&&Ee.isRegExp,it=Ee&&Ee.isSet,ot=Ee&&Ee.isTypedArray;function lt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ut(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var l=e[i];t(r,l,n(l),e)}return r}function at(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function st(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ft(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var l=e[n];t(l,n,e)&&(o[i++]=l)}return o}function dt(e,t){return!(null==e||!e.length)&&-1<St(e,t,0)}function ht(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function pt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function vt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function _t(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function gt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var yt=wt("length");function bt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Ct(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function St(e,t,n){if(t!=t)return Ct(e,Et,n);for(var r=e,i=t,o=n-1,l=r.length;++o<l;)if(r[o]===i)return o;return-1}function Tt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Et(e){return e!=e}function At(e,t){var n=null==e?0:e.length;return n?Ot(e,t)/n:NaN}function wt(e){return function(t){return null==t?o:t[e]}}function Rt(e){return function(t){return null==e?o:e[t]}}function It(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Ot(e,t){for(var n,r=-1,i=e.length;++r<i;){var l=t(e[r]);l!==o&&(n=n===o?l:n+l)}return n}function kt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Pt(e){return e&&e.slice(0,$t(e)+1).replace(re,"")}function xt(e){return function(t){return e(t)}}function Dt(e,t){return pt(t,(function(t){return e[t]}))}function Mt(e,t){return e.has(t)}function Nt(e,t){for(var n=-1,r=e.length;++n<r&&-1<St(t,e[n],0););return n}function Lt(e,t){for(var n=e.length;n--&&-1<St(t,e[n],0););return n}var Ut=Rt({"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss","Ä€":"A","Ä‚":"A","Ä„":"A","Ä":"a","Äƒ":"a","Ä…":"a","Ä†":"C","Äˆ":"C","ÄŠ":"C","ÄŒ":"C","Ä‡":"c","Ä‰":"c","Ä‹":"c","Ä":"c","ÄŽ":"D","Ä":"D","Ä":"d","Ä‘":"d","Ä’":"E","Ä”":"E","Ä–":"E","Ä˜":"E","Äš":"E","Ä“":"e","Ä•":"e","Ä—":"e","Ä™":"e","Ä›":"e","Äœ":"G","Äž":"G","Ä ":"G","Ä¢":"G","Ä":"g","ÄŸ":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å€":"l","Å‚":"l","Åƒ":"N","Å…":"N","Å‡":"N","ÅŠ":"N","Å„":"n","Å†":"n","Åˆ":"n","Å‹":"n","ÅŒ":"O","ÅŽ":"O","Å":"O","Å":"o","Å":"o","Å‘":"o","Å”":"R","Å–":"R","Å˜":"R","Å•":"r","Å—":"r","Å™":"r","Åš":"S","Åœ":"S","Åž":"S","Å ":"S","Å›":"s","Å":"s","ÅŸ":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å’":"Oe","Å“":"oe","Å‰":"'n","Å¿":"s"}),jt=Rt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ft(e){return"\\"+Be[e]}function qt(e){return Fe.test(e)}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Vt(e,t){return function(n){return e(t(n))}}function Wt(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var l=e[n];l!==t&&l!==f||(e[n]=f,o[i++]=n)}return o}function Gt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Bt(e){return(qt(e)?function(e){for(var t=Ue.lastIndex=0;Ue.test(e);)++t;return t}:yt)(e)}function zt(e){return qt(e)?e.match(Ue)||[]:e.split("")}function $t(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var Jt=Rt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Kt=function e(t){var n=(t=null==t?Ye:Kt.defaults(Ye.Object(),t,Kt.pick(Ye,He))).Array,r=t.Date,i=t.Error,l=t.Function,u=t.Math,a=t.Object,ie=t.RegExp,Ce=t.String,Se=t.TypeError,Te=n.prototype,Ee=l.prototype,Ae=a.prototype,we=t["__core-js_shared__"],Re=Ee.toString,Ie=Ae.hasOwnProperty,Oe=0,ke=(Ee=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+Ee:"",Pe=Ae.toString,xe=Re.call(a),De=Ye._,Me=ie("^"+Re.call(Ie).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=(Ee=Qe?t.Buffer:o,t.Symbol),Fe=t.Uint8Array,Be=Ee?Ee.allocUnsafe:o,Je=Vt(a.getPrototypeOf,a),Ke=a.create,Xe=Ae.propertyIsEnumerable,Ze=Te.splice,yt=Ue?Ue.isConcatSpreadable:o,Rt=Ue?Ue.iterator:o,Yt=Ue?Ue.toStringTag:o,Xt=function(){try{var e=Xi(a,"defineProperty");return e({},"",{}),e}catch(e){}}(),Qt=t.clearTimeout!==Ye.clearTimeout&&t.clearTimeout,Zt=r&&r.now!==Ye.Date.now&&r.now,en=t.setTimeout!==Ye.setTimeout&&t.setTimeout,tn=u.ceil,nn=u.floor,rn=a.getOwnPropertySymbols,on=(Ee=Ee?Ee.isBuffer:o,t.isFinite),ln=Te.join,un=Vt(a.keys,a),an=u.max,sn=u.min,cn=r.now,fn=t.parseInt,dn=u.random,hn=Te.reverse,pn=(r=Xi(t,"DataView"),Xi(t,"Map")),vn=Xi(t,"Promise"),_n=Xi(t,"Set"),gn=(t=Xi(t,"WeakMap"),Xi(a,"create")),mn=t&&new t,yn={},bn=Ao(r),Cn=Ao(pn),Sn=Ao(vn),Tn=Ao(_n),En=Ao(t),An=(Ue=Ue?Ue.prototype:o)?Ue.valueOf:o,wn=Ue?Ue.toString:o;function Rn(e){if(xl(e)&&!Sl(e)&&!(e instanceof xn)){if(e instanceof Pn)return e;if(Ie.call(e,"__wrapped__"))return wo(e)}return new Pn(e)}var In=function(e){return Pl(e)?Ke?Ke(e):(On.prototype=e,e=new On,On.prototype=o,e):{}};function On(){}function kn(){}function Pn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function xn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function Dn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Nn;++t<n;)this.add(e[t])}function Un(e){e=this.__data__=new Mn(e),this.size=e.size}function jn(e,t){var n,r=Sl(e),i=!r&&Cl(e),o=!r&&!i&&wl(e),l=!r&&!i&&!o&&ql(e),u=r||i||o||l,a=u?kt(e.length,Ce):[],s=a.length;for(n in e)!t&&!Ie.call(e,n)||u&&("length"==n||o&&("offset"==n||"parent"==n)||l&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||io(n,s))||a.push(n);return a}function Fn(e){var t=e.length;return t?e[Nr(0,t-1)]:o}function qn(e,t){return Co(vi(e),Kn(t,0,e.length))}function Hn(e){return Co(vi(e))}function Vn(e,t,n){(n===o||ml(e[t],n))&&(n!==o||t in e)||$n(e,t,n)}function Wn(e,t,n){var r=e[t];Ie.call(e,t)&&ml(r,n)&&(n!==o||t in e)||$n(e,t,n)}function Gn(e,t){for(var n=e.length;n--;)if(ml(e[n][0],t))return n;return-1}function Bn(e,t,n,r){return er(e,(function(e,i,o){t(r,e,n(e),o)})),r}function zn(e,t){return e&&_i(t,au(t),e)}function $n(e,t,n){"__proto__"==t&&Xt?Xt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Jn(e,t){for(var r=-1,i=t.length,l=n(i),u=null==e;++r<i;)l[r]=u?o:ru(e,t[r]);return l}function Kn(e,t,n){return e==e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=t<=e?e:t)),e}function Yn(e,t,n,r,i,l){var u,s=1&t,c=2&t,f=4&t;if((u=n?i?n(e,r,i,l):n(e):u)===o){if(!Pl(e))return e;var d;if(r=Sl(e)){if(u=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ie.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return vi(e,u)}else{var h=eo(e),p=h==b||h==C;if(wl(e))return si(e,s);if(h==E||h==v||p&&!i){if(u=c||p?{}:no(e),!s)return c?(_=p=e,_=(d=u)&&_i(_,su(_),d),_i(p,Zi(p),_)):(p=zn(u,d=e),_i(d,Qi(d),p))}else{if(!Ge[h])return i?e:{};u=function(e,t,n){var r=e.constructor;switch(t){case P:return ci(e);case g:case m:return new r(+e);case x:return function(e,t){return t=t?ci(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength)}(e,n);case D:case M:case N:case L:case U:case j:case F:case q:case H:return fi(e,n);case S:return new r;case T:case I:return new r(e);case w:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case R:return new r;case O:return function(e){return An?a(An.call(e)):{}}(e)}}(e,h,s)}}var _=(l=l||new Un).get(e);if(_)return _;l.set(e,u),Ul(e)?e.forEach((function(r){u.add(Yn(r,t,n,r,e,l))})):Dl(e)&&e.forEach((function(r,i){u.set(i,Yn(r,t,n,i,e,l))}));var y=r?o:(f?c?Gi:Wi:c?su:au)(e);at(y||e,(function(r,i){y&&(r=e[i=r]),Wn(u,i,Yn(r,t,n,i,e,l))}))}return u}function Xn(e,t,n){var r=n.length;if(null==e)return!r;for(e=a(e);r--;){var i=n[r],l=t[i],u=e[i];if(u===o&&!(i in e)||!l(u))return!1}return!0}function Qn(e,t,n){if("function"!=typeof e)throw new Se(s);return go((function(){e.apply(o,n)}),t)}function Zn(e,t,n,r){var i=-1,o=dt,l=!0,u=e.length,a=[],s=t.length;if(u){n&&(t=pt(t,xt(n))),r?(o=ht,l=!1):200<=t.length&&(o=Mt,l=!1,t=new Ln(t));e:for(;++i<u;){var c=e[i],f=null==n?c:n(c);c=r||0!==c?c:0;if(l&&f==f){for(var d=s;d--;)if(t[d]===f)continue e;a.push(c)}else o(t,f,r)||a.push(c)}}return a}Rn.templateSettings={escape:K,evaluate:Y,interpolate:X,variable:"",imports:{_:Rn}},(Rn.prototype=kn.prototype).constructor=Rn,(Pn.prototype=In(kn.prototype)).constructor=Pn,(xn.prototype=In(kn.prototype)).constructor=xn,Dn.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Dn.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Dn.prototype.get=function(e){var t,n=this.__data__;return gn?(t=n[e])===c?o:t:Ie.call(n,e)?n[e]:o},Dn.prototype.has=function(e){var t=this.__data__;return gn?t[e]!==o:Ie.call(t,e)},Dn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=gn&&t===o?c:t,this},Mn.prototype.clear=function(){this.__data__=[],this.size=0},Mn.prototype.delete=function(e){var t=this.__data__;return!((e=Gn(t,e))<0||(e==t.length-1?t.pop():Ze.call(t,e,1),--this.size,0))},Mn.prototype.get=function(e){var t=this.__data__;return(e=Gn(t,e))<0?o:t[e][1]},Mn.prototype.has=function(e){return-1<Gn(this.__data__,e)},Mn.prototype.set=function(e,t){var n=this.__data__,r=Gn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Nn.prototype.clear=function(){this.size=0,this.__data__={hash:new Dn,map:new(pn||Mn),string:new Dn}},Nn.prototype.delete=function(e){return e=Ki(this,e).delete(e),this.size-=e?1:0,e},Nn.prototype.get=function(e){return Ki(this,e).get(e)},Nn.prototype.has=function(e){return Ki(this,e).has(e)},Nn.prototype.set=function(e,t){var n=Ki(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ln.prototype.add=Ln.prototype.push=function(e){return this.__data__.set(e,c),this},Ln.prototype.has=function(e){return this.__data__.has(e)},Un.prototype.clear=function(){this.__data__=new Mn,this.size=0},Un.prototype.delete=function(e){var t=this.__data__;e=t.delete(e);return this.size=t.size,e},Un.prototype.get=function(e){return this.__data__.get(e)},Un.prototype.has=function(e){return this.__data__.has(e)},Un.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Mn){var r=n.__data__;if(!pn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Nn(r)}return n.set(e,t),this.size=n.size,this};var er=yi(ar),tr=yi(sr,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var l,u,a=e[r],s=t(a);null!=s&&(l===o?s==s&&!Fl(s):n(s,l))&&(l=s,u=a)}return u}function ir(e,t){var n=[];return er(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function or(e,t,n,r,i){var o=-1,l=e.length;for(n=n||ro,i=i||[];++o<l;){var u=e[o];0<t&&n(u)?1<t?or(u,t-1,n,r,i):vt(i,u):r||(i[i.length]=u)}return i}var lr=bi(),ur=bi(!0);function ar(e,t){return e&&lr(e,t,au)}function sr(e,t){return e&&ur(e,t,au)}function cr(e,t){return ft(t,(function(t){return Il(e[t])}))}function fr(e,t){for(var n=0,r=(t=oi(t,e)).length;null!=e&&n<r;)e=e[Eo(t[n++])];return n&&n==r?e:o}function dr(e,t,n){return t=t(e),Sl(e)?t:vt(t,n(e))}function hr(e){if(null==e)return e===o?"[object Undefined]":"[object Null]";if(Yt&&Yt in a(e)){var t=e,n=Ie.call(t,Yt),r=t[Yt];try{t[Yt]=o;var i=!0}catch(e){}var l=Pe.call(t);return i&&(n?t[Yt]=r:delete t[Yt]),l}return Pe.call(e)}function pr(e,t){return t<e}function vr(e,t){return null!=e&&Ie.call(e,t)}function _r(e,t){return null!=e&&t in a(e)}function gr(e,t,r){for(var i=r?ht:dt,l=e[0].length,u=e.length,a=u,s=n(u),c=1/0,f=[];a--;){var d=e[a];a&&t&&(d=pt(d,xt(t))),c=sn(d.length,c),s[a]=!r&&(t||120<=l&&120<=d.length)?new Ln(a&&d):o}d=e[0];var h=-1,p=s[0];e:for(;++h<l&&f.length<c;){var v=d[h],_=t?t(v):v;v=r||0!==v?v:0;if(!(p?Mt(p,_):i(f,_,r))){for(a=u;--a;){var g=s[a];if(!(g?Mt(g,_):i(e[a],_,r)))continue e}p&&p.push(_),f.push(v)}}return f}function mr(e,t,n){return null==(t=null==(e=po(e,t=oi(t,e)))?e:e[Eo(Po(t))])?o:lt(t,e,n)}function yr(e){return xl(e)&&hr(e)==v}function br(e,t,n,r,i){if(e===t)return!0;if(null==e||null==t||!xl(e)&&!xl(t))return e!=e&&t!=t;var l=br,u=Sl(e),a=Sl(t),s=u?_:eo(e),c=(a=a?_:eo(t),(s=s==v?E:s)==E),f=(a=a==v?E:a)==E;if((a=s==a)&&wl(e)){if(!wl(t))return!1;c=!(u=!0)}if(a&&!c){if(i=i||new Un,u||ql(e))return Hi(e,t,n,r,l,i);var d=e,h=t,p=n,b=r,C=l,A=i;switch(s){case x:if(d.byteLength!=h.byteLength||d.byteOffset!=h.byteOffset)return!1;d=d.buffer,h=h.buffer;case P:return!(d.byteLength!=h.byteLength||!C(new Fe(d),new Fe(h)));case g:case m:case T:return ml(+d,+h);case y:return d.name==h.name&&d.message==h.message;case w:case I:return d==h+"";case S:var k=Ht;case R:var D=1&p;return k=k||Gt,d.size==h.size||D?(D=A.get(d))?D==h:(p|=2,A.set(d,h),D=Hi(k(d),k(h),p,b,C,A),A.delete(d),D):!1;case O:if(An)return An.call(d)==An.call(h)}return!1}if(!(1&n)&&(u=c&&Ie.call(e,"__wrapped__"),s=f&&Ie.call(t,"__wrapped__"),u||s))return l(c=u?e.value():e,f=s?t.value():t,n,r,i=i||new Un);if(a){var M=e,N=t,L=n,U=r,j=l,F=i=i||new Un,q=1&L,H=Wi(M),V=H.length;if(V!=(u=Wi(N).length)&&!q)return!1;for(var W=V;W--;){var G=H[W];if(!(q?G in N:Ie.call(N,G)))return!1}if(u=F.get(M),s=F.get(N),u&&s)return u==N&&s==M;for(var B=!0,z=(F.set(M,N),F.set(N,M),q);++W<V;){var $,J=M[G=H[W]],K=N[G];if(!(($=U?q?U(K,J,G,N,M,F):U(J,K,G,M,N,F):$)===o?J===K||j(J,K,L,U,F):$)){B=!1;break}z=z||"constructor"==G}return B&&!z&&((u=M.constructor)!=(s=N.constructor)&&"constructor"in M&&"constructor"in N&&!("function"==typeof u&&u instanceof u&&"function"==typeof s&&s instanceof s)&&(B=!1)),F.delete(M),F.delete(N),B}return!1}function Cr(e,t,n,r){var i=n.length,l=i,u=!r;if(null==e)return!l;for(e=a(e);i--;){var s=n[i];if(u&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<l;){var c=(s=n[i])[0],f=e[c],d=s[1];if(u&&s[2]){if(f===o&&!(c in e))return!1}else{var h,p=new Un;if(!((h=r?r(f,d,c,e,t,p):h)===o?br(d,f,3,r,p):h))return!1}}return!0}function Sr(e){return!(!Pl(e)||(t=e,ke&&ke in t))&&(Il(e)?Me:ve).test(Ao(e));var t}function Tr(e){return"function"==typeof e?e:null==e?Mu:"object"==typeof e?Sl(e)?Ir(e[0],e[1]):Rr(e):Wu(e)}function Er(e){if(!so(e))return un(e);var t,n=[];for(t in a(e))Ie.call(e,t)&&"constructor"!=t&&n.push(t);return n}function Ar(e,t){return e<t}function wr(e,t){var r=-1,i=El(e)?n(e.length):[];return er(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Rr(e){var t=Yi(e);return 1==t.length&&t[0][2]?fo(t[0][0],t[0][1]):function(n){return n===e||Cr(n,e,t)}}function Ir(e,t){return lo(e)&&co(t)?fo(Eo(e),t):function(n){var r=ru(n,e);return r===o&&r===t?iu(n,e):br(t,r,3)}}function Or(e,t,n,r,i){e!==t&&lr(t,(function(l,u){var a,s,c,f,d,h,p,v,_,g,m,y,b;i=i||new Un,Pl(l)?(s=t,f=n,d=Or,h=r,p=i,m=vo(a=e,c=u),y=vo(s,c),(b=p.get(y))||((s=(b=h?h(m,y,c+"",a,s,p):o)===o)&&(_=!(v=Sl(y))&&wl(y),g=!v&&!_&&ql(y),b=y,v||_||g?b=Sl(m)?m:Al(m)?vi(m):_?si(y,!(s=!1)):g?fi(y,!(s=!1)):[]:Nl(y)||Cl(y)?Cl(b=m)?b=Jl(m):Pl(m)&&!Il(m)||(b=no(y)):s=!1),s&&(p.set(y,b),d(b,y,f,h,p),p.delete(y))),Vn(a,c,b)):(v=r?r(vo(e,u),l,u+"",e,t,i):o,Vn(e,u,v=v===o?l:v))}),su)}function kr(e,t){var n=e.length;if(n)return io(t+=t<0?n:0,n)?e[t]:o}function Pr(e,t,n){t=t.length?pt(t,(function(e){return Sl(e)?function(t){return fr(t,1===e.length?e[0]:e)}:e})):[Mu];var r=-1;t=pt(t,xt(Ji()));var i=wr(e,(function(e,n,i){return{criteria:pt(t,(function(t){return t(e)})),index:++r,value:e}})),o=(e=function(e,t){for(var r=n,i=-1,o=e.criteria,l=t.criteria,u=o.length,a=r.length;++i<u;){var s=di(o[i],l[i]);if(s)return a<=i?s:s*("desc"==r[i]?-1:1)}return e.index-t.index},i.length);for(i.sort(e);o--;)i[o]=i[o].value;return i}function xr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var l=t[r],u=fr(e,l);n(u,l)&&qr(o,oi(l,e),u)}return o}function Dr(e,t,n,r){var i=r?Tt:St,o=-1,l=t.length,u=e;for(e===t&&(t=vi(t)),n&&(u=pt(e,xt(n)));++o<l;)for(var a=0,s=t[o],c=n?n(s):s;-1<(a=i(u,c,a,r));)u!==e&&Ze.call(u,a,1),Ze.call(e,a,1);return e}function Mr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i,o=t[n];n!=r&&o===i||(io(i=o)?Ze.call(e,o,1):Xr(e,o))}}function Nr(e,t){return e+nn(dn()*(t-e+1))}function Lr(e,t){var n="";if(!(!e||t<1||d<t))for(;t%2&&(n+=e),(t=nn(t/2))&&(e+=e),t;);return n}function Ur(e,t){return mo(ho(e,t,Mu),e+"")}function jr(e){return Fn(gu(e))}function Fr(e,t){return Co(e=gu(e),Kn(t,0,e.length))}function qr(e,t,n,r){if(Pl(e))for(var i=-1,l=(t=oi(t,e)).length,u=l-1,a=e;null!=a&&++i<l;){var s,c=Eo(t[i]),f=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;i!=u&&(s=a[c],(f=r?r(s,c,a):o)===o&&(f=Pl(s)?s:io(t[i+1])?[]:{})),Wn(a,c,f),a=a[c]}return e}var Hr=mn?function(e,t){return mn.set(e,t),e}:Mu;Ue=Xt?function(e,t){return Xt(e,"toString",{configurable:!0,enumerable:!1,value:Pu(t),writable:!0})}:Mu;function Vr(e){return Co(gu(e))}function Wr(e,t,r){for(var i=-1,o=e.length,l=((r=o<r?o:r)<0&&(r+=o),o=r<(t=t<0?o<-t?0:o+t:t)?0:r-t>>>0,t>>>=0,n(o));++i<o;)l[i]=e[i+t];return l}function Gr(e,t){var n;return er(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Br(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,l=e[o];null!==l&&!Fl(l)&&(n?l<=t:l<t)?r=1+o:i=o}return i}return zr(e,t,Mu,n)}function zr(e,t,n,r){var i=0,l=null==e?0:e.length;if(0===l)return 0;for(var u=(t=n(t))!=t,a=null===t,s=Fl(t),c=t===o;i<l;){var f=nn((i+l)/2),d=n(e[f]),h=d!==o,p=null===d,v=d==d,_=Fl(d);(v=u?r||v:c?v&&(r||h):a?v&&h&&(r||!p):s?v&&h&&!p&&(r||!_):!p&&!_&&(r?d<=t:d<t))?i=f+1:l=f}return sn(l,4294967294)}function $r(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var l,u=e[n],a=t?t(u):u;n&&ml(a,l)||(l=a,o[i++]=0===u?0:u)}return o}function Jr(e){return"number"==typeof e?e:Fl(e)?NaN:+e}function Kr(e){if("string"==typeof e)return e;if(Sl(e))return pt(e,Kr)+"";if(Fl(e))return wn?wn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Yr(e,t,n){var r=-1,i=dt,o=e.length,l=!0,u=[],a=u;if(n)l=!1,i=ht;else if(200<=o){var s=t?null:Ni(e);if(s)return Gt(s);l=!1,i=Mt,a=new Ln}else a=t?[]:u;e:for(;++r<o;){var c=e[r],f=t?t(c):c;c=n||0!==c?c:0;if(l&&f==f){for(var d=a.length;d--;)if(a[d]===f)continue e;t&&a.push(f),u.push(c)}else i(a,f,n)||(a!==u&&a.push(f),u.push(c))}return u}function Xr(e,t){return null==(e=po(e,t=oi(t,e)))||delete e[Eo(Po(t))]}function Qr(e,t,n,r){return qr(e,t,n(fr(e,t)),r)}function Zr(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Wr(e,r?0:o,r?o+1:i):Wr(e,r?o+1:0,r?i:o)}function ei(e,t){var n=e;return _t(t,(function(e,t){return t.func.apply(t.thisArg,vt([e],t.args))}),n=e instanceof xn?e.value():n)}function ti(e,t,r){var i=e.length;if(i<2)return i?Yr(e[0]):[];for(var o=-1,l=n(i);++o<i;)for(var u=e[o],a=-1;++a<i;)a!=o&&(l[o]=Zn(l[o]||u,e[a],t,r));return Yr(or(l,1),t,r)}function ni(e,t,n){for(var r=-1,i=e.length,l=t.length,u={};++r<i;){var a=r<l?t[r]:o;n(u,e[r],a)}return u}function ri(e){return Al(e)?e:[]}function ii(e){return"function"==typeof e?e:Mu}function oi(e,t){return Sl(e)?e:lo(e,t)?[e]:To(Kl(e))}var li=Ur;function ui(e,t,n){var r=e.length;return n=n===o?r:n,!t&&r<=n?e:Wr(e,t,n)}var ai=Qt||function(e){return Ye.clearTimeout(e)};function si(e,t){return t?e.slice():(t=e.length,t=Be?Be(t):new e.constructor(t),e.copy(t),t)}function ci(e){var t=new e.constructor(e.byteLength);return new Fe(t).set(new Fe(e)),t}function fi(e,t){return t=t?ci(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)}function di(e,t){if(e!==t){var n=e!==o,r=null===e,i=e==e,l=Fl(e),u=t!==o,a=null===t,s=t==t,c=Fl(t);if(!a&&!c&&!l&&t<e||l&&u&&s&&!a&&!c||r&&u&&s||!n&&s||!i)return 1;if(!r&&!l&&!c&&e<t||c&&n&&i&&!r&&!l||a&&n&&i||!u&&i||!s)return-1}return 0}function hi(e,t,r,i){for(var o=-1,l=e.length,u=r.length,a=-1,s=t.length,c=an(l-u,0),f=n(s+c),d=!i;++a<s;)f[a]=t[a];for(;++o<u;)(d||o<l)&&(f[r[o]]=e[o]);for(;c--;)f[a++]=e[o++];return f}function pi(e,t,r,i){for(var o=-1,l=e.length,u=-1,a=r.length,s=-1,c=t.length,f=an(l-a,0),d=n(f+c),h=!i;++o<f;)d[o]=e[o];for(var p=o;++s<c;)d[p+s]=t[s];for(;++u<a;)(h||o<l)&&(d[p+r[u]]=e[o++]);return d}function vi(e,t){var r=-1,i=e.length;for(t=t||n(i);++r<i;)t[r]=e[r];return t}function _i(e,t,n,r){for(var i=!n,l=(n=n||{},-1),u=t.length;++l<u;){var a=t[l],s=r?r(n[a],e[a],a,n,e):o;(i?$n:Wn)(n,a,s=s===o?e[a]:s)}return n}function gi(e,t){return function(n,r){var i=Sl(n)?ut:Bn,o=t?t():{};return i(n,e,Ji(r,2),o)}}function mi(e){return Ur((function(t,n){var r=-1,i=n.length,l=1<i?n[i-1]:o,u=2<i?n[2]:o;l=3<e.length&&"function"==typeof l?(i--,l):o;for(u&&oo(n[0],n[1],u)&&(l=i<3?o:l,i=1),t=a(t);++r<i;){var s=n[r];s&&e(t,s,r,l)}return t}))}function yi(e,t){return function(n,r){if(null!=n){if(!El(n))return e(n,r);for(var i=n.length,o=t?i:-1,l=a(n);(t?o--:++o<i)&&!1!==r(l[o],o,l););}return n}}function bi(e){return function(t,n,r){for(var i=-1,o=a(t),l=r(t),u=l.length;u--;){var s=l[e?u:++i];if(!1===n(o[s],s,o))break}return t}}function Ci(e){return function(t){var n=(r=qt(t=Kl(t))?zt(t):o)?r[0]:t.charAt(0),r=r?ui(r,1).join(""):t.slice(1);return n[e]()+r}}function Si(e){return function(t){return _t(Iu(bu(t).replace(Ne,"")),e,"")}}function Ti(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=In(e.prototype),r=e.apply(n,t);return Pl(r)?r:n}}function Ei(e){return function(t,n,r){var i,l=a(t);return-1<(n=(El(t)||(i=Ji(n,3),t=au(t),n=function(e){return i(l[e],e,l)}),e(t,n,r)))?l[i?t[n]:n]:o}}function Ai(e){return Vi((function(t){var n=t.length,r=n,i=Pn.prototype.thru;for(e&&t.reverse();r--;){var l=t[r];if("function"!=typeof l)throw new Se(s);i&&!c&&"wrapper"==zi(l)&&(c=new Pn([],!0))}for(r=c?r:n;++r<n;)var u=zi(l=t[r]),a="wrapper"==u?Bi(l):o,c=a&&uo(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?c[zi(a[0])].apply(c,a[3]):1==l.length&&uo(l)?c[u]():c.thru(l);return function(){var e=arguments,r=e[0];if(c&&1==e.length&&Sl(r))return c.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function wi(e,t,r,i,l,u,a,s,c,f){var d=128&t,h=1&t,p=2&t,v=24&t,_=512&t,g=p?o:Ti(e);return function m(){for(var y=n(T=arguments.length),b=T;b--;)y[b]=arguments[b];if(v&&(S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(y,C=$i(m))),i&&(y=hi(y,i,l,v)),u&&(y=pi(y,u,a,v)),T-=S,v&&T<f)return S=Wt(y,C),Di(e,t,wi,m.placeholder,r,y,S,s,c,f-T);var C=h?r:this,S=p?C[e]:e,T=y.length;return s?y=function(e,t){for(var n=e.length,r=sn(t.length,n),i=vi(e);r--;){var l=t[r];e[r]=io(l,n)?i[l]:o}return e}(y,s):_&&1<T&&y.reverse(),d&&c<T&&(y.length=c),(S=this&&this!==Ye&&this instanceof m?g||Ti(S):S).apply(C,y)}}function Ri(e,t){return function(n,r){return n=n,i=e,o=t(r),l={},ar(n,(function(e,t,n){i(l,o(e),t,n)})),l;var i,o,l}}function Ii(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;r="string"==typeof n||"string"==typeof r?(n=Kr(n),Kr(r)):(n=Jr(n),Jr(r)),i=e(n,r)}return i}}function Oi(e){return Vi((function(t){return t=pt(t,xt(Ji())),Ur((function(n){var r=this;return e(t,(function(e){return lt(e,r,n)}))}))}))}function ki(e,t){var n=(t=t===o?" ":Kr(t)).length;return n<2?n?Lr(t,e):t:(n=Lr(t,tn(e/Bt(t))),qt(t)?ui(zt(n),0,e).join(""):n.slice(0,e))}function Pi(e){return function(t,r,i){i&&"number"!=typeof i&&oo(t,r,i)&&(r=i=o),t=Gl(t),r===o?(r=t,t=0):r=Gl(r);for(var l=t,u=i=i===o?t<r?1:-1:Gl(i),a=e,s=-1,c=an(tn((r-l)/(u||1)),0),f=n(c);c--;)f[a?c:++s]=l,l+=u;return f}}function xi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=$l(t),n=$l(n)),e(t,n)}}function Di(e,t,n,r,i,l,u,a,s,c){var f=8&t;4&(t=(t|(f?32:64))&~(f?64:32))||(t&=-4),i=[e,t,i,f?l:o,f?u:o,f?o:l,f?o:u,a,s,c],l=n.apply(o,i);return uo(e)&&_o(l,i),l.placeholder=r,yo(l,e,t)}function Mi(e){var t=u[e];return function(e,n){var r;return e=$l(e),(n=null==n?0:sn(Bl(n),292))&&on(e)?(r=(Kl(e)+"e").split("e"),+((r=(Kl(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))):t(e)}}var Ni=_n&&1/Gt(new _n([,-0]))[1]==1/0?function(e){return new _n(e)}:Fu;function Li(e){return function(t){var n,r,i,o=eo(t);return o==S?Ht(t):o==R?(o=t,n=-1,r=Array(o.size),o.forEach((function(e){r[++n]=[e,e]})),r):pt(e(i=t),(function(e){return[e,i[e]]}))}}function Ui(e,t,r,i,l,u,a,c){var d=2&t;if(!d&&"function"!=typeof e)throw new Se(s);var h,p,v,_,g,m,y,b,C,S,T=i?i.length:0,E=(T||(t&=-97,i=l=o),a=a===o?a:an(Bl(a),0),c=c===o?c:Bl(c),T-=l?l.length:0,64&t&&(A=i,h=l,i=l=o),d?o:Bi(e)),A=[e,t,r,i,l,A,h,u,a,c];return E&&(h=E,g=(_=(a=(u=A)[1])|(v=h[1]))<131,m=128==v&&8==a||128==v&&256==a&&u[7].length<=h[8]||384==v&&h[7].length<=h[8]&&8==a,(g||m)&&(1&v&&(u[2]=h[2],_|=1&a?0:4),(g=h[3])&&(p=u[3],u[3]=p?hi(p,g,h[4]):g,u[4]=p?Wt(u[3],f):h[4]),(g=h[5])&&(p=u[5],u[5]=p?pi(p,g,h[6]):g,u[6]=p?Wt(u[5],f):h[6]),(g=h[7])&&(u[7]=g),128&v&&(u[8]=null==u[8]?h[8]:sn(u[8],h[8])),null==u[9]&&(u[9]=h[9]),u[0]=h[0],u[1]=_)),e=A[0],t=A[1],r=A[2],i=A[3],l=A[4],!(c=A[9]=A[9]===o?d?0:e.length:an(A[9]-T,0))&&24&t&&(t&=-25),m=t&&1!=t?8==t||16==t?function(e,t,r){var i=Ti(e);return function l(){for(var u=arguments.length,a=n(u),s=u,c=$i(l);s--;)a[s]=arguments[s];return(u-=(c=u<3&&a[0]!==c&&a[u-1]!==c?[]:Wt(a,c)).length)<r?Di(e,t,wi,l.placeholder,o,a,c,o,o,r-u):lt(this&&this!==Ye&&this instanceof l?i:e,this,a)}}(e,t,c):32!=t&&33!=t||l.length?wi.apply(o,A):function(e,t,r,i){var o=1&t,l=Ti(e);return function t(){for(var u=-1,a=arguments.length,s=-1,c=i.length,f=n(c+a),d=this&&this!==Ye&&this instanceof t?l:e;++s<c;)f[s]=i[s];for(;a--;)f[s++]=arguments[++u];return lt(d,o?r:this,f)}}(e,t,r,i):(b=r,C=1&t,S=Ti(y=e),function e(){return(this&&this!==Ye&&this instanceof e?S:y).apply(C?b:this,arguments)}),yo((E?Hr:_o)(m,A),e,t)}function ji(e,t,n,r){return e===o||ml(e,Ae[n])&&!Ie.call(r,n)?t:e}function Fi(e,t,n,r,i,l){return Pl(e)&&Pl(t)&&(l.set(t,e),Or(e,t,o,Fi,l),l.delete(t)),e}function qi(e){return Nl(e)?o:e}function Hi(e,t,n,r,i,l){var u=1&n,a=e.length;if(a!=(s=t.length)&&!(u&&a<s))return!1;var s=l.get(e),c=l.get(t);if(s&&c)return s==t&&c==e;var f=-1,d=!0,h=2&n?new Ln:o;for(l.set(e,t),l.set(t,e);++f<a;){var p,v=e[f],_=t[f];if((p=r?u?r(_,v,f,t,e,l):r(v,_,f,e,t,l):p)!==o){if(p)continue;d=!1;break}if(h){if(!mt(t,(function(e,t){return!Mt(h,t)&&(v===e||i(v,e,n,r,l))&&h.push(t)}))){d=!1;break}}else if(v!==_&&!i(v,_,n,r,l)){d=!1;break}}return l.delete(e),l.delete(t),d}function Vi(e){return mo(ho(e,o,Oo),e+"")}function Wi(e){return dr(e,au,Qi)}function Gi(e){return dr(e,su,Zi)}var Bi=mn?function(e){return mn.get(e)}:Fu;function zi(e){for(var t=e.name+"",n=yn[t],r=Ie.call(yn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function $i(e){return(Ie.call(Rn,"placeholder")?Rn:e).placeholder}function Ji(){var e=(e=Rn.iteratee||Nu)===Nu?Tr:e;return arguments.length?e(arguments[0],arguments[1]):e}function Ki(e,t){var n,r;e=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?e["string"==typeof t?"string":"hash"]:e.map}function Yi(e){for(var t=au(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,co(i)]}return t}function Xi(e,t){return t=t,Sr(e=null==(e=e)?o:e[t])?e:o}var Qi=rn?function(e){return null==e?[]:(e=a(e),ft(rn(e),(function(t){return Xe.call(e,t)})))}:zu,Zi=rn?function(e){for(var t=[];e;)vt(t,Qi(e)),e=Je(e);return t}:zu,eo=hr;function to(e,t,n){for(var r=-1,i=(t=oi(t,e)).length,o=!1;++r<i;){var l=Eo(t[r]);if(!(o=null!=e&&n(e,l)))break;e=e[l]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&kl(i)&&io(l,i)&&(Sl(e)||Cl(e))}function no(e){return"function"!=typeof e.constructor||so(e)?{}:In(Je(e))}function ro(e){return Sl(e)||Cl(e)||!!(yt&&e&&e[yt])}function io(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&ge.test(e))&&-1<e&&e%1==0&&e<t}function oo(e,t,n){var r;if(Pl(n))return("number"==(r=typeof t)?El(n)&&io(t,n.length):"string"==r&&t in n)&&ml(n[t],e)}function lo(e,t){var n;if(!Sl(e))return"number"==(n=typeof e)||"symbol"==n||"boolean"==n||null==e||Fl(e)||Z.test(e)||!Q.test(e)||null!=t&&e in a(t)}function uo(e){var t=zi(e),n=Rn[t];if("function"==typeof n&&t in xn.prototype)return e===n?1:(t=Bi(n))&&e===t[0]}(r&&eo(new r(new ArrayBuffer(1)))!=x||pn&&eo(new pn)!=S||vn&&eo(vn.resolve())!=A||_n&&eo(new _n)!=R||t&&eo(new t)!=k)&&(eo=function(e){var t=hr(e);if(e=(e=t==E?e.constructor:o)?Ao(e):"")switch(e){case bn:return x;case Cn:return S;case Sn:return A;case Tn:return R;case En:return k}return t});var ao=we?Il:$u;function so(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ae)}function co(e){return e==e&&!Pl(e)}function fo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==o||e in a(n))}}function ho(e,t,r){return t=an(t===o?e.length-1:t,0),function(){for(var i=arguments,o=-1,l=an(i.length-t,0),u=n(l);++o<l;)u[o]=i[t+o];o=-1;for(var a=n(t+1);++o<t;)a[o]=i[o];return a[t]=r(u),lt(e,this,a)}}function po(e,t){return t.length<2?e:fr(e,Wr(t,0,-1))}function vo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _o=bo(Hr),go=en||function(e,t){return Ye.setTimeout(e,t)},mo=bo(Ue);function yo(e,t,n){var r,i;return mo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(1<n?"& ":"")+t[r],t=t.join(2<n?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(t=t+"",(r=(e=(e=t).match(le))?e[1].split(ue):[],i=n,at(p,(function(e){var t="_."+e[0];i&e[1]&&!dt(r,t)&&r.push(t)})),r.sort())))}function bo(e){var t=0,n=0;return function(){var r=cn(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Co(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var l=Nr(n,i),u=e[l];e[l]=e[n],e[n]=u}return e.length=t,e}So=(Qt=hl(Qt=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,(function(e,n,r,i){t.push(r?i.replace(ce,"$1"):n||e)})),t},(function(e){return 500===So.size&&So.clear(),e}))).cache;var So,To=Qt;function Eo(e){if("string"==typeof e||Fl(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ao(e){if(null!=e){try{return Re.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function wo(e){if(e instanceof xn)return e.clone();var t=new Pn(e.__wrapped__,e.__chain__);return t.__actions__=vi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ro(e,t,n){var r=null==e?0:e.length;return r?((n=null==n?0:Bl(n))<0&&(n=an(r+n,0)),Ct(e,Ji(t,3),n)):-1}function Io(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=Bl(n),i=n<0?an(r+i,0):sn(i,r-1)),Ct(e,Ji(t,3),i,!0)}function Oo(e){return null!=e&&e.length?or(e,1):[]}function ko(e){return e&&e.length?e[0]:o}function Po(e){var t=null==e?0:e.length;return t?e[t-1]:o}function xo(e,t){return e&&e.length&&t&&t.length?Dr(e,t):e}r=Ur((function(e,t){return Al(e)?Zn(e,or(t,1,Al,!0)):[]})),vn=Ur((function(e,t){var n=Po(t);return Al(n)&&(n=o),Al(e)?Zn(e,or(t,1,Al,!0),Ji(n,2)):[]})),t=Ur((function(e,t){var n=Po(t);return Al(n)&&(n=o),Al(e)?Zn(e,or(t,1,Al,!0),o,n):[]})),we=Ur((function(e){var t=pt(e,ri);return t.length&&t[0]===e[0]?gr(t):[]})),en=Ur((function(e){var t=Po(e),n=pt(e,ri);return t===Po(n)?t=o:n.pop(),n.length&&n[0]===e[0]?gr(n,Ji(t,2)):[]})),Ue=Ur((function(e){var t=Po(e),n=pt(e,ri);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?gr(n,o,t):[]})),Qt=Ur(xo);var Do=Vi((function(e,t){var n=null==e?0:e.length,r=Jn(e,t);return Mr(e,pt(t,(function(e){return io(e,n)?+e:e})).sort(di)),r}));function Mo(e){return null==e?e:hn.call(e)}var No=Ur((function(e){return Yr(or(e,1,Al,!0))})),Lo=Ur((function(e){var t=Po(e);return Al(t)&&(t=o),Yr(or(e,1,Al,!0),Ji(t,2))})),Uo=Ur((function(e){var t="function"==typeof(t=Po(e))?t:o;return Yr(or(e,1,Al,!0),o,t)}));function jo(e){if(!e||!e.length)return[];var t=0;return e=ft(e,(function(e){return Al(e)&&(t=an(e.length,t),1)})),kt(t,(function(t){return pt(e,wt(t))}))}function Fo(e,t){return e&&e.length?(e=jo(e),null==t?e:pt(e,(function(e){return lt(t,o,e)}))):[]}var qo=Ur((function(e,t){return Al(e)?Zn(e,t):[]})),Ho=Ur((function(e){return ti(ft(e,Al))})),Vo=Ur((function(e){var t=Po(e);return Al(t)&&(t=o),ti(ft(e,Al),Ji(t,2))})),Wo=Ur((function(e){var t="function"==typeof(t=Po(e))?t:o;return ti(ft(e,Al),o,t)})),Go=Ur(jo),Bo=Ur((function(e){var t="function"==typeof(t=1<(t=e.length)?e[t-1]:o)?(e.pop(),t):o;return Fo(e,t)}));function zo(e){return(e=Rn(e)).__chain__=!0,e}function $o(e,t){return t(e)}var Jo=Vi((function(e){function t(t){return Jn(t,e)}var n=e.length,r=n?e[0]:0,i=this.__wrapped__;return!(1<n||this.__actions__.length)&&i instanceof xn&&io(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:$o,args:[t],thisArg:o}),new Pn(i,this.__chain__).thru((function(e){return n&&!e.length&&e.push(o),e}))):this.thru(t)})),Ko=gi((function(e,t,n){Ie.call(e,n)?++e[n]:$n(e,n,1)})),Yo=Ei(Ro),Xo=Ei(Io);function Qo(e,t){return(Sl(e)?at:er)(e,Ji(t,3))}function Zo(e,t){return(Sl(e)?st:tr)(e,Ji(t,3))}var el=gi((function(e,t,n){Ie.call(e,n)?e[n].push(t):$n(e,n,[t])})),tl=Ur((function(e,t,r){var i=-1,o="function"==typeof t,l=El(e)?n(e.length):[];return er(e,(function(e){l[++i]=o?lt(t,e,r):mr(e,t,r)})),l})),nl=gi((function(e,t,n){$n(e,n,t)}));function rl(e,t){return(Sl(e)?pt:wr)(e,Ji(t,3))}var il=gi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),ol=Ur((function(e,t){if(null==e)return[];var n=t.length;return 1<n&&oo(e,t[0],t[1])?t=[]:2<n&&oo(t[0],t[1],t[2])&&(t=[t[0]]),Pr(e,or(t,1),[])})),ll=Zt||function(){return Ye.Date.now()};function ul(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,Ui(e,128,o,o,o,o,t)}function al(e,t){var n;if("function"!=typeof t)throw new Se(s);return e=Bl(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var sl=Ur((function(e,t,n){var r,i=1;return n.length&&(r=Wt(n,$i(sl)),i|=32),Ui(e,i,t,n,r)})),cl=Ur((function(e,t,n){var r,i=3;return n.length&&(r=Wt(n,$i(cl)),i|=32),Ui(t,i,e,n,r)}));function fl(e,t,n){var r,i,l,u,a,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new Se(s);function v(t){var n=r,l=i;return r=i=o,f=t,u=e.apply(l,n)}function _(e){var n=e-c;return c===o||t<=n||n<0||h&&l<=e-f}function g(){var e,n=ll();if(_(n))return m(n);a=go(g,(e=t-((n=n)-c),h?sn(e,l-(n-f)):e))}function m(e){return a=o,p&&r?v(e):(r=i=o,u)}function y(){var e=ll(),n=_(e);if(r=arguments,i=this,c=e,n){if(a===o)return f=e=c,a=go(g,t),d?v(e):u;if(h)return ai(a),a=go(g,t),v(c)}return a===o&&(a=go(g,t)),u}return t=$l(t)||0,Pl(n)&&(d=!!n.leading,l=(h="maxWait"in n)?an($l(n.maxWait)||0,t):l,p="trailing"in n?!!n.trailing:p),y.cancel=function(){a!==o&&ai(a),f=0,r=c=i=a=o},y.flush=function(){return a===o?u:m(ll())},y}Zt=Ur((function(e,t){return Qn(e,1,t)}));var dl=Ur((function(e,t,n){return Qn(e,$l(t)||0,n)}));function hl(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Se(s);function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=e.apply(this,r),n.cache=o.set(i,r)||o,r)}return n.cache=new(hl.Cache||Nn),n}function pl(e){if("function"!=typeof e)throw new Se(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}hl.Cache=Nn;li=li((function(e,t){var n=(t=1==t.length&&Sl(t[0])?pt(t[0],xt(Ji())):pt(or(t,1),xt(Ji()))).length;return Ur((function(r){for(var i=-1,o=sn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return lt(e,this,r)}))}));var vl=Ur((function(e,t){var n=Wt(t,$i(vl));return Ui(e,32,o,t,n)})),_l=Ur((function(e,t){var n=Wt(t,$i(_l));return Ui(e,64,o,t,n)})),gl=Vi((function(e,t){return Ui(e,256,o,o,o,t)}));function ml(e,t){return e===t||e!=e&&t!=t}var yl=xi(pr),bl=xi((function(e,t){return t<=e})),Cl=yr(function(){return arguments}())?yr:function(e){return xl(e)&&Ie.call(e,"callee")&&!Xe.call(e,"callee")},Sl=n.isArray,Tl=et?xt(et):function(e){return xl(e)&&hr(e)==P};function El(e){return null!=e&&kl(e.length)&&!Il(e)}function Al(e){return xl(e)&&El(e)}var wl=Ee||$u;Ee=tt?xt(tt):function(e){return xl(e)&&hr(e)==m};function Rl(e){if(!xl(e))return!1;var t=hr(e);return t==y||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Nl(e)}function Il(e){return!!Pl(e)&&((e=hr(e))==b||e==C||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function Ol(e){return"number"==typeof e&&e==Bl(e)}function kl(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=d}function Pl(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function xl(e){return null!=e&&"object"==typeof e}var Dl=nt?xt(nt):function(e){return xl(e)&&eo(e)==S};function Ml(e){return"number"==typeof e||xl(e)&&hr(e)==T}function Nl(e){return!(!xl(e)||hr(e)!=E)&&(null===(e=Je(e))||"function"==typeof(e=Ie.call(e,"constructor")&&e.constructor)&&e instanceof e&&Re.call(e)==xe)}var Ll=rt?xt(rt):function(e){return xl(e)&&hr(e)==w},Ul=it?xt(it):function(e){return xl(e)&&eo(e)==R};function jl(e){return"string"==typeof e||!Sl(e)&&xl(e)&&hr(e)==I}function Fl(e){return"symbol"==typeof e||xl(e)&&hr(e)==O}var ql=ot?xt(ot):function(e){return xl(e)&&kl(e.length)&&!!We[hr(e)]},Hl=xi(Ar),Vl=xi((function(e,t){return e<=t}));function Wl(e){if(!e)return[];if(El(e))return(jl(e)?zt:vi)(e);if(Rt&&e[Rt]){for(var t,n=e[Rt](),r=[];!(t=n.next()).done;)r.push(t.value);return r}var i=eo(e);return(i==S?Ht:i==R?Gt:gu)(e)}function Gl(e){return e?(e=$l(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Bl(e){var t=(e=Gl(e))%1;return e==e?t?e-t:e:0}function zl(e){return e?Kn(Bl(e),0,h):0}function $l(e){if("number"==typeof e)return e;if(Fl(e))return NaN;if("string"!=typeof(e=Pl(e)?Pl(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=Pt(e);var t=pe.test(e);return t||_e.test(e)?$e(e.slice(2),t?2:8):he.test(e)?NaN:+e}function Jl(e){return _i(e,su(e))}function Kl(e){return null==e?"":Kr(e)}var Yl=mi((function(e,t){if(so(t)||El(t))_i(t,au(t),e);else for(var n in t)Ie.call(t,n)&&Wn(e,n,t[n])})),Xl=mi((function(e,t){_i(t,su(t),e)})),Ql=mi((function(e,t,n,r){_i(t,su(t),e,r)})),Zl=mi((function(e,t,n,r){_i(t,au(t),e,r)})),eu=Vi(Jn),tu=Ur((function(e,t){e=a(e);var n=-1,r=t.length,i=2<r?t[2]:o;for(i&&oo(t[0],t[1],i)&&(r=1);++n<r;)for(var l=t[n],u=su(l),s=-1,c=u.length;++s<c;){var f=u[s],d=e[f];(d===o||ml(d,Ae[f])&&!Ie.call(e,f))&&(e[f]=l[f])}return e})),nu=Ur((function(e){return e.push(o,Fi),lt(fu,o,e)}));function ru(e,t,n){return(e=null==e?o:fr(e,t))===o?n:e}function iu(e,t){return null!=e&&to(e,t,_r)}var ou=Ri((function(e,t,n){e[t=null!=t&&"function"!=typeof t.toString?Pe.call(t):t]=n}),Pu(Mu)),lu=Ri((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Pe.call(t)),Ie.call(e,t)?e[t].push(n):e[t]=[n]}),Ji),uu=Ur(mr);function au(e){return(El(e)?jn:Er)(e)}function su(e){return El(e)?jn(e,!0):function(e){if(!Pl(e)){var t=e,n=[];if(null!=t)for(var r in a(t))n.push(r);return n}var i,o=so(e),l=[];for(i in e)("constructor"!=i||!o&&Ie.call(e,i))&&l.push(i);return l}(e)}var cu=mi((function(e,t,n){Or(e,t,n)})),fu=mi((function(e,t,n,r){Or(e,t,n,r)})),du=Vi((function(e,t){var n={};if(null!=e)for(var r=!1,i=(t=pt(t,(function(t){return t=oi(t,e),r=r||1<t.length,t})),_i(e,Gi(e),n),r&&(n=Yn(n,7,qi)),t.length);i--;)Xr(n,t[i]);return n})),hu=Vi((function(e,t){return null==e?{}:xr(n=e,t,(function(e,t){return iu(n,t)}));var n}));function pu(e,t){if(null==e)return{};var n=pt(Gi(e),(function(e){return[e]}));return t=Ji(t),xr(e,n,(function(e,n){return t(e,n[0])}))}var vu=Li(au),_u=Li(su);function gu(e){return null==e?[]:Dt(e,au(e))}var mu=Si((function(e,t,n){return t=t.toLowerCase(),e+(n?yu(t):t)}));function yu(e){return Ru(Kl(e).toLowerCase())}function bu(e){return(e=Kl(e))&&e.replace(me,Ut).replace(Le,"")}var Cu=Si((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Su=Si((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Tu=Ci("toLowerCase"),Eu=Si((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Au=Si((function(e,t,n){return e+(n?" ":"")+Ru(t)})),wu=Si((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ru=Ci("toUpperCase");function Iu(e,t,n){return e=Kl(e),(t=n?o:t)===o?(n=e,qe.test(n)?e.match(je)||[]:e.match(ae)||[]):e.match(t)||[]}var Ou=Ur((function(e,t){try{return lt(e,o,t)}catch(e){return Rl(e)?e:new i(e)}})),ku=Vi((function(e,t){return at(t,(function(t){t=Eo(t),$n(e,t,sl(e[t],e))})),e}));function Pu(e){return function(){return e}}var xu=Ai(),Du=Ai(!0);function Mu(e){return e}function Nu(e){return Tr("function"==typeof e?e:Yn(e,1))}var Lu=Ur((function(e,t){return function(n){return mr(n,e,t)}})),Uu=Ur((function(e,t){return function(n){return mr(e,n,t)}}));function ju(e,t,n){var r=au(t),i=cr(t,r),o=(null!=n||Pl(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=cr(t,au(t))),!(Pl(n)&&"chain"in n&&!n.chain)),l=Il(e);return at(i,(function(n){var r=t[n];e[n]=r,l&&(e.prototype[n]=function(){var t,n=this.__chain__;return o||n?(((t=e(this.__wrapped__)).__actions__=vi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),t.__chain__=n,t):r.apply(e,vt([this.value()],arguments))})})),e}function Fu(){}var qu=Oi(pt),Hu=Oi(ct),Vu=Oi(mt);function Wu(e){return lo(e)?wt(Eo(e)):(t=e,function(e){return fr(e,t)});var t}var Gu=Pi(),Bu=Pi(!0);function zu(){return[]}function $u(){return!1}var Ju,Ku=Ii((function(e,t){return e+t}),0),Yu=Mi("ceil"),Xu=Ii((function(e,t){return e/t}),1),Qu=Mi("floor"),Zu=Ii((function(e,t){return e*t}),1),ea=Mi("round"),ta=Ii((function(e,t){return e-t}),0);return Rn.after=function(e,t){if("function"!=typeof t)throw new Se(s);return e=Bl(e),function(){if(--e<1)return t.apply(this,arguments)}},Rn.ary=ul,Rn.assign=Yl,Rn.assignIn=Xl,Rn.assignInWith=Ql,Rn.assignWith=Zl,Rn.at=eu,Rn.before=al,Rn.bind=sl,Rn.bindAll=ku,Rn.bindKey=cl,Rn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Sl(e)?e:[e]},Rn.chain=zo,Rn.chunk=function(e,t,r){t=(r?oo(e,t,r):t===o)?1:an(Bl(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var l=0,u=0,a=n(tn(i/t));l<i;)a[u++]=Wr(e,l,l+=t);return a},Rn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Rn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return vt(Sl(r)?vi(r):[r],or(t,1))},Rn.cond=function(e){var t=null==e?0:e.length,n=Ji();return e=t?pt(e,(function(e){if("function"!=typeof e[1])throw new Se(s);return[n(e[0]),e[1]]})):[],Ur((function(n){for(var r=-1;++r<t;){var i=e[r];if(lt(i[0],this,n))return lt(i[1],this,n)}}))},Rn.conforms=function(e){return t=Yn(e,1),n=au(t),function(e){return Xn(e,t,n)};var t,n},Rn.constant=Pu,Rn.countBy=Ko,Rn.create=function(e,t){return e=In(e),null==t?e:zn(e,t)},Rn.curry=function e(t,n,r){return(t=Ui(t,8,o,o,o,o,o,n=r?o:n)).placeholder=e.placeholder,t},Rn.curryRight=function e(t,n,r){return(t=Ui(t,16,o,o,o,o,o,n=r?o:n)).placeholder=e.placeholder,t},Rn.debounce=fl,Rn.defaults=tu,Rn.defaultsDeep=nu,Rn.defer=Zt,Rn.delay=dl,Rn.difference=r,Rn.differenceBy=vn,Rn.differenceWith=t,Rn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,(t=n||t===o?1:Bl(t))<0?0:t,r):[]},Rn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,0,(t=r-(t=n||t===o?1:Bl(t)))<0?0:t):[]},Rn.dropRightWhile=function(e,t){return e&&e.length?Zr(e,Ji(t,3),!0,!0):[]},Rn.dropWhile=function(e,t){return e&&e.length?Zr(e,Ji(t,3),!0):[]},Rn.fill=function(e,t,n,r){if(!(s=null==e?0:e.length))return[];n&&"number"!=typeof n&&oo(e,t,n)&&(n=0,r=s);var i=e,l=t,u=n,a=r,s=i.length;for((u=Bl(u))<0&&(u=s<-u?0:s+u),(a=a===o||s<a?s:Bl(a))<0&&(a+=s),a=a<u?0:zl(a);u<a;)i[u++]=l;return i},Rn.filter=function(e,t){return(Sl(e)?ft:ir)(e,Ji(t,3))},Rn.flatMap=function(e,t){return or(rl(e,t),1)},Rn.flatMapDeep=function(e,t){return or(rl(e,t),1/0)},Rn.flatMapDepth=function(e,t,n){return n=n===o?1:Bl(n),or(rl(e,t),n)},Rn.flatten=Oo,Rn.flattenDeep=function(e){return null!=e&&e.length?or(e,1/0):[]},Rn.flattenDepth=function(e,t){return null!=e&&e.length?or(e,t=t===o?1:Bl(t)):[]},Rn.flip=function(e){return Ui(e,512)},Rn.flow=xu,Rn.flowRight=Du,Rn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Rn.functions=function(e){return null==e?[]:cr(e,au(e))},Rn.functionsIn=function(e){return null==e?[]:cr(e,su(e))},Rn.groupBy=el,Rn.initial=function(e){return null!=e&&e.length?Wr(e,0,-1):[]},Rn.intersection=we,Rn.intersectionBy=en,Rn.intersectionWith=Ue,Rn.invert=ou,Rn.invertBy=lu,Rn.invokeMap=tl,Rn.iteratee=Nu,Rn.keyBy=nl,Rn.keys=au,Rn.keysIn=su,Rn.map=rl,Rn.mapKeys=function(e,t){var n={};return t=Ji(t,3),ar(e,(function(e,r,i){$n(n,t(e,r,i),e)})),n},Rn.mapValues=function(e,t){var n={};return t=Ji(t,3),ar(e,(function(e,r,i){$n(n,r,t(e,r,i))})),n},Rn.matches=function(e){return Rr(Yn(e,1))},Rn.matchesProperty=function(e,t){return Ir(e,Yn(t,1))},Rn.memoize=hl,Rn.merge=cu,Rn.mergeWith=fu,Rn.method=Lu,Rn.methodOf=Uu,Rn.mixin=ju,Rn.negate=pl,Rn.nthArg=function(e){return e=Bl(e),Ur((function(t){return kr(t,e)}))},Rn.omit=du,Rn.omitBy=function(e,t){return pu(e,pl(Ji(t)))},Rn.once=function(e){return al(2,e)},Rn.orderBy=function(e,t,n,r){return null==e?[]:Pr(e,t=Sl(t)?t:null==t?[]:[t],n=Sl(n=r?o:n)?n:null==n?[]:[n])},Rn.over=qu,Rn.overArgs=li,Rn.overEvery=Hu,Rn.overSome=Vu,Rn.partial=vl,Rn.partialRight=_l,Rn.partition=il,Rn.pick=hu,Rn.pickBy=pu,Rn.property=Wu,Rn.propertyOf=function(e){return function(t){return null==e?o:fr(e,t)}},Rn.pull=Qt,Rn.pullAll=xo,Rn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Dr(e,t,Ji(n,2)):e},Rn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Dr(e,t,o,n):e},Rn.pullAt=Do,Rn.range=Gu,Rn.rangeRight=Bu,Rn.rearg=gl,Rn.reject=function(e,t){return(Sl(e)?ft:ir)(e,pl(Ji(t,3)))},Rn.remove=function(e,t){var n=[];if(e&&e.length){var r=-1,i=[],o=e.length;for(t=Ji(t,3);++r<o;){var l=e[r];t(l,r,e)&&(n.push(l),i.push(r))}Mr(e,i)}return n},Rn.rest=function(e,t){if("function"!=typeof e)throw new Se(s);return Ur(e,t=t===o?t:Bl(t))},Rn.reverse=Mo,Rn.sampleSize=function(e,t,n){return t=(n?oo(e,t,n):t===o)?1:Bl(t),(Sl(e)?qn:Fr)(e,t)},Rn.set=function(e,t,n){return null==e?e:qr(e,t,n)},Rn.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:qr(e,t,n,r)},Rn.shuffle=function(e){return(Sl(e)?Hn:Vr)(e)},Rn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n=n&&"number"!=typeof n&&oo(e,t,n)?(t=0,r):(t=null==t?0:Bl(t),n===o?r:Bl(n)),Wr(e,t,n)):[]},Rn.sortBy=ol,Rn.sortedUniq=function(e){return e&&e.length?$r(e):[]},Rn.sortedUniqBy=function(e,t){return e&&e.length?$r(e,Ji(t,2)):[]},Rn.split=function(e,t,n){return n&&"number"!=typeof n&&oo(e,t,n)&&(t=n=o),(n=n===o?h:n>>>0)?(e=Kl(e))&&("string"==typeof t||null!=t&&!Ll(t))&&!(t=Kr(t))&&qt(e)?ui(zt(e),0,n):e.split(t,n):[]},Rn.spread=function(e,t){if("function"!=typeof e)throw new Se(s);return t=null==t?0:an(Bl(t),0),Ur((function(n){var r=n[t];n=ui(n,0,t);return r&&vt(n,r),lt(e,this,n)}))},Rn.tail=function(e){var t=null==e?0:e.length;return t?Wr(e,1,t):[]},Rn.take=function(e,t,n){return e&&e.length?Wr(e,0,(t=n||t===o?1:Bl(t))<0?0:t):[]},Rn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Wr(e,(t=r-(t=n||t===o?1:Bl(t)))<0?0:t,r):[]},Rn.takeRightWhile=function(e,t){return e&&e.length?Zr(e,Ji(t,3),!1,!0):[]},Rn.takeWhile=function(e,t){return e&&e.length?Zr(e,Ji(t,3)):[]},Rn.tap=function(e,t){return t(e),e},Rn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Se(s);return Pl(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),fl(e,t,{leading:r,maxWait:t,trailing:i})},Rn.thru=$o,Rn.toArray=Wl,Rn.toPairs=vu,Rn.toPairsIn=_u,Rn.toPath=function(e){return Sl(e)?pt(e,Eo):Fl(e)?[e]:vi(To(Kl(e)))},Rn.toPlainObject=Jl,Rn.transform=function(e,t,n){var r,i=Sl(e),o=i||wl(e)||ql(e);return t=Ji(t,4),null==n&&(r=e&&e.constructor,n=o?i?new r:[]:Pl(e)&&Il(r)?In(Je(e)):{}),(o?at:ar)(e,(function(e,r,i){return t(n,e,r,i)})),n},Rn.unary=function(e){return ul(e,1)},Rn.union=No,Rn.unionBy=Lo,Rn.unionWith=Uo,Rn.uniq=function(e){return e&&e.length?Yr(e):[]},Rn.uniqBy=function(e,t){return e&&e.length?Yr(e,Ji(t,2)):[]},Rn.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?Yr(e,o,t):[]},Rn.unset=function(e,t){return null==e||Xr(e,t)},Rn.unzip=jo,Rn.unzipWith=Fo,Rn.update=function(e,t,n){return null==e?e:Qr(e,t,ii(n))},Rn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:Qr(e,t,ii(n),r)},Rn.values=gu,Rn.valuesIn=function(e){return null==e?[]:Dt(e,su(e))},Rn.without=qo,Rn.words=Iu,Rn.wrap=function(e,t){return vl(ii(t),e)},Rn.xor=Ho,Rn.xorBy=Vo,Rn.xorWith=Wo,Rn.zip=Go,Rn.zipObject=function(e,t){return ni(e||[],t||[],Wn)},Rn.zipObjectDeep=function(e,t){return ni(e||[],t||[],qr)},Rn.zipWith=Bo,Rn.entries=vu,Rn.entriesIn=_u,Rn.extend=Xl,Rn.extendWith=Ql,ju(Rn,Rn),Rn.add=Ku,Rn.attempt=Ou,Rn.camelCase=mu,Rn.capitalize=yu,Rn.ceil=Yu,Rn.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=$l(n))==n?n:0),t!==o&&(t=(t=$l(t))==t?t:0),Kn($l(e),t,n)},Rn.clone=function(e){return Yn(e,4)},Rn.cloneDeep=function(e){return Yn(e,5)},Rn.cloneDeepWith=function(e,t){return Yn(e,5,t="function"==typeof t?t:o)},Rn.cloneWith=function(e,t){return Yn(e,4,t="function"==typeof t?t:o)},Rn.conformsTo=function(e,t){return null==t||Xn(e,t,au(t))},Rn.deburr=bu,Rn.defaultTo=function(e,t){return null==e||e!=e?t:e},Rn.divide=Xu,Rn.endsWith=function(e,t,n){e=Kl(e),t=Kr(t);var r=e.length;r=n=n===o?r:Kn(Bl(n),0,r);return 0<=(n-=t.length)&&e.slice(n,r)==t},Rn.eq=ml,Rn.escape=function(e){return(e=Kl(e))&&J.test(e)?e.replace(z,jt):e},Rn.escapeRegExp=function(e){return(e=Kl(e))&&ne.test(e)?e.replace(te,"\\$&"):e},Rn.every=function(e,t,n){return(Sl(e)?ct:nr)(e,Ji(t=n&&oo(e,t,n)?o:t,3))},Rn.find=Yo,Rn.findIndex=Ro,Rn.findKey=function(e,t){return bt(e,Ji(t,3),ar)},Rn.findLast=Xo,Rn.findLastIndex=Io,Rn.findLastKey=function(e,t){return bt(e,Ji(t,3),sr)},Rn.floor=Qu,Rn.forEach=Qo,Rn.forEachRight=Zo,Rn.forIn=function(e,t){return null==e?e:lr(e,Ji(t,3),su)},Rn.forInRight=function(e,t){return null==e?e:ur(e,Ji(t,3),su)},Rn.forOwn=function(e,t){return e&&ar(e,Ji(t,3))},Rn.forOwnRight=function(e,t){return e&&sr(e,Ji(t,3))},Rn.get=ru,Rn.gt=yl,Rn.gte=bl,Rn.has=function(e,t){return null!=e&&to(e,t,vr)},Rn.hasIn=iu,Rn.head=ko,Rn.identity=Mu,Rn.includes=function(e,t,n,r){return e=El(e)?e:gu(e),n=n&&!r?Bl(n):0,r=e.length,n<0&&(n=an(r+n,0)),jl(e)?n<=r&&-1<e.indexOf(t,n):!!r&&-1<St(e,t,n)},Rn.indexOf=function(e,t,n){var r=null==e?0:e.length;return r?St(e,t,n=(n=null==n?0:Bl(n))<0?an(r+n,0):n):-1},Rn.inRange=function(e,t,n){return t=Gl(t),n===o?(n=t,t=0):n=Gl(n),(e=e=$l(e))>=sn(t=t,n=n)&&e<an(t,n)},Rn.invoke=uu,Rn.isArguments=Cl,Rn.isArray=Sl,Rn.isArrayBuffer=Tl,Rn.isArrayLike=El,Rn.isArrayLikeObject=Al,Rn.isBoolean=function(e){return!0===e||!1===e||xl(e)&&hr(e)==g},Rn.isBuffer=wl,Rn.isDate=Ee,Rn.isElement=function(e){return xl(e)&&1===e.nodeType&&!Nl(e)},Rn.isEmpty=function(e){if(null!=e){if(El(e)&&(Sl(e)||"string"==typeof e||"function"==typeof e.splice||wl(e)||ql(e)||Cl(e)))return!e.length;var t,n=eo(e);if(n==S||n==R)return!e.size;if(so(e))return!Er(e).length;for(t in e)if(Ie.call(e,t))return!1}return!0},Rn.isEqual=function(e,t){return br(e,t)},Rn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?br(e,t,o,n):!!r},Rn.isError=Rl,Rn.isFinite=function(e){return"number"==typeof e&&on(e)},Rn.isFunction=Il,Rn.isInteger=Ol,Rn.isLength=kl,Rn.isMap=Dl,Rn.isMatch=function(e,t){return e===t||Cr(e,t,Yi(t))},Rn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,Cr(e,t,Yi(t),n)},Rn.isNaN=function(e){return Ml(e)&&e!=+e},Rn.isNative=function(e){if(ao(e))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Sr(e)},Rn.isNil=function(e){return null==e},Rn.isNull=function(e){return null===e},Rn.isNumber=Ml,Rn.isObject=Pl,Rn.isObjectLike=xl,Rn.isPlainObject=Nl,Rn.isRegExp=Ll,Rn.isSafeInteger=function(e){return Ol(e)&&-d<=e&&e<=d},Rn.isSet=Ul,Rn.isString=jl,Rn.isSymbol=Fl,Rn.isTypedArray=ql,Rn.isUndefined=function(e){return e===o},Rn.isWeakMap=function(e){return xl(e)&&eo(e)==k},Rn.isWeakSet=function(e){return xl(e)&&"[object WeakSet]"==hr(e)},Rn.join=function(e,t){return null==e?"":ln.call(e,t)},Rn.kebabCase=Cu,Rn.last=Po,Rn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;if(n!==o&&(i=(i=Bl(n))<0?an(r+i,0):sn(i,r-1)),t!=t)return Ct(e,Et,i,!0);for(var l=e,u=t,a=i+1;a--;)if(l[a]===u)return a;return a},Rn.lowerCase=Su,Rn.lowerFirst=Tu,Rn.lt=Hl,Rn.lte=Vl,Rn.max=function(e){return e&&e.length?rr(e,Mu,pr):o},Rn.maxBy=function(e,t){return e&&e.length?rr(e,Ji(t,2),pr):o},Rn.mean=function(e){return At(e,Mu)},Rn.meanBy=function(e,t){return At(e,Ji(t,2))},Rn.min=function(e){return e&&e.length?rr(e,Mu,Ar):o},Rn.minBy=function(e,t){return e&&e.length?rr(e,Ji(t,2),Ar):o},Rn.stubArray=zu,Rn.stubFalse=$u,Rn.stubObject=function(){return{}},Rn.stubString=function(){return""},Rn.stubTrue=function(){return!0},Rn.multiply=Zu,Rn.nth=function(e,t){return e&&e.length?kr(e,Bl(t)):o},Rn.noConflict=function(){return Ye._===this&&(Ye._=De),this},Rn.noop=Fu,Rn.now=ll,Rn.pad=function(e,t,n){e=Kl(e);var r=(t=Bl(t))?Bt(e):0;return!t||t<=r?e:ki(nn(t=(t-r)/2),n)+e+ki(tn(t),n)},Rn.padEnd=function(e,t,n){e=Kl(e);var r=(t=Bl(t))?Bt(e):0;return t&&r<t?e+ki(t-r,n):e},Rn.padStart=function(e,t,n){e=Kl(e);var r=(t=Bl(t))?Bt(e):0;return t&&r<t?ki(t-r,n)+e:e},Rn.parseInt=function(e,t,n){return t=n||null==t?0:t&&+t,fn(Kl(e).replace(re,""),t||0)},Rn.random=function(e,t,n){var r;return n&&"boolean"!=typeof n&&oo(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=Gl(e),t===o?(t=e,e=0):t=Gl(t)),t<e&&(r=e,e=t,t=r),n||e%1||t%1?(r=dn(),sn(e+r*(t-e+ze("1e-"+((r+"").length-1))),t)):Nr(e,t)},Rn.reduce=function(e,t,n){var r=Sl(e)?_t:It,i=arguments.length<3;return r(e,Ji(t,4),n,i,er)},Rn.reduceRight=function(e,t,n){var r=Sl(e)?gt:It,i=arguments.length<3;return r(e,Ji(t,4),n,i,tr)},Rn.repeat=function(e,t,n){return t=(n?oo(e,t,n):t===o)?1:Bl(t),Lr(Kl(e),t)},Rn.replace=function(){var e=arguments,t=Kl(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Rn.result=function(e,t,n){var r=-1,i=(t=oi(t,e)).length;for(i||(i=1,e=o);++r<i;){var l=null==e?o:e[Eo(t[r])];l===o&&(r=i,l=n),e=Il(l)?l.call(e):l}return e},Rn.round=ea,Rn.runInContext=e,Rn.sample=function(e){return(Sl(e)?Fn:jr)(e)},Rn.size=function(e){if(null==e)return 0;if(El(e))return jl(e)?Bt(e):e.length;var t=eo(e);return t==S||t==R?e.size:Er(e).length},Rn.snakeCase=Eu,Rn.some=function(e,t,n){return(Sl(e)?mt:Gr)(e,Ji(t=n&&oo(e,t,n)?o:t,3))},Rn.sortedIndex=function(e,t){return Br(e,t)},Rn.sortedIndexBy=function(e,t,n){return zr(e,t,Ji(n,2))},Rn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Br(e,t);if(r<n&&ml(e[r],t))return r}return-1},Rn.sortedLastIndex=function(e,t){return Br(e,t,!0)},Rn.sortedLastIndexBy=function(e,t,n){return zr(e,t,Ji(n,2),!0)},Rn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Br(e,t,!0)-1;if(ml(e[n],t))return n}return-1},Rn.startCase=Au,Rn.startsWith=function(e,t,n){return e=Kl(e),n=null==n?0:Kn(Bl(n),0,e.length),t=Kr(t),e.slice(n,n+t.length)==t},Rn.subtract=ta,Rn.sum=function(e){return e&&e.length?Ot(e,Mu):0},Rn.sumBy=function(e,t){return e&&e.length?Ot(e,Ji(t,2)):0},Rn.template=function(e,t,n){var r,u,a=Rn.templateSettings;n&&oo(e,t,n)&&(t=o),e=Kl(e),t=Ql({},t,a,ji);var s=au(n=Ql({},t.imports,a.imports,ji)),c=Dt(n,s),f=0,d=(a=t.interpolate||ye,"__p += '"),h=(n=ie((t.escape||ye).source+"|"+a.source+"|"+(a===X?fe:ye).source+"|"+(t.evaluate||ye).source+"|$","g"),"//# sourceURL="+(Ie.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ve+"]")+"\n");if(e.replace(n,(function(t,n,i,o,l,a){return i=i||o,d+=e.slice(f,a).replace(be,Ft),n&&(r=!0,d+="' +\n__e("+n+") +\n'"),l&&(u=!0,d+="';\n"+l+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),f=a+t.length,t})),d+="';\n",a=Ie.call(t,"variable")&&t.variable){if(se.test(a))throw new i("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";if(d=(u?d.replace(V,""):d).replace(W,"$1").replace(G,"$1;"),d="function("+(a||"obj")+") {\n"+(a?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}",(n=Ou((function(){return l(s,h+"return "+d).apply(o,c)}))).source=d,Rl(n))throw n;return n},Rn.times=function(e,t){if((e=Bl(e))<1||d<e)return[];var n=h,r=sn(e,h);for(r=(t=Ji(t),e-=h,kt(r,t));++n<e;)t(n);return r},Rn.toFinite=Gl,Rn.toInteger=Bl,Rn.toLength=zl,Rn.toLower=function(e){return Kl(e).toLowerCase()},Rn.toNumber=$l,Rn.toSafeInteger=function(e){return e?Kn(Bl(e),-d,d):0===e?e:0},Rn.toString=Kl,Rn.toUpper=function(e){return Kl(e).toUpperCase()},Rn.trim=function(e,t,n){return(e=Kl(e))&&(n||t===o)?Pt(e):e&&(t=Kr(t))?ui(n=zt(e),Nt(n,e=zt(t)),Lt(n,e)+1).join(""):e},Rn.trimEnd=function(e,t,n){return(e=Kl(e))&&(n||t===o)?e.slice(0,$t(e)+1):e&&(t=Kr(t))?ui(n=zt(e),0,Lt(n,zt(t))+1).join(""):e},Rn.trimStart=function(e,t,n){return(e=Kl(e))&&(n||t===o)?e.replace(re,""):e&&(t=Kr(t))?ui(n=zt(e),Nt(n,zt(t))).join(""):e},Rn.truncate=function(e,t){var n,r=30,i="...";Pl(t)&&(n="separator"in t?t.separator:n,r="length"in t?Bl(t.length):r,i="omission"in t?Kr(t.omission):i),t=(e=Kl(e)).length;if((t=qt(e)?(l=zt(e)).length:t)<=r)return e;if((t=r-Bt(i))<1)return i;var l;r=l?ui(l,0,t).join(""):e.slice(0,t);if(n!==o)if(l&&(t+=r.length-t),Ll(n)){if(e.slice(t).search(n)){var u,a=r;for((n=n.global?n:ie(n.source,Kl(de.exec(n))+"g")).lastIndex=0;u=n.exec(a);)var s=u.index;r=r.slice(0,s===o?t:s)}}else e.indexOf(Kr(n),t)==t||-1<(l=r.lastIndexOf(n))&&(r=r.slice(0,l));return r+i},Rn.unescape=function(e){return(e=Kl(e))&&$.test(e)?e.replace(B,Jt):e},Rn.uniqueId=function(e){var t=++Oe;return Kl(e)+t},Rn.upperCase=wu,Rn.upperFirst=Ru,Rn.each=Qo,Rn.eachRight=Zo,Rn.first=ko,ju(Rn,(Ju={},ar(Rn,(function(e,t){Ie.call(Rn.prototype,t)||(Ju[t]=e)})),Ju),{chain:!1}),Rn.VERSION="4.17.21",at(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Rn[e].placeholder=Rn})),at(["drop","take"],(function(e,t){xn.prototype[e]=function(n){n=n===o?1:an(Bl(n),0);var r=this.__filtered__&&!t?new xn(this):this.clone();return r.__filtered__?r.__takeCount__=sn(n,r.__takeCount__):r.__views__.push({size:sn(n,h),type:e+(r.__dir__<0?"Right":"")}),r},xn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),at(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;xn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ji(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),at(["head","last"],(function(e,t){var n="take"+(t?"Right":"");xn.prototype[e]=function(){return this[n](1).value()[0]}})),at(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");xn.prototype[e]=function(){return this.__filtered__?new xn(this):this[n](1)}})),xn.prototype.compact=function(){return this.filter(Mu)},xn.prototype.find=function(e){return this.filter(e).head()},xn.prototype.findLast=function(e){return this.reverse().find(e)},xn.prototype.invokeMap=Ur((function(e,t){return"function"==typeof e?new xn(this):this.map((function(n){return mr(n,e,t)}))})),xn.prototype.reject=function(e){return this.filter(pl(Ji(e)))},xn.prototype.slice=function(e,t){e=Bl(e);var n=this;return n.__filtered__&&(0<e||t<0)?new xn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o?(t=Bl(t))<0?n.dropRight(-t):n.take(t-e):n)},xn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},xn.prototype.toArray=function(){return this.take(h)},ar(xn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Rn[r?"take"+("last"==t?"Right":""):t],l=r||/^find/.test(t);i&&(Rn.prototype[t]=function(){function t(e){return e=i.apply(Rn,vt([e],s)),r&&h?e[0]:e}var u,a=this.__wrapped__,s=r?[1]:arguments,c=a instanceof xn,f=s[0],d=c||Sl(a),h=(d&&n&&"function"==typeof f&&1!=f.length&&(c=d=!1),this.__chain__),p=(f=!!this.__actions__.length,l&&!h);c=c&&!f;return!l&&d?(a=c?a:new xn(this),(u=e.apply(a,s)).__actions__.push({func:$o,args:[t],thisArg:o}),new Pn(u,h)):p&&c?e.apply(this,s):(u=this.thru(t),p?r?u.value()[0]:u.value():u)})})),at(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Te[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Rn.prototype[e]=function(){var e,i=arguments;return r&&!this.__chain__?(e=this.value(),t.apply(Sl(e)?e:[],i)):this[n]((function(e){return t.apply(Sl(e)?e:[],i)}))}})),ar(xn.prototype,(function(e,t){var n,r=Rn[t];r&&(n=r.name+"",Ie.call(yn,n)||(yn[n]=[]),yn[n].push({name:t,func:r}))})),yn[wi(o,2).name]=[{name:"wrapper",func:o}],xn.prototype.clone=function(){var e=new xn(this.__wrapped__);return e.__actions__=vi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=vi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=vi(this.__views__),e},xn.prototype.reverse=function(){var e;return this.__filtered__?((e=new xn(this)).__dir__=-1,e.__filtered__=!0):(e=this.clone()).__dir__*=-1,e},xn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Sl(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],l=o.size;switch(o.type){case"drop":e+=l;break;case"dropRight":t-=l;break;case"take":t=sn(t,e+l);break;case"takeRight":e=an(e,t-l)}}return{start:e,end:t}}(0,i,this.__views__),l=o.start,u=(o=o.end)-l,a=r?o:l-1,s=this.__iteratees__,c=s.length,f=0,d=sn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return ei(e,this.__actions__);var h=[];e:for(;u--&&f<d;){for(var p=-1,v=e[a+=t];++p<c;){var _=(g=s[p]).iteratee,g=g.type;_=_(v);if(2==g)v=_;else if(!_){if(1==g)continue e;break e}}h[f++]=v}return h},Rn.prototype.at=Jo,Rn.prototype.chain=function(){return zo(this)},Rn.prototype.commit=function(){return new Pn(this.value(),this.__chain__)},Rn.prototype.next=function(){this.__values__===o&&(this.__values__=Wl(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},Rn.prototype.plant=function(e){for(var t,n=this;n instanceof kn;){var r=wo(n),i=(r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r,r);n=n.__wrapped__}return i.__wrapped__=e,t},Rn.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof xn?(e=e,(e=(e=this.__actions__.length?new xn(this):e).reverse()).__actions__.push({func:$o,args:[Mo],thisArg:o}),new Pn(e,this.__chain__)):this.thru(Mo)},Rn.prototype.toJSON=Rn.prototype.valueOf=Rn.prototype.value=function(){return ei(this.__wrapped__,this.__actions__)},Rn.prototype.first=Rn.prototype.head,Rt&&(Rn.prototype[Rt]=function(){return this}),Rn}();Ye._=Kt,(i=function(){return Kt}.call(t,n,t,r))!==o&&(r.exports=i)}).call(this)}).call(this,n(81),n(387)(e))},function(e,t,n){e.exports=!n(8)&&!n(3)((function(){return 7!=Object.defineProperty(n(82)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){t.f=n(6)},function(e,t,n){var r=n(20),i=n(21),o=n(66)(!1),l=n(84)("IE_PROTO");e.exports=function(e,t){var n,u=i(e),a=0,s=[];for(n in u)n!=l&&r(u,n)&&s.push(n);for(;t.length>a;)!r(u,n=t[a++])||~o(s,n)||s.push(n);return s}},function(e,t,n){var r=n(11),i=n(1),o=n(43);e.exports=n(8)?Object.defineProperties:function(e,t){i(e);for(var n,l=o(t),u=l.length,a=0;a<u;)r.f(e,n=l[a++],t[n]);return e}},function(e,t,n){var r=n(21),i=n(46).f,o={}.toString,l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){if(!l||"[object Window]"!=o.call(e))return i(r(e));try{return i(e)}catch(e){return l.slice()}}},function(e,t,n){"use strict";var r=n(8),i=n(43),o=n(67),l=n(62),u=n(12),a=n(61),s=Object.assign;e.exports=!s||n(3)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=s({},e)[n]||Object.keys(s({},t)).join("")!=r}))?function(e,t){for(var n=u(e),s=arguments.length,c=1,f=o.f,d=l.f;c<s;)for(var h,p=a(arguments[c++]),v=f?i(p).concat(f(p)):i(p),_=v.length,g=0;g<_;)h=v[g++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:s},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(15),i=n(4),o=n(123),l=[].slice,u={};e.exports=Function.bind||function(e){var t=r(this),n=l.call(arguments,1),a=function(){var r=n.concat(l.call(arguments));if(this instanceof a){var i=t,s=r.length,c=r;if(!(s in u)){for(var f=[],d=0;d<s;d++)f[d]="a["+d+"]";u[s]=Function("F,a","return new F("+f.join(",")+")")}return u[s](i,c)}return o(t,r,e)};return i(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(2).parseInt,i=n(58).trim,o=(n=n(88),/^[-+]?0[xX]/);e.exports=8!==r(n+"08")||22!==r(n+"0x16")?function(e,t){return e=i(String(e),3),r(e,t>>>0||(o.test(e)?16:10))}:r},function(e,t,n){var r=n(2).parseFloat,i=n(58).trim;e.exports=1/r(n(88)+"-0")!=-1/0?function(e){e=i(String(e),3);var t=r(e);return 0===t&&"-"==e.charAt(0)?-0:t}:r},function(e,t,n){var r=n(26);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(4),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var r=n(91),i=(n=Math.pow)(2,-52),o=n(2,-23),l=n(2,127)*(2-o),u=n(2,-126);e.exports=Math.fround||function(e){var t,n=Math.abs(e);e=r(e);return n<u?e*(n/u/o+1/i-1/i)*u*o:l<(t=(t=(1+o/i)*n)-(t-n))||t!=t?e*(1/0):e*t}},function(e,t,n){var r=n(1);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){throw void 0!==(i=e.return)&&r(i.call(e)),t}}},function(e,t,n){var r=n(15),i=n(12),o=n(61),l=n(7);e.exports=function(e,t,n,u,a){r(t);var s=i(e),c=o(s),f=l(s.length),d=a?f-1:0,h=a?-1:1;if(n<2)for(;;){if(d in c){u=c[d],d+=h;break}if(d+=h,a?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;a?0<=d:d<f;d+=h)d in c&&(u=t(u,c[d],d,s));return u}},function(e,t,n){"use strict";var r=n(12),i=n(44),o=n(7);e.exports=[].copyWithin||function(e,t){var n=r(this),l=o(n.length),u=i(e,l),a=i(t,l),s=(e=2<arguments.length?arguments[2]:void 0,Math.min((void 0===e?l:i(e,l))-a,l-u)),c=1;for(a<u&&u<a+s&&(c=-1,a+=s-1,u+=s-1);0<s--;)a in n?n[u]=n[a]:delete n[u],u+=c,a+=c;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(103);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(8)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(63)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(1),i=n(4),o=n(107);e.exports=function(e,t){return r(e),i(t)&&t.constructor===e?t:((0,(e=o.f(e)).resolve)(t),e.promise)}},function(e,t,n){"use strict";var r=n(139),i=n(51);e.exports=n(75)("Map",(function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}),{get:function(e){return(e=r.getEntry(i(this,"Map"),e))&&e.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";function r(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n}var i=n(11).f,o=n(45),l=n(50),u=n(25),a=n(48),s=n(49),c=n(93),f=n(133),d=n(47),h=n(8),p=n(38).fastKey,v=n(51),_=h?"_s":"size";e.exports={getConstructor:function(e,t,n,c){var f=e((function(e,r){a(e,f,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[_]=0,null!=r&&s(r,n,e[c],e)}));return l(f.prototype,{clear:function(){for(var e=v(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var n,i,o=v(this,t);return(e=r(o,e))&&(n=e.n,i=e.p,delete o._i[e.i],e.r=!0,i&&(i.n=n),n&&(n.p=i),o._f==e&&(o._f=n),o._l==e&&(o._l=i),o[_]--),!!e},forEach:function(e){v(this,t);for(var n,r=u(e,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!r(v(this,t),e)}}),h&&i(f.prototype,"size",{get:function(){return v(this,t)[_]}}),f},def:function(e,t,n){var i,o=r(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:t=e._l,n:void 0,r:!1},e._f||(e._f=o),t&&(t.n=o),e[_]++,"F"!==i&&(e._i[i]=o)),e},getEntry:r,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=v(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?f(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,f(1))}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(139),i=n(51);e.exports=n(75)("Set",(function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";function r(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}var i,o=n(2),l=n(32)(0),u=n(18),a=n(38),s=n(120),c=n(142),f=n(4),d=n(51),h=n(51),p=(o=!o.ActiveXObject&&"ActiveXObject"in o,"WeakMap"),v=a.getWeak,_=Object.isExtensible,g=c.ufstore,m={get:function(e){var t;if(f(e))return!0===(t=v(e))?g(d(this,p)).get(e):t?t[this._i]:void 0},set:function(e,t){return c.def(d(this,p),e,t)}},y=e.exports=n(75)(p,r,m,c,!0,!0);h&&o&&(s((i=c.getConstructor(r,p)).prototype,m),a.NEED=!0,l(["delete","has","get","set"],(function(e){var t=y.prototype,n=t[e];u(t,e,(function(t,r){var o;return f(t)&&!_(t)?(this._f||(this._f=new i),o=this._f[e](t,r),"set"==e?this:o):n.call(this,t,r)}))})))},function(e,t,n){"use strict";function r(e){return e._l||(e._l=new i)}function i(){this.a=[]}function o(e,t){return v(e.a,(function(e){return e[0]===t}))}var l=n(50),u=n(38).getWeak,a=n(1),s=n(4),c=n(48),f=n(49),d=n(32),h=n(20),p=n(51),v=d(5),_=d(6),g=0;i.prototype={get:function(e){if(e=o(this,e))return e[1]},has:function(e){return!!o(this,e)},set:function(e,t){var n=o(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=_(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,i){var o=e((function(e,r){c(e,o,t,"_i"),e._t=t,e._i=g++,e._l=void 0,null!=r&&f(r,n,e[i],e)}));return l(o.prototype,{delete:function(e){if(!s(e))return!1;var n=u(e);return!0===n?r(p(this,t)).delete(e):n&&h(n,this._i)&&delete n[this._i]},has:function(e){if(!s(e))return!1;var n=u(e);return!0===n?r(p(this,t)).has(e):n&&h(n,this._i)}}),o},def:function(e,t,n){var i=u(a(t),!0);return!0===i?r(e).set(t,n):i[e._i]=n,e},ufstore:r}},function(e,t,n){var r=n(27),i=n(7);e.exports=function(e){if(void 0===e)return 0;e=r(e);var t=i(e);if(e!==t)throw RangeError("Wrong length!");return t}},function(e,t,n){var r=n(46),i=n(67),o=n(1);n=n(2).Reflect;e.exports=n&&n.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var r=n(68),i=n(4),o=n(7),l=n(25),u=n(6)("isConcatSpreadable");e.exports=function e(t,n,a,s,c,f,d,h){for(var p,v,_=c,g=0,m=!!d&&l(d,h,3);g<s;){if(g in a){if(p=m?m(a[g],g,n):a[g],v=!1,(v=i(p)?void 0!==(v=p[u])?!!v:r(p):v)&&0<f)_=e(t,n,p,o(p.length),_,f-1)-1;else{if(9007199254740991<=_)throw TypeError();t[_]=p}_++}g++}return _}},function(e,t,n){var r=n(7),i=n(90),o=n(30);e.exports=function(e,t,n,l){var u=(e=String(o(e))).length;n=void 0===n?" ":String(n);return(t=r(t))<=u||""==n?e:(t-=u,(u=i.call(n,Math.ceil(t/n.length))).length>t&&(u=u.slice(0,t)),l?u+e:e+u)}},function(e,t,n){var r=n(8),i=n(43),o=n(21),l=n(62).f;e.exports=function(e){return function(t){for(var n,u=o(t),a=i(u),s=a.length,c=0,f=[];c<s;)n=a[c++],r&&!l.call(u,n)||f.push(e?[n,u[n]]:u[n]);return f}}},function(e,t,n){var r=n(57),i=n(149);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(49);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t){e.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-r)/(n-t)+r}},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";t=(t+=null!=e.raddr?" raddr %s rport %d":"%v%v")+(null!=e.tcptype?" tcptype %s":"%v");return null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return(t+=null!=e.id?"id=%s %s":"%v%s")+(null!=e.mediaClockValue?"=%s":"")+(null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach((function(e){n[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},function(e,t){var n,r;e=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return(n=setTimeout)(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var u,a=[],s=!1,c=-1;function f(){s&&u&&(s=!1,u.length?a=u.concat(a):c=-1,a.length&&d())}function d(){if(!s){for(var e=l(f),t=(s=!0,a.length);t;){for(u=a,a=[];++c<t;)u&&u[c].run();c=-1,t=a.length}u=null,s=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return(r=clearTimeout)(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new h(e,t)),1!==a.length||s||l(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1})}var a=n(368),s=n(111),c=function(){function e(t){o(this,e),this.buffer=[],this.currPos=0,this.size=t}return u(e,[{key:"push",value:function(e){this.buffer.length===this.size?this.buffer[this.currPos]=e:this.buffer.push(e),this.currPos=(this.currPos+1)%this.size}},{key:"gerOrderedData",value:function(){var e=this.buffer.slice(this.currPos),t=this.buffer.slice(0,this.currPos);return[].concat(r(e),r(t))}},{key:"reset",value:function(){this.buffer=[],this.currPos=0}}]),e}();n=new(function(){function e(){o(this,e),s.enable("*"),this.logSettings={console:{enable:!1},blob:{enable:!1,emptyAfterRetrieval:!0}},this.logData=new c(5e3)}return u(e,[{key:"info",value:function(){for(var e=(new Date).toISOString(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._storeToBlob(n,e),this._isConsoleEnabled()&&(n[0]=this._appendDateTime(n[0],e),console.info.apply(this,n))}},{key:"warn",value:function(){for(var e=(new Date).toISOString(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._storeToBlob(n,e),this._isConsoleEnabled()&&(n[0]=this._appendDateTime(n[0],e),console.warn.apply(this,n))}},{key:"error",value:function(){for(var e=(new Date).toISOString(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._storeToBlob(n,e),this._isConsoleEnabled()&&(n[0]=this._appendDateTime(n[0],e),console.error.apply(this,n))}},{key:"updateLogSettings",value:function(e){this.logSettings=e}},{key:"getLogs",value:function(){var e=this.logData.gerOrderedData();return this.logSettings.blob.emptyAfterRetrieval&&this.clearLogs(),e}},{key:"clearLogs",value:function(){this.logData.reset()}},{key:"_appendDateTime",value:function(e,t){if(void 0!==e)return"".concat(t," ").concat(e)}},{key:"_storeToBlob",value:function(e,t){try{var n,r,i,o;this.logSettings.blob.enable&&(n=e.filter((function(e){return"string"!=typeof e||!e.startsWith("color: ")})),i="string"==typeof(r=e[0])?r.replace(/%c/g,"").replace(/%O/g,"%j").replace(/%o/g,"%j"):r,n[0]=i,o=a.format.apply(null,n),this.logData.push("".concat(t," ").concat(o)))}catch(e){console.log("got err",e)}}},{key:"_isConsoleEnabled",value:function(){return this.logSettings.console.enable}}]),e}());e.exports=n},function(e,t,n){"use strict";e.exports={T1:500,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);n=t?(n=s(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this;if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=n(34).EventEmitter,f=n(9),d=n(13),h=n(52),p=n(65),v=n(16),_=n(154),g=n(40),m=n(372),y=n(80),b=n(374),C=n(375),S=n(376),T=n(377),E=n(53),A=new(n=n(14))("JsSIP:RTCSession").debug,w=new n("JsSIP:RTCSession").error,R={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},I=["audio","video"];e.exports=function(){var e=o,t=c;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t);var n,r=a(o);function o(e){var t;if(this instanceof o)return A("new"),(t=r.call(this))._id=null,t._ua=e,t._status=R.STATUS_NULL,t._dialog=null,t._earlyDialogs={},t._contact=null,t._from_tag=null,t._to_tag=null,t._connection=null,t._connectionPromiseQueue=Promise.resolve(),t._request=null,t._is_canceled=!1,t._cancel_reason="",t._is_confirmed=!1,t._late_sdp=!1,t._rtcOfferConstraints=null,t._rtcAnswerConstraints=null,t._localMediaStream=null,t._localMediaStreamLocallyGenerated=!1,t._rtcReady=!0,t._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},t._direction=null,t._local_identity=null,t._remote_identity=null,t._start_time=null,t._end_time=null,t._tones=null,t._audioMuted=!1,t._videoMuted=!1,t._localHold=!1,t._remoteHold=!1,t._sessionTimers={enabled:t._ua.configuration.session_timers,refreshMethod:t._ua.configuration.session_timers_refresh_method,defaultExpires:d.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},t._referSubscribers={},t._data={},t;throw new TypeError("Cannot call a class as a function")}return e=o,t=[{key:"C",get:function(){return R}}],(n=[{key:"C",get:function(){return R}},{key:"causes",get:function(){return d.causes}},{key:"id",get:function(){return this._id}},{key:"connection",get:function(){return this._connection}},{key:"contact",get:function(){return this._contact}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"start_time",get:function(){return this._start_time}},{key:"end_time",get:function(){return this._end_time}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"status",get:function(){return this._status}},{key:"isInProgress",value:function(){switch(this._status){case R.STATUS_NULL:case R.STATUS_INVITE_SENT:case R.STATUS_1XX_RECEIVED:case R.STATUS_INVITE_RECEIVED:case R.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}},{key:"isEstablished",value:function(){switch(this._status){case R.STATUS_ANSWERED:case R.STATUS_WAITING_FOR_ACK:case R.STATUS_CONFIRMED:return!0;default:return!1}}},{key:"isEnded",value:function(){switch(this._status){case R.STATUS_CANCELED:case R.STATUS_TERMINATED:return!0;default:return!1}}},{key:"isMuted",value:function(){return{audio:this._audioMuted,video:this._videoMuted}}},{key:"isOnHold",value:function(){return{local:this._localHold,remote:this._remoteHold}}},{key:"connect",value:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0,i=(A("connect()"),e),o=v.cloneObject(n.eventHandlers),l=v.cloneArray(n.extraHeaders),u=v.cloneObject(n.mediaConstraints,{audio:!0,video:!0}),a=n.mediaStream||null,s=v.cloneObject(n.pcConfig,{iceServers:[]}),c=n.rtcConstraints||null,f=n.rtcOfferConstraints||null;if(this._rtcOfferConstraints=f,this._rtcAnswerConstraints=n.rtcAnswerConstraints||null,this._data=n.data||this._data,void 0===e)throw new TypeError("Not enough arguments");if(this._status!==R.STATUS_NULL)throw new h.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new h.NotSupportedError("WebRTC not supported");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(i));for(t in this._sessionTimers.enabled&&v.isDecimal(n.sessionTimersExpires)&&(n.sessionTimersExpires>=d.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=n.sessionTimersExpires:this._sessionTimers.defaultExpires=d.SESSION_EXPIRES),o)Object.prototype.hasOwnProperty.call(o,t)&&this.on(t,o[t]);this._from_tag=v.newTag();i=n.anonymous||!1;var p={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:i,outbound:!0}),i?(p.from_display_name="Anonymous",p.from_uri=new E("sip","anonymous","anonymous.invalid"),l.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString())),l.push("Privacy: id")):n.fromUserName&&(p.from_uri=new E("sip",n.fromUserName,this._ua.configuration.uri.host),l.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),n.fromDisplayName&&(p.from_display_name=n.fromDisplayName),l.push("Contact: ".concat(this._contact)),l.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&l.push("Session-Expires: ".concat(this._sessionTimers.defaultExpires).concat(this._ua.configuration.session_timers_force_refresher?";refresher=uac":"")),this._request=new g.InitialOutgoingInviteRequest(e,this._ua,p,l),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(s,c),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,r&&r(this),this._newRTCSession("local",this._request,n.isRefer),this._sendInitialRequest(u,f,a)}},{key:"init_incoming",value:function(e,t){var n,r=this,i=(A("init_incoming()"),e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0);e.body&&"application/sdp"!==i?e.reply(415):(this._status=R.STATUS_INVITE_RECEIVED,this._from_tag=e.from_tag,this._id=e.call_id+this._from_tag,this._request=e,this._contact=this._ua.contact.toString(),e.hasHeader("expires")&&(n=1e3*e.getHeader("expires")),e.to_tag=v.newTag(),this._createDialog(e,"UAS",!0)?(e.body?this._late_sdp=!1:this._late_sdp=!0,this._status=R.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout((function(){e.reply(408),r._failed("local",null,d.causes.NO_ANSWER)}),this._ua.configuration.no_answer_timeout),n&&(this._timers.expiresTimer=setTimeout((function(){r._status===R.STATUS_WAITING_FOR_ANSWER&&(e.reply(487),r._failed("system",null,d.causes.EXPIRES))}),n)),this._direction="incoming",this._local_identity=e.to,this._remote_identity=e.from,t&&t(this),this._newRTCSession("remote",e),this._status!==R.STATUS_TERMINATED&&(e.reply(180,null,["Contact: ".concat(this._contact)]),this._progress("local",null))):e.reply(500,"Missing Contact header field"))}},{key:"answer",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(A("answer()"),this._request),r=v.cloneArray(t.extraHeaders),o=v.cloneObject(t.mediaConstraints),l=t.mediaStream||null,u=v.cloneObject(t.pcConfig,{iceServers:[]}),a=t.rtcConstraints||null,s=t.rtcAnswerConstraints||null,c=v.cloneObject(t.rtcOfferConstraints),f=!1,p=!1,_=!1,g=!1;if(this._rtcAnswerConstraints=s,this._rtcOfferConstraints=t.rtcOfferConstraints||null,this._data=t.data||this._data,"incoming"!==this._direction)throw new h.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==R.STATUS_WAITING_FOR_ANSWER)throw new h.InvalidStateError(this._status);if(this._sessionTimers.enabled&&v.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=d.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=t.sessionTimersExpires:this._sessionTimers.defaultExpires=d.SESSION_EXPIRES),this._status=R.STATUS_ANSWERED,this._createDialog(n,"UAS")){clearTimeout(this._timers.userNoAnswerTimer),r.unshift("Contact: ".concat(this._contact));t=n.parseSDP();var m,y=(Array.isArray(t.media)||(t.media=[t.media]),i(t.media));try{for(y.s();!(m=y.n()).done;){var b=m.value;"audio"===b.type&&(f=!0,b.direction&&"sendrecv"!==b.direction||(_=!0)),"video"===b.type&&(p=!0,b.direction&&"sendrecv"!==b.direction||(g=!0))}}catch(t){y.e(t)}finally{y.f()}if(l&&!1===o.audio){var C,S=i(l.getAudioTracks());try{for(S.s();!(C=S.n()).done;){var T=C.value;l.removeTrack(T)}}catch(t){S.e(t)}finally{S.f()}}if(l&&!1===o.video){var E,I=i(l.getVideoTracks());try{for(I.s();!(E=I.n()).done;){var O=E.value;l.removeTrack(O)}}catch(t){I.e(t)}finally{I.f()}}l||void 0!==o.audio||(o.audio=_),l||void 0!==o.video||(o.video=g),l||f||c.offerToReceiveAudio||(o.audio=!1),l||p||c.offerToReceiveVideo||(o.video=!1),this._createRTCConnection(u,a),Promise.resolve().then((function(){return l||(o.audio||o.video?(e._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(o).catch((function(t){if(e._status===R.STATUS_TERMINATED)throw new Error("terminated");throw n.reply(480),e._failed("local",null,d.causes.USER_DENIED_MEDIA_ACCESS),w('emit "getusermediafailed" [error:%o]',t),e.emit("getusermediafailed",t),new Error("getUserMedia() failed")}))):void 0)})).then((function(t){if(e._status===R.STATUS_TERMINATED)throw new Error("terminated");(e._localMediaStream=t)&&(e._connection.addTrack?t.getTracks().forEach((function(n){e._connection.addTrack(n,t)})):e._connection.addStream(t),e.emit("localstream",{stream:t}))})).then((function(){var t,r;if(!e._late_sdp)return t={originator:"remote",type:"offer",sdp:n.body},A('emit "sdp" from answer'),e.emit("sdp",t),r=new RTCSessionDescription({type:"offer",sdp:t.sdp}),e._connectionPromiseQueue=e._connectionPromiseQueue.then((function(){return e._connection.setRemoteDescription(r)})).catch((function(t){throw n.reply(488),e._failed("system",null,d.causes.WEBRTC_ERROR),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),e.emit("peerconnection:setremotedescriptionfailed",t),new Error("peerconnection.setRemoteDescription() failed")})),e._connectionPromiseQueue})).then((function(){if(e._status===R.STATUS_TERMINATED)throw new Error("terminated");return e._connecting(n),(e._late_sdp?e._createLocalDescription("offer",e._rtcOfferConstraints):e._createLocalDescription("answer",s)).catch((function(){throw n.reply(500),new Error("_createLocalDescription() failed")}))})).then((function(t){if(e._status===R.STATUS_TERMINATED)throw new Error("terminated");e._handleSessionTimersInIncomingRequest(n,r),n.reply(200,null,r,t,(function(){e._status=R.STATUS_WAITING_FOR_ACK,e._setInvite2xxTimer(n,t),e._setACKTimer(),e._accepted("local")}),(function(){e._failed("system",null,d.causes.CONNECTION_ERROR)}))})).catch((function(t){e._status!==R.STATUS_TERMINATED&&w(t)}))}else n.reply(500,"Error creating dialog")}},{key:"terminate",value:function(){var e,t,n=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=(A("terminate()"),r.cause||d.causes.BYE),o=v.cloneArray(r.extraHeaders),l=r.body,u=r.status_code,a=r.reason_phrase;if(this._status===R.STATUS_TERMINATED)throw new h.InvalidStateError(this._status);switch(this._status){case R.STATUS_NULL:case R.STATUS_INVITE_SENT:case R.STATUS_1XX_RECEIVED:if(A("canceling session"),u&&(u<200||700<=u))throw new TypeError("Invalid status_code: ".concat(u));u&&(a=a||d.REASON_PHRASE[u]||"",e="SIP ;cause=".concat(u,' ;text="').concat(a,'"')),this._status===R.STATUS_NULL||this._status===R.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=e):this._status===R.STATUS_1XX_RECEIVED&&this._request.cancel(e),this._status=R.STATUS_CANCELED,this._failed("local",null,d.causes.CANCELED);break;case R.STATUS_WAITING_FOR_ANSWER:case R.STATUS_ANSWERED:if(A("rejecting session"),(u=u||480)<300||700<=u)throw new TypeError("Invalid status_code: ".concat(u));this._request.reply(u,a,o,l),this._failed("local",null,d.causes.REJECTED);break;case R.STATUS_WAITING_FOR_ACK:case R.STATUS_CONFIRMED:if(A("terminating session"),a=r.reason_phrase||d.REASON_PHRASE[u]||"",u&&(u<200||700<=u))throw new TypeError("Invalid status_code: ".concat(u));u&&o.push("Reason: SIP ;cause=".concat(u,'; text="').concat(a,'"')),this._status===R.STATUS_WAITING_FOR_ACK&&"incoming"===this._direction&&this._request.server_transaction.state!==p.C.STATUS_TERMINATED?(t=this._dialog,this.receiveRequest=function(e){e.method===d.ACK&&(n.sendRequest(d.BYE,{extraHeaders:o,body:l}),t.terminate())},this._request.server_transaction.on("stateChanged",(function(){n._request.server_transaction.state===p.C.STATUS_TERMINATED&&(n.sendRequest(d.BYE,{extraHeaders:o,body:l}),t.terminate())})),this._ended("local",null,i),this._dialog=t,this._ua.newDialog(t)):(this.sendRequest(d.BYE,{extraHeaders:o,body:l}),this._ended("local",null,i))}}},{key:"sendDTMF",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=(A("sendDTMF() | tones: %s",e),0),r=t.duration||null,i=t.interToneGap||null,o=t.transportType||d.DTMF_TRANSPORT.INFO;if(void 0===e)throw new TypeError("Not enough arguments");if(this._status!==R.STATUS_CONFIRMED&&this._status!==R.STATUS_WAITING_FOR_ACK)throw new h.InvalidStateError(this._status);if(o!==d.DTMF_TRANSPORT.INFO&&o!==d.DTMF_TRANSPORT.RFC2833)throw new TypeError("invalid transportType: ".concat(o));if(!(e="number"==typeof e?e.toString():e)||"string"!=typeof e||!e.match(/^[0-9A-DR#*,]+$/i))throw new TypeError("Invalid tones: ".concat(e));if(r&&!v.isDecimal(r))throw new TypeError("Invalid tone duration: ".concat(r));if(r=r?r<b.C.MIN_DURATION?(A('"duration" value is lower than the minimum allowed, setting it to '.concat(b.C.MIN_DURATION," milliseconds")),b.C.MIN_DURATION):r>b.C.MAX_DURATION?(A('"duration" value is greater than the maximum allowed, setting it to '.concat(b.C.MAX_DURATION," milliseconds")),b.C.MAX_DURATION):Math.abs(r):b.C.DEFAULT_DURATION,t.duration=r,i&&!v.isDecimal(i))throw new TypeError("Invalid interToneGap: ".concat(i));function l(){var e,o,u=this;this._status===R.STATUS_TERMINATED||!this._tones||n>=this._tones.length?this._tones=null:(e=this._tones[n],n+=1,o=","===e?2e3:(o=new b(this),t.eventHandlers={onFailed:function(){u._tones=null}},o.send(e,t),r+i),setTimeout(l.bind(this),o))}i=i?i<b.C.MIN_INTER_TONE_GAP?(A('"interToneGap" value is lower than the minimum allowed, setting it to '.concat(b.C.MIN_INTER_TONE_GAP," milliseconds")),b.C.MIN_INTER_TONE_GAP):Math.abs(i):b.C.DEFAULT_INTER_TONE_GAP,o===d.DTMF_TRANSPORT.RFC2833?(o=this._getDTMFRTPSender())?(e=o.toneBuffer+e,o.insertDTMF(e,r,i)):(A("Sending dtmf using sendDtmfTone"),this._connection.sendDtmfTone(e,r,i)):this._tones?this._tones+=e:(this._tones=e,l.call(this))}},{key:"sendInfo",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(A("sendInfo()"),this._status!==R.STATUS_CONFIRMED&&this._status!==R.STATUS_WAITING_FOR_ACK)throw new h.InvalidStateError(this._status);new C(this).send(e,t,n)}},{key:"mute",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!1},t=(A("mute()"),!1),n=!1;!1===this._audioMuted&&e.audio&&(this._audioMuted=t=!0,this._toggleMuteAudio(!0)),e.video&&(this._videoMuted=n=!0,this._toggleMuteVideo(!0)),!0!==t&&!0!==n||this._onmute({audio:t,video:n})}},{key:"unmute",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!0},t=(A("unmute()"),!1),n=!1;!0===this._audioMuted&&e.audio&&(this._audioMuted=!(t=!0))===this._localHold&&this._toggleMuteAudio(!1),e.video&&(this._videoMuted=!(n=!0))===this._localHold&&this._toggleMuteVideo(!1),!0!==t&&!0!==n||this._onunmute({audio:t,video:n})}},{key:"hold",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;if(A("hold()"),this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!0===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:d.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:"unhold",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;if(A("unhold()"),this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!1===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");var r={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:d.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:t.extraHeaders}),!0}},{key:"renegotiate",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0,r=(A("renegotiate()"),t.rtcOfferConstraints||null);if(this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!this._isReadyToReOffer())return!1;var i={succeeded:function(){n&&n()},failed:function(){e.terminate({cause:d.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return t.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:i,rtcOfferConstraints:r,extraHeaders:t.extraHeaders}):this._sendReinvite({eventHandlers:i,rtcOfferConstraints:r,extraHeaders:t.extraHeaders}),!0}},{key:"refer",value:function(e,t){var n=this,r=(A("refer()"),e);if(this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(r));var i=((r=new T(this)).sendRefer(e,t),r.id);return(this._referSubscribers[i]=r).on("requestFailed",(function(){delete n._referSubscribers[i]})),r.on("accepted",(function(){delete n._referSubscribers[i]})),r.on("failed",(function(){delete n._referSubscribers[i]})),r}},{key:"sendRequest",value:function(e,t){return A("sendRequest()"),this._dialog.sendRequest(e,t)}},{key:"receiveRequest",value:function(e){var t=this;if(A("receiveRequest()"),e.method===d.CANCEL)this._status!==R.STATUS_WAITING_FOR_ANSWER&&this._status!==R.STATUS_ANSWERED||(this._status=R.STATUS_CANCELED,this._request.reply(487),this._failed("remote",e,d.causes.CANCELED));else switch(e.method){case d.ACK:if(this._status!==R.STATUS_WAITING_FOR_ACK)return;if(this._status=R.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!e.body){this.terminate({cause:d.causes.MISSING_SDP,status_code:400});break}var n={originator:"remote",type:"answer",sdp:e.body},r=(A('emit "sdp" from receiveRequest'),this.emit("sdp",n),new RTCSessionDescription({type:"answer",sdp:n.sdp}));this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(r)})).then((function(){t._is_confirmed||t._confirmed("remote",e)})).catch((function(e){t.terminate({cause:d.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e)}))}else this._is_confirmed||this._confirmed("remote",e);break;case d.BYE:this._status===R.STATUS_CONFIRMED||this._status===R.STATUS_WAITING_FOR_ACK?(e.reply(200),this._ended("remote",e,d.causes.BYE)):this._status===R.STATUS_INVITE_RECEIVED||this._status===R.STATUS_WAITING_FOR_ANSWER?(e.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",e,d.causes.BYE)):e.reply(403,"Wrong Status");break;case d.INVITE:this._status===R.STATUS_CONFIRMED?e.hasHeader("replaces")?this._receiveReplaces(e):this._receiveReinvite(e):e.reply(403,"Wrong Status");break;case d.INFO:this._status===R.STATUS_1XX_RECEIVED||this._status===R.STATUS_WAITING_FOR_ANSWER||this._status===R.STATUS_ANSWERED||this._status===R.STATUS_WAITING_FOR_ACK||this._status===R.STATUS_CONFIRMED?(n=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0)&&n.match(/^application\/dtmf-relay/i)?new b(this).init_incoming(e):void 0!==n?new C(this).init_incoming(e):e.reply(415):e.reply(403,"Wrong Status");break;case d.UPDATE:this._status===R.STATUS_CONFIRMED?this._receiveUpdate(e):e.reply(403,"Wrong Status");break;case d.REFER:this._status===R.STATUS_CONFIRMED?this._receiveRefer(e):e.reply(403,"Wrong Status");break;case d.NOTIFY:this._status===R.STATUS_CONFIRMED?this._receiveNotify(e):e.reply(403,"Wrong Status");break;default:e.reply(501)}}},{key:"onTransportError",value:function(){w("onTransportError()"),this._status!==R.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:d.causes.CONNECTION_ERROR,cause:d.causes.CONNECTION_ERROR})}},{key:"onRequestTimeout",value:function(){w("onRequestTimeout()"),this._status!==R.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:d.causes.REQUEST_TIMEOUT,cause:d.causes.REQUEST_TIMEOUT})}},{key:"onDialogError",value:function(){w("onDialogError()"),this._status!==R.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:d.causes.DIALOG_ERROR,cause:d.causes.DIALOG_ERROR})}},{key:"newDTMF",value:function(e){A("newDTMF()"),this.emit("newDTMF",e)}},{key:"newInfo",value:function(e){A("newInfo()"),this.emit("newInfo",e)}},{key:"_isReadyToReOffer",value:function(){return this._rtcReady?this._dialog?!0!==this._dialog.uac_pending_reply&&!0!==this._dialog.uas_pending_reply||(A("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):(A("_isReadyToReOffer() | session not established yet"),!1):(A("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}},{key:"_close",value:function(){if(A("close()"),this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(A("close() | closing local MediaStream"),v.closeMediaStream(this._localMediaStream)),this._status!==R.STATUS_TERMINATED){if(this._status=R.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(e){w("close() | error closing the RTCPeerConnection: %o",e)}for(var e in this._timers)Object.prototype.hasOwnProperty.call(this._timers,e)&&clearTimeout(this._timers[e]);for(var t in clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog),this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,t)&&(this._earlyDialogs[t].terminate(),delete this._earlyDialogs[t]);for(var n in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,n)&&delete this._referSubscribers[n];this._ua.destroyRTCSession(this)}}},{key:"_setInvite2xxTimer",value:function(e,t){var n=_.T1;this._timers.invite2xxTimer=setTimeout(function r(){this._status===R.STATUS_WAITING_FOR_ACK&&(e.reply(200,null,["Contact: ".concat(this._contact)],t),n<_.T2&&(n*=2)>_.T2&&(n=_.T2),this._timers.invite2xxTimer=setTimeout(r.bind(this),n))}.bind(this),n)}},{key:"_setACKTimer",value:function(){var e=this;this._timers.ackTimer=setTimeout((function(){e._status===R.STATUS_WAITING_FOR_ACK&&(A("no ACK received, terminating the session"),clearTimeout(e._timers.invite2xxTimer),e.sendRequest(d.BYE),e._ended("remote",null,d.causes.NO_ACK))}),_.TIMER_H)}},{key:"_createRTCConnection",value:function(e,t){var n=this;this._connection=new RTCPeerConnection(e,t),this._connection.addEventListener("iceconnectionstatechange",(function(){"failed"===n._connection.iceConnectionState&&n.terminate({cause:d.causes.RTP_TIMEOUT,status_code:408,reason_phrase:d.causes.RTP_TIMEOUT})})),A('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}},{key:"_createLocalDescription",value:function(e,t){var n=this;if(A("createLocalDescription()"),"offer"!==e&&"answer"!==e)throw new Error('createLocalDescription() | invalid type "'.concat(e,'"'));var r=this._connection;return this._rtcReady=!1,Promise.resolve().then((function(){return"offer"===e?(A("In offer, constraints %o",t),r.createOffer(t).catch((function(e){return w('emit "peerconnection:createofferfailed" [error:%o]',e),n.emit("peerconnection:createofferfailed",e),Promise.reject(e)}))):(A("In answer, constraints %o",t),r.createAnswer(t).catch((function(e){return w('emit "peerconnection:createanswerfailed" [error:%o]',e),n.emit("peerconnection:createanswerfailed",e),Promise.reject(e)})))})).then((function(e){return A("Got local description %o",e),r.setLocalDescription(e).catch((function(e){return n._rtcReady=!0,w('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',e),n.emit("peerconnection:setlocaldescriptionfailed",e),Promise.reject(e)}))})).then((function(){var i;return A("local description set successfully ICE Gathering state",r.iceGatheringState),"complete"!==r.iceGatheringState||t?new Promise((function(t){A("Register pc.onicencandidate");var i,o,l=!1,u=(setTimeout((function(){try{"complete"===r.iceGatheringState&&(A("ICE gathering state is completed, no need to wait further... "),u())}catch(e){A("Error in pc.onicecandidate reason: peerconnection is closed")}}),1e3),function(){r.removeEventListener("icecandidate",i),r.removeEventListener("icegatheringstatechange",o),l=!0,n._rtcReady=!0;var u={originator:"local",type:e,sdp:r.localDescription.sdp};A('emit "sdp" from ready function'),n.emit("sdp",u),t(u.sdp)});r.addEventListener("icecandidate",i=function(e){(e=e.candidate)?n.emit("icecandidate",{candidate:e,ready:u}):l||u()}),r.addEventListener("icegatheringstatechange",o=function(){A("icegatheringstatechange %s",r.iceGatheringState),"complete"!==r.iceGatheringState||l||u()})})):(n._rtcReady=!0,i={originator:"local",type:e,sdp:r.localDescription.sdp},A('emit "sdp" immediately constraints %o',t),n.emit("sdp",i),Promise.resolve(i.sdp))}))}},{key:"_createDialog",value:function(e,t,n){var r="UAS"===t?e.to_tag:e.from_tag,i="UAS"===t?e.from_tag:e.to_tag;r=e.call_id+r+i,i=this._earlyDialogs[r];return n?!!i||((i=new m(this,e,t,m.C.STATUS_EARLY)).error?(A(i.error),this._failed("remote",e,d.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[r]=i,!0)):(this._from_tag=e.from_tag,this._to_tag=e.to_tag,i?(i.update(e,t),this._dialog=i,delete this._earlyDialogs[r],!0):(n=new m(this,e,t)).error?(A(n.error),this._failed("remote",e,d.causes.INTERNAL_ERROR),!1):(this._dialog=n,!0))}},{key:"_receiveReinvite",value:function(e){var t=this,n=(A("receiveReinvite()"),e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0),r={request:e,callback:void 0,reject:function(){var t=(i=!0,(r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).status_code||403),n=r.reason_phrase||"",r=v.cloneArray(r.extraHeaders);if(this._status!==R.STATUS_CONFIRMED)return!1;if(t<300||700<=t)throw new TypeError("Invalid status_code: ".concat(t));e.reply(t,n,r)}.bind(this)},i=!1;function o(t){var n=this,i=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(e,i),this._late_sdp&&(t=this._mangleOffer(t)),e.reply(200,null,i,t,(function(){n._status=R.STATUS_WAITING_FOR_ACK,n._setInvite2xxTimer(e,t),n._setACKTimer()})),"function"==typeof r.callback&&r.callback()}this.emit("reinvite",r),i||(this._late_sdp=!1,e.body?"application/sdp"!==n?(A("invalid Content-Type"),e.reply(415)):this._processInDialogSdpOffer(e).then((function(e){t._status!==R.STATUS_TERMINATED&&o.call(t,e)})).catch((function(e){w(e)})):(this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._createLocalDescription("offer",t._rtcOfferConstraints)})).then((function(e){o.call(t,e)})).catch((function(){e.reply(500)}))))}},{key:"_receiveUpdate",value:function(e){var t=this,n=(A("receiveUpdate()"),e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0),r={request:e,callback:void 0,reject:function(){var t=(i=!0,(r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).status_code||403),n=r.reason_phrase||"",r=v.cloneArray(r.extraHeaders);if(this._status!==R.STATUS_CONFIRMED)return!1;if(t<300||700<=t)throw new TypeError("Invalid status_code: ".concat(t));e.reply(t,n,r)}.bind(this)},i=!1;function o(t){var n=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(e,n),e.reply(200,null,n,t),"function"==typeof r.callback&&r.callback()}this.emit("update",r),i||(e.body?"application/sdp"!==n?(A("invalid Content-Type"),e.reply(415)):this._processInDialogSdpOffer(e).then((function(e){t._status!==R.STATUS_TERMINATED&&o.call(t,e)})).catch((function(e){w(e)})):o.call(this,null))}},{key:"_processInDialogSdpOffer",value:function(e){var t=this;if(A("_processInDialogSdpOffer()"),!this._connection.addTrack)return this._processInDialogSdpOfferStreamBased(e);var n,r=this._ua.rtcUtils,o=e.parseSDP(),l=!1,u=i(o.media);try{for(u.s();!(n=u.n()).done;){var a=n.value;if(-1!==I.indexOf(a.type)){var s=a.direction||o.direction||"sendrecv";if("sendonly"!==s&&"inactive"!==s){l=!1;break}l=!0}}}catch(n){u.e(n)}finally{u.f()}var c={originator:"remote",type:"offer",sdp:e.body},f=(A('emit "sdp" from _receiveUpdate'),this.emit("sdp",c),new RTCSessionDescription({type:"offer",sdp:c.sdp})),h=(c=this.connection.getTransceivers()).find((function(e){return"audio"===(null==e||null==(e=e.sender)||null==(e=e.track)?void 0:e.kind)})),p=(A("transceivers are %o",c),c.find((function(e){return e.mid!==h.mid}))),v=(A("localVideoTransceiver is %o",p),"sendrecv"===(null==p?void 0:p.direction)||"recvonly"===(null==p?void 0:p.direction)),_=(A("isLocalHasVideo : %s localvideoDirection",v,null==p?void 0:p.direction),!1);return this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if(t._status===R.STATUS_TERMINATED)throw new Error("terminated")})).then((function(){var n,u=!1,a=!1,s=(Array.isArray(o.media)||(o.media=[o.media]),i(o.media));try{for(s.s();!(n=s.n()).done;){var c=n.value;"video"===c.type&&(u=!0,"sendrecv"===c.direction&&(a=!0))}}catch(n){s.e(n)}finally{s.f()}if(A("peerHasVideoLine %s peerOffersFullVideo %s",u,a),!0===t._remoteHold&&!1===l)t._remoteHold=!1,t._onunhold("remote");else{if(!1!==t._remoteHold||!0!==l){if(!v||a)return Promise.resolve().then((function(){var e=null!=r&&null!=(e=r._updatedMediaConstraints)&&e.video?{video:r._updatedMediaConstraints.video}:{video:!0};return A("Try media access from user with constraints %o",e),t._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(e)})).then((function(n){if(t._status===R.STATUS_TERMINATED)throw new Error("terminated");return t._connection.setRemoteDescription(f).catch((function(n){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n})).then((function(){var e,r,i;_=!0,p&&"sendrecv"===p.direction?-1<window.navigator.userAgent.toLowerCase().indexOf("firefox")?(r=p.sender,i=n.getVideoTracks(),!1===p.stopped?(r.replaceTrack(i[0]),p.direction="sendrecv"):(A("adding the track"),t._connection.addTrack(i[0])),r=new MediaStream([h.sender.track,i[0]]),t.emit("localvideoadded",{stream:r}),t.isMuted().video&&(A("muting the video in re-invite"),i[0].enabled=!1)):A("Video is already available"):!p||"inactive"!=p.direction&&"recvonly"!=p.direction?(t._localMediaStream=t._connection.getLocalStreams()[0],n&&(A("got stream in renegotiate 2"),t.connection.addTrack?(A("this.connection.addTrack"),A("1 localstream media tracks %o",t._localMediaStream.getVideoTracks().length),r=n.getVideoTracks()[0],t._localMediaStream.addTrack(r),t.connection.addTrack(r,t._localMediaStream),i=new MediaStream([h.sender.track,r]),t.emit("localvideoadded",{stream:i}),A("2 localstream media tracks %o",t._localMediaStream.getVideoTracks().length)):t.connection.addStream(n)),A("stream, end")):(r=window.navigator.userAgent.toLowerCase(),A("local video transiver direction is %s",p.direction),i=p.sender,e=n.getVideoTracks(),A("local video transiver is %s",p),-1<r.indexOf("firefox")&&!1!==p.stopped?(A("adding the track"),t._connection.addTrack(e[0])):(i.replaceTrack(e[0]),p.direction="sendrecv"),r=new MediaStream([h.sender.track,e[0]]),t.emit("localvideoadded",{stream:r}))}))})).catch((function(n){return _=!1,w("Media access denied in upgrade [error: %o]",n),t.emit("upgradevideoaccessdenied",{originator:"local",message:null,cause:d.causes.USER_DENIED_MEDIA_ACCESS}),t._connection.setRemoteDescription(f).catch((function(n){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n}))}));if(A("Its video downgrade... handle via track events in sdk"),t._status===R.STATUS_TERMINATED)throw new Error("terminated");return t._connection.setRemoteDescription(f).catch((function(n){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),t.emit("peerconnection:setremotedescriptionfailed",n),n}))}t._remoteHold=!0,t._onhold("remote")}})).then((function(){if(A("In then after user media isMediaAccessSuccessful : %s",_),t._status===R.STATUS_TERMINATED)throw new Error("terminated");return t._createLocalDescription("answer",{offerToReceiveAudio:1,offerToReceiveVideo:_?1:0}).catch((function(t){throw e.reply(500),w('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',t),t}))})).catch((function(e){w("_processInDialogSdpOffer() failed [error: %o]",e)})),this._connectionPromiseQueue}},{key:"_receiveRefer",value:function(e){var t,n=this;A("receiveRefer()"),e.refer_to?e.refer_to.uri.scheme!==d.SIP?(A("Refer-To header field points to a non-SIP URI scheme"),e.reply(416)):(e.reply(202),t=new S(this,e.cseq),A('emit "refer"'),this.emit("refer",{request:e,accept:function(r,i){(function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(n="function"==typeof n?n:null,this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;var i=new o(this._ua);i.on("progress",(function(e){e=e.response,t.notify(e.status_code,e.reason_phrase)})),i.on("accepted",(function(e){e=e.response,t.notify(e.status_code,e.reason_phrase)})),i.on("_failed",(function(e){var n=e.message;e=e.cause;n?t.notify(n.status_code,n.reason_phrase):t.notify(487,e)})),r.isRefer=!0,i.connect(e.refer_to.uri.toAor(),r,n)}).call(n,r,i)},reject:function(){(function(){t.notify(603)}).call(n)}})):(A("no Refer-To header field present in REFER"),e.reply(400))}},{key:"_processInDialogSdpOfferStreamBased",value:function(e){var t,n=this,r=(A("_processInDialogSdpOfferStreamBased()"),e.parseSDP()),o=!1,l=i(r.media);try{for(l.s();!(t=l.n()).done;){var u=t.value;if(-1!==I.indexOf(u.type)){var a=u.direction||r.direction||"sendrecv";if("sendonly"!==a&&"inactive"!==a){o=!1;break}o=!0}}}catch(t){l.e(t)}finally{l.f()}var s,c,h={originator:"remote",type:"offer",sdp:e.body},p=(A('emit "sdp" from _receiveUpdate'),this.emit("sdp",h),this.connection.currentLocalDescription),v=(p=(A("localSdp",p),f.parse(p.sdp)),!1),_=(Array.isArray(p.media)||(p.media=[p.media]),i(p.media));try{for(_.s();!(c=_.n()).done;){var g=c.value;"video"===g.type&&(s=g.direction,g.direction&&"sendrecv"!==g.direction||(v=!0))}}catch(t){_.e(t)}finally{_.f()}var m=new RTCSessionDescription({type:"offer",sdp:h.sdp}),y=(A("isLocalHasVideo : ",v),!1);return this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if(n._status===R.STATUS_TERMINATED)throw new Error("terminated")})).then((function(){var t,l=!1,u=!1,a=(Array.isArray(r.media)||(r.media=[r.media]),i(r.media));try{for(a.s();!(t=a.n()).done;){var c=t.value;"video"===c.type&&(l=!0,c.direction&&"sendrecv"!==c.direction||(u=!0))}}catch(t){a.e(t)}finally{a.f()}if(A("peerHasVideoLine %s peerOffersFullVideo %s",l,u),!0===n._remoteHold&&!1===o)n._remoteHold=!1,n._onunhold("remote");else{if(!1!==n._remoteHold||!0!==o){if(!v||u)return Promise.resolve().then((function(){var e={video:!0};return A("Try media access from user with constraints %o",e),n._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(e)})).then((function(t){if(n._status===R.STATUS_TERMINATED)throw new Error("terminated");return n._connection.setRemoteDescription(m).catch((function(t){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),n.emit("peerconnection:setremotedescriptionfailed",t),t})).then((function(){var e,r,i;y=!0,v?A("Video is already available"):(e=n.connection.getLocalStreams()[0].getAudioTracks()[0],r=t.getVideoTracks(),!s||"inactive"!=s&&"recvonly"!=s?(t&&(A("react got stream in renegotiate 2"),n.connection.removeStream(n.connection.getLocalStreams()[0]),i=new MediaStream([e,r[0]]),n.connection.addStream(i),n.emit("localvideoadded",{stream:i})),A("stream, end")):(A("local video transiver direction is %s",s),n.connection.removeStream(n.connection.getLocalStreams()[0]),i=new MediaStream([e,r[0]]),n.connection.addStream(i),n.emit("localvideoadded",{stream:i})))}))})).catch((function(t){return y=!1,w("Media access denied in upgrade [error: %o]",t),n.emit("upgradevideoaccessdenied",{originator:"local",message:null,cause:d.causes.USER_DENIED_MEDIA_ACCESS}),n._connection.setRemoteDescription(m).catch((function(t){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),n.emit("peerconnection:setremotedescriptionfailed",t),t}))}));if(A("Its video downgrade... handle via track events in sdk"),n._status===R.STATUS_TERMINATED)throw new Error("terminated");return n._connection.setRemoteDescription(m).catch((function(t){throw e.reply(488),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),n.emit("peerconnection:setremotedescriptionfailed",t),t}))}n._remoteHold=!0,n._onhold("remote")}})).then((function(){if(A("In then after user media isMediaAccessSuccessful : %s",y),n._status===R.STATUS_TERMINATED)throw new Error("terminated");return n._createLocalDescription("answer",{offerToReceiveAudio:1,offerToReceiveVideo:y?1:0}).catch((function(t){throw e.reply(500),w('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',t),t}))})).catch((function(e){w("_processInDialogSdpOffer() failed [error: %o]",e)})),this._connectionPromiseQueue}},{key:"_receiveNotify",value:function(e){if(A("receiveNotify()"),e.event||e.reply(400),"refer"===e.event.event){var t;if(e.event.params&&e.event.params.id)t=e.event.params.id,t=this._referSubscribers[t];else{if(1!==Object.keys(this._referSubscribers).length)return void e.reply(400,"Missing event id parameter");t=this._referSubscribers[Object.keys(this._referSubscribers)[0]]}t?(t.receiveNotify(e),e.reply(200)):e.reply(481,"Subscription does not exist")}else e.reply(489)}},{key:"_receiveReplaces",value:function(e){var t=this;A("receiveReplaces()"),this.emit("replaces",{request:e,accept:function(n){(function(t){var n=this;if(this._status!==R.STATUS_WAITING_FOR_ACK&&this._status!==R.STATUS_CONFIRMED)return!1;var r=new o(this._ua);r.on("confirmed",(function(){n.terminate()})),r.init_incoming(e,t)}).call(t,n)},reject:function(){(function(){A("Replaced INVITE rejected by the user"),e.reply(486)}).call(t)}})}},{key:"_sendInitialRequest",value:function(e,t,n){var r=this,i=new y(this._ua,this._request,{onRequestTimeout:function(){r.onRequestTimeout()},onTransportError:function(){r.onTransportError()},onAuthenticated:function(e){r._request=e},onReceiveResponse:function(e){r._receiveInviteResponse(e)}});Promise.resolve().then((function(){return n||(e.audio||e.video?(r._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(e).catch((function(e){if(r._status===R.STATUS_TERMINATED)throw new Error("terminated");throw r._failed("local",null,d.causes.USER_DENIED_MEDIA_ACCESS),w('emit "getusermediafailed" [error:%o]',e),r.emit("getusermediafailed",e),e}))):void 0)})).then((function(e){if(r._status===R.STATUS_TERMINATED)throw new Error("terminated");return(r._localMediaStream=e)&&(r._connection.addTrack?e.getTracks().forEach((function(t){r._connection.addTrack(t,e)})):r._connection.addStream(e),r.emit("localstream",{stream:e})),r._connecting(r._request),r._createLocalDescription("offer",t).catch((function(e){throw r._failed("local",null,d.causes.WEBRTC_ERROR),e}))})).then((function(e){if(r._is_canceled||r._status===R.STATUS_TERMINATED)throw new Error("terminated");r._request.body=e,r._status=R.STATUS_INVITE_SENT,A('emit "sending" [request:%o]',r._request),r.emit("sending",{request:r._request}),i.send()})).catch((function(e){r._status!==R.STATUS_TERMINATED&&w(e)}))}},{key:"_getDTMFRTPSender",value:function(){if(this._connection.getSenders){var e=this._connection.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(e&&e.dtmf)return e.dtmf;w("sendDTMF() | no local audio track to send DTMF with")}}},{key:"_receiveInviteResponse",value:function(e){var t,n=this;if(A("receiveInviteResponse()"),this._dialog&&200<=e.status_code&&e.status_code<=299)return this._dialog.id.call_id===e.call_id&&this._dialog.id.local_tag===e.from_tag&&this._dialog.id.remote_tag===e.to_tag?void this.sendRequest(d.ACK):void 0!==(t=new m(this,e,"UAC")).error?void A(t.error):(this.sendRequest(d.ACK),void this.sendRequest(d.BYE));if(this._is_canceled)100<=e.status_code&&e.status_code<200?this._request.cancel(this._cancel_reason):200<=e.status_code&&e.status_code<299&&(A("_acceptAndTerminate 1"),this._acceptAndTerminate(e));else if(this._status===R.STATUS_INVITE_SENT||this._status===R.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(e.status_code):this._status=R.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(e.status_code):if(!e.to_tag){A("1xx response received without to tag");break}if(e.hasHeader("contact")&&!this._createDialog(e,"UAC",!0))break;if(this._status=R.STATUS_1XX_RECEIVED,!e.body){this._progress("remote",e);break}var r={originator:"remote",type:"answer",sdp:e.body},i=(A('emit "sdp" from _receiveInviteResponse 1'),this.emit("sdp",r),new RTCSessionDescription({type:"answer",sdp:r.sdp}));this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return n._connection.setRemoteDescription(i)})).then((function(){return n._progress("remote",e)})).catch((function(e){w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),n.emit("peerconnection:setremotedescriptionfailed",e)}));break;case/^2[0-9]{2}$/.test(e.status_code):if(this._status=R.STATUS_CONFIRMED,!e.body){A("_acceptAndTerminate 2"),this._acceptAndTerminate(e,400,d.causes.MISSING_SDP),this._failed("remote",e,d.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(e,"UAC"))break;r={originator:"remote",type:"answer",sdp:e.body};var o=(A('emit "sdp" from _receiveInviteResponse 2'),this.emit("sdp",r),new RTCSessionDescription({type:"answer",sdp:r.sdp}));this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if(A("Signaling state %s",n._connection.signalingState),"stable"===n._connection.signalingState)return n._connection.createOffer(n._rtcOfferConstraints).then((function(e){return n._connection.setLocalDescription(e)})).catch((function(t){n._acceptAndTerminate(e,500,t.toString()),n._failed("local",e,d.causes.WEBRTC_ERROR)}))})).then((function(){n._connection.setRemoteDescription(o).then((function(){n._handleSessionTimersInIncomingResponse(e),n._accepted("remote",e),n.sendRequest(d.ACK),n._confirmed("local",null)})).catch((function(t){n._acceptAndTerminate(e,488,"Not Acceptable Here"),n._failed("remote",e,d.causes.BAD_MEDIA_DESCRIPTION),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),n.emit("peerconnection:setremotedescriptionfailed",t)}))}));break;default:r=v.sipErrorCause(e.status_code),this._failed("remote",e,r)}}},{key:"_sendReinvite",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(A("sendReinvite()"),v.cloneArray(t.extraHeaders)),r=v.cloneObject(t.eventHandlers),i=t.rtcOfferConstraints||this._rtcOfferConstraints||null,o=!1;function l(e){A("failed",e),r.failed&&r.failed(e)}n.push("Contact: ".concat(this._contact)),n.push("Content-Type: application/sdp"),this._sessionTimers.running&&n.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._createLocalDescription("offer",i)})).then((function(t){var i={originator:"local",type:"offer",sdp:t=e._mangleOffer(t)};A('emit "sdp" from _sendReinvite 1'),e.emit("sdp",i),e.sendRequest(d.INVITE,{extraHeaders:n,body:t,eventHandlers:{onSuccessResponse:function(t){(function(e){var t,n,i=this;this._status!==R.STATUS_TERMINATED&&(this.sendRequest(d.ACK),o||(this._handleSessionTimersInIncomingResponse(e),e.body&&e.hasHeader("Content-Type")&&"application/sdp"===e.getHeader("Content-Type").toLowerCase()?(t={originator:"remote",type:"answer",sdp:e.body},A('emit "sdp" _sendReinvite 2'),this.emit("sdp",t),n=new RTCSessionDescription({type:"answer",sdp:t.sdp}),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return i._connection.setRemoteDescription(n)})).then((function(){r.succeeded&&r.succeeded(e)})).catch((function(e){l.call(i),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),i.emit("peerconnection:setremotedescriptionfailed",e)}))):l.call(this)))}).call(e,t),o=!0},onErrorResponse:function(t){l.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})})).catch((function(){l()}))}},{key:"_sendUpdate",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(A("sendUpdate()"),v.cloneArray(t.extraHeaders)),r=v.cloneObject(t.eventHandlers),i=t.rtcOfferConstraints||this._rtcOfferConstraints||null,o=t.sdpOffer||!1,l=!1;function u(e){var t,n,i=this;this._status===R.STATUS_TERMINATED||l||(this._handleSessionTimersInIncomingResponse(e),o?e.body&&e.hasHeader("Content-Type")&&"application/sdp"===e.getHeader("Content-Type").toLowerCase()?(t={originator:"remote",type:"answer",sdp:e.body},A('emit "sdp" from _sendUpdate 2'),this.emit("sdp",t),n=new RTCSessionDescription({type:"answer",sdp:t.sdp}),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return i._connection.setRemoteDescription(n)})).then((function(){r.succeeded&&r.succeeded(e)})).catch((function(e){a.call(i),w('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),i.emit("peerconnection:setremotedescriptionfailed",e)}))):a.call(this):r.succeeded&&r.succeeded(e))}function a(e){r.failed&&r.failed(e)}n.push("Contact: ".concat(this._contact)),this._sessionTimers.running&&n.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),o?(n.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._createLocalDescription("offer",i)})).then((function(t){var r={originator:"local",type:"offer",sdp:t=e._mangleOffer(t)};A('emit "sdp" from _sendUpdate 1'),e.emit("sdp",r),e.sendRequest(d.UPDATE,{extraHeaders:n,body:t,eventHandlers:{onSuccessResponse:function(t){u.call(e,t),l=!0},onErrorResponse:function(t){a.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})})).catch((function(){a.call(e)}))):this.sendRequest(d.UPDATE,{extraHeaders:n,eventHandlers:{onSuccessResponse:function(t){u.call(e,t)},onErrorResponse:function(t){a.call(e,t)},onTransportError:function(){e.onTransportError()},onRequestTimeout:function(){e.onRequestTimeout()},onDialogError:function(){e.onDialogError()}}})}},{key:"_acceptAndTerminate",value:function(e,t,n){A("acceptAndTerminate()");var r=[];t&&(n=n||d.REASON_PHRASE[t]||"",r.push("Reason: SIP ;cause=".concat(t,'; text="').concat(n,'"'))),(this._dialog||this._createDialog(e,"UAC"))&&(this.sendRequest(d.ACK),this.sendRequest(d.BYE,{extraHeaders:r})),this._status=R.STATUS_TERMINATED}},{key:"_mangleOffer",value:function(e){if(!this._localHold&&!this._remoteHold)return e;if(e=f.parse(e),this._localHold&&!this._remoteHold){A("mangleOffer() | me on hold, mangling offer");var t,n=i(e.media);try{for(n.s();!(t=n.n()).done;){var r=t.value;-1!==I.indexOf(r.type)&&(r.direction&&"sendrecv"!==r.direction?"recvonly"===r.direction&&(r.direction="inactive"):r.direction="sendonly")}}catch(e){n.e(e)}finally{n.f()}}else if(this._localHold&&this._remoteHold){A("mangleOffer() | both on hold, mangling offer");var o,l=i(e.media);try{for(l.s();!(o=l.n()).done;){var u=o.value;-1!==I.indexOf(u.type)&&(u.direction="inactive")}}catch(e){l.e(e)}finally{l.f()}}else if(this._remoteHold){A("mangleOffer() | remote on hold, mangling offer");var a,s=i(e.media);try{for(s.s();!(a=s.n()).done;){var c=a.value;-1!==I.indexOf(c.type)&&(c.direction&&"sendrecv"!==c.direction?"recvonly"===c.direction&&(c.direction="inactive"):c.direction="recvonly")}}catch(e){s.e(e)}finally{s.f()}}return f.write(e)}},{key:"_setLocalMediaStatus",value:function(){var e=!0,t=!0;(this._localHold||this._remoteHold)&&(t=e=!1),this._audioMuted&&(e=!1),this._videoMuted&&(t=!1),this._toggleMuteAudio(!e),this._toggleMuteVideo(!t)}},{key:"_handleSessionTimersInIncomingRequest",value:function(e,t){this._sessionTimers.enabled&&(e=e.session_expires&&e.session_expires>=d.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,e.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,"uas"),t.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(e)),this._sessionTimers.refresher="uas"===e,this._runSessionTimer())}},{key:"_handleSessionTimersInIncomingResponse",value:function(e){this._sessionTimers.enabled&&(e=e.session_expires&&e.session_expires>=d.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=e.session_expires,e.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,"uac"),this._sessionTimers.refresher="uac"===e,this._runSessionTimer())}},{key:"_runSessionTimer",value:function(){var e=this,t=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout((function(){e._status!==R.STATUS_TERMINATED&&(A("runSessionTimer() | sending session refresh request"),e._sessionTimers.refreshMethod===d.UPDATE?e._sendUpdate():e._sendReinvite())}),500*t):this._sessionTimers.timer=setTimeout((function(){e._status!==R.STATUS_TERMINATED&&(w("runSessionTimer() | timer expired, terminating the session"),e.terminate({cause:d.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))}),1100*t)}},{key:"_toggleMuteAudio",value:function(e){if(this._connection.getSenders){var t,n=i(this._connection.getSenders().filter((function(e){return e.track&&"audio"===e.track.kind})));try{for(n.s();!(t=n.n()).done;)t.value.track.enabled=!e}catch(t){n.e(t)}finally{n.f()}}else{var r;A("_toggleMuteAudio getSenders API is not supported, using localstream"),(r=null==(r=this._connection.getLocalStreams()[0])?void 0:r.getAudioTracks())&&r.forEach((function(t){return t.enabled=!e}))}}},{key:"_toggleMuteVideo",value:function(e){if(this._connection.getSenders){var t,n=i(this._connection.getSenders().filter((function(e){return e.track&&"video"===e.track.kind})));try{for(n.s();!(t=n.n()).done;)t.value.track.enabled=!e}catch(t){n.e(t)}finally{n.f()}}else{var r;A("_toggleMuteVideo getSenders API is not supported, using localstream"),(r=null==(r=this._connection.getLocalStreams()[0])?void 0:r.getVideoTracks())&&r.forEach((function(t){return t.enabled=!e}))}}},{key:"_newRTCSession",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];A("newRTCSession()"),this._ua.newRTCSession(this,{originator:e,session:this,request:t,isRefer:n})}},{key:"_connecting",value:function(e){A("session connecting"),A('emit "connecting"'),this.emit("connecting",{request:e})}},{key:"_progress",value:function(e,t){A("session progress"),A('emit "progress"'),this.emit("progress",{originator:e,response:t||null})}},{key:"_accepted",value:function(e,t){A("session accepted"),this._start_time=new Date,A('emit "accepted"'),this.emit("accepted",{originator:e,response:t||null})}},{key:"_confirmed",value:function(e,t){A("session confirmed"),this._is_confirmed=!0,A('emit "confirmed"'),this.emit("confirmed",{originator:e,ack:t||null})}},{key:"_ended",value:function(e,t,n){A("session ended"),this._end_time=new Date,this._close(),A('emit "ended"'),this.emit("ended",{originator:e,message:t||null,cause:n,sessionid:this.id})}},{key:"_failed",value:function(e,t,n){A("session failed"),A('emit "_failed"'),this.emit("_failed",{originator:e,message:t||null,cause:n,sessionid:this.id}),this._close(),A('emit "failed"'),this.emit("failed",{originator:e,message:t||null,cause:n})}},{key:"_onhold",value:function(e){A("session onhold"),this._setLocalMediaStatus(),A('emit "hold"'),this.emit("hold",{originator:e})}},{key:"_onunhold",value:function(e){A("session onunhold"),this._setLocalMediaStatus(),A('emit "unhold"'),this.emit("unhold",{originator:e})}},{key:"_onmute",value:function(e){var t=e.audio;e=e.video;A("session onmute"),this._setLocalMediaStatus(),A('emit "muted"'),this.emit("muted",{audio:t,video:e})}},{key:"_onunmute",value:function(e){var t=e.audio;e=e.video;A("session onunmute"),this._setLocalMediaStatus(),A('emit "unmuted"'),this.emit("unmuted",{audio:t,video:e})}}])&&l(e.prototype,n),t&&l(e,t),Object.defineProperty(e,"prototype",{writable:!1}),o}()},function(e,t,n){"use strict";var r=n(16),i=n(33),o=new(n(14))("JsSIP:Socket").error;t.isSocket=function(e){if(Array.isArray(e))return!1;if(void 0===e)return o("undefined JsSIP.Socket instance"),!1;try{if(!r.isString(e.url))throw o("missing or invalid JsSIP.Socket url property"),new Error;if(!r.isString(e.via_transport))throw o("missing or invalid JsSIP.Socket via_transport property"),new Error;if(-1===i.parse(e.sip_uri,"SIP_URI"))throw o("missing or invalid JsSIP.Socket sip_uri property"),new Error}catch(e){return!1}try{["connect","disconnect","send"].forEach((function(t){if(!r.isFunction(e[t]))throw o("missing or invalid JsSIP.Socket method: ".concat(t)),new Error}))}catch(e){return!1}return!0}},function(e){e.exports=JSON.parse('{"name":"EngageDigital","version":"webrtc-sip-sdk_14.03.000_10","description":"Engage Digital Client","scripts":{"start":"webpack serve","build":"npm run lint && webpack","dev":"webpack","lint":"npm run lint:src && npm run lint:test","lint:src":"eslint ./src --cache && echo \\"Complete linting at src\\"","lint:test":"eslint ./test --cache && echo \\"Complete linting at test\\"","test":"jest && npm run test:coverage","test:coverage":"jest --coverage","prepare":"npm run build","trypublish":"npm publish || true","generate-docs":"npx jsdoc --configure .jsdoc.json --verbose"},"repository":{"type":"git","url":""},"author":"Radisys","license":"","keywords":["library","engage-Digital-rtc","engage-Digital"],"dependencies":{"@cdep/jssip":"^3.7.5","clean-jsdoc-theme":"^3.2.7","debug":"^4.3.1","dotenv":"^9.0.2","lodash":"^4.17.21","mini-css-extract-plugin":"^0.11.3","react-native":"^0.67.3","react-native-webrtc-rad":"^1.89.6","sdp-transform":"^2.14.1","webrtc-adapter":"^8.0.0","whatwg-fetch":"^3.6.2"},"devDependencies":{"@babel/cli":"7.14.3","@babel/core":"7.14.3","@babel/plugin-proposal-class-properties":"7.13.0","@babel/polyfill":"7.12.1","@babel/preset-env":"7.14.2","@types/jest":"^26.0.23","babel-core":"6.26.3","babel-eslint":"10.1.0","babel-loader":"8.2.2","babel-polyfill":"6.26.0","babel-preset-es2015":"6.24.1","babel-preset-minify":"0.5.1","babel-preset-stage-0":"6.24.1","clean-webpack-plugin":"4.0.0-alpha.0","dotenv-webpack":"^7.0.2","eslint":"^7.27.0","eslint-loader":"^4.0.2","eslint-plugin-react":"^7.26.0","file-loader":"^6.2.0","html-webpack-plugin":"^5.3.1","jest":"^26.6.3","jsdoc":"^3.6.7","prettier":"^2.3.0","prettier-webpack-plugin":"^1.2.0","uglifyjs-webpack-plugin":"^2.2.0","webpack":"^4.43.0","webpack-cli":"^3.3.11","webpack-dev-server":"^3.11.0"},"jest":{"automock":false,"setupFiles":["./setupJestMock.js"]}}')},function(e,t,n){n(159),e.exports=n(361)},function(e,t,n){"use strict";(function(e){if(n(160),n(357),n(358),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");function t(e,t,n){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:n})}e._babelPolyfill=!0,t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(e){[][e]&&t(Array,e,Function.call.bind([][e]))}))}).call(this,n(81))},function(e,t,n){n(161),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(241),n(242),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(102),n(265),n(134),n(266),n(135),n(267),n(268),n(269),n(270),n(271),n(138),n(140),n(141),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),e.exports=n(24)},function(e,t,n){"use strict";function r(e){var t=$[e]=k(F[V]);return t._k=e,t}function i(e,t){E(e);for(var n,r=S(t=R(t)),i=0,o=r.length;i<o;)ee(e,n=r[i++],t[n]);return e}function o(e){var t=B.call(this,e=I(e,!0));return!(this===K&&c($,e)&&!c(J,e))&&(!(t||!c(this,e)||!c($,e)||c(this,W)&&this[W][e])||t)}function l(e,t){var n;if(e=R(e),t=I(t,!0),e!==K||!c($,t)||c(J,t))return!(n=L(e,t))||!c($,t)||c(e,W)&&e[W][t]||(n.enumerable=!0),n}function u(e){for(var t,n=j(R(e)),r=[],i=0;n.length>i;)c($,t=n[i++])||t==W||t==p||r.push(t);return r}function a(e){for(var t,n=e===K,r=j(n?J:R(e)),i=[],o=0;r.length>o;)!c($,t=r[o++])||n&&!c(K,t)||i.push($[t]);return i}var s=n(2),c=n(20),f=n(8),d=n(0),h=n(18),p=n(38).KEY,v=n(3),_=n(60),g=n(56),m=n(42),y=n(6),b=n(116),C=n(83),S=n(163),T=n(68),E=n(1),A=n(4),w=n(12),R=n(21),I=n(29),O=n(41),k=n(45),P=n(119),x=n(22),D=n(67),M=n(11),N=n(43),L=x.f,U=M.f,j=P.f,F=s.Symbol,q=s.JSON,H=q&&q.stringify,V="prototype",W=y("_hidden"),G=y("toPrimitive"),B={}.propertyIsEnumerable,z=_("symbol-registry"),$=_("symbols"),J=_("op-symbols"),K=Object[V],Y=(_="function"==typeof F&&!!D.f,s.QObject),X=!Y||!Y[V]||!Y[V].findChild,Q=f&&v((function(){return 7!=k(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=L(K,t);r&&delete K[t],U(e,t,n),r&&e!==K&&U(K,t,r)}:U,Z=_&&"symbol"==typeof F.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof F},ee=function(e,t,n){return e===K&&ee(J,t,n),E(e),t=I(t,!0),E(n),c($,t)?(n.enumerable?(c(e,W)&&e[W][t]&&(e[W][t]=!1),n=k(n,{enumerable:O(0,!1)})):(c(e,W)||U(e,W,O(1,{})),e[W][t]=!0),Q(e,t,n)):U(e,t,n)};_||(h((F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var e=m(0<arguments.length?arguments[0]:void 0),t=function(n){this===K&&t.call(J,n),c(this,W)&&c(this[W],e)&&(this[W][e]=!1),Q(this,e,O(1,n))};return f&&X&&Q(K,e,{configurable:!0,set:t}),r(e)})[V],"toString",(function(){return this._k})),x.f=l,M.f=ee,n(46).f=P.f=u,n(62).f=o,D.f=a,f&&!n(37)&&h(K,"propertyIsEnumerable",o,!0),b.f=function(e){return r(y(e))}),d(d.G+d.W+d.F*!_,{Symbol:F});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)y(te[ne++]);for(var re=N(y.store),ie=0;re.length>ie;)C(re[ie++]);d(d.S+d.F*!_,"Symbol",{for:function(e){return c(z,e+="")?z[e]:z[e]=F(e)},keyFor:function(e){if(!Z(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){X=!0},useSimple:function(){X=!1}}),d(d.S+d.F*!_,"Object",{create:function(e,t){return void 0===t?k(e):i(k(e),t)},defineProperty:ee,defineProperties:i,getOwnPropertyDescriptor:l,getOwnPropertyNames:u,getOwnPropertySymbols:a}),Y=v((function(){D.f(1)})),d(d.S+d.F*Y,"Object",{getOwnPropertySymbols:function(e){return D.f(w(e))}}),q&&d(d.S+d.F*(!_||v((function(){var e=F();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;i<arguments.length;)r.push(arguments[i++]);if(n=t=r[1],(A(t)||void 0!==e)&&!Z(e))return T(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Z(t))return t}),r[1]=t,H.apply(q,r)}}),F[V][G]||n(17)(F[V],G,F[V].valueOf),g(F,"Symbol"),g(Math,"Math",!0),g(s.JSON,"JSON",!0)},function(e,t,n){e.exports=n(60)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(43),i=n(67),o=n(62);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var l,u=n(e),a=o.f,s=0;u.length>s;)a.call(e,l=u[s++])&&t.push(l);return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(45)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperty:n(11).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(8),"Object",{defineProperties:n(118)})},function(e,t,n){var r=n(21),i=n(22).f;n(31)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){var r=n(12),i=n(23);n(31)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(12),i=n(43);n(31)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){n(31)("getOwnPropertyNames",(function(){return n(119).f}))},function(e,t,n){var r=n(4),i=n(38).onFreeze;n(31)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(4),i=n(38).onFreeze;n(31)("seal",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(4),i=n(38).onFreeze;n(31)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(4);n(31)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(4);n(31)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(4);n(31)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(120)})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(121)})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(87).set})},function(e,t,n){"use strict";var r=n(57),i={};i[n(6)("toStringTag")]="z",i+""!="[object z]"&&n(18)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(122)})},function(e,t,n){var r=n(11).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(8)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(4),i=n(23),o=n(6)("hasInstance"),l=Function.prototype;o in l||n(11).f(l,o,{value:function(e){if("function"==typeof this&&r(e)){if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0}return!1}})},function(e,t,n){var r=n(0);n=n(124);r(r.G+r.F*(parseInt!=n),{parseInt:n})},function(e,t,n){var r=n(0);n=n(125);r(r.G+r.F*(parseFloat!=n),{parseFloat:n})},function(e,t,n){"use strict";function r(e){var t,n,r,i;if("string"==typeof(t=a(e,!1))&&2<t.length)if(43===(e=(t=m?t.trim():h(t,3)).charCodeAt(0))||45===e){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var o,l=t.slice(2),u=0,s=l.length;u<s;u++)if((o=l.charCodeAt(u))<48||i<o)return NaN;return parseInt(l,r)}return+t}var i=n(2),o=n(20),l=n(26),u=n(89),a=n(29),s=n(3),c=n(46).f,f=n(22).f,d=n(11).f,h=n(58).trim,p="Number",v=b=i[p],_=b.prototype,g=l(n(45)(_))==p,m="trim"in String.prototype;if(!b(" 0o1")||!b("0b1")||b("+0x1")){for(var y,b=function(e){e=arguments.length<1?0:e;var t=this;return t instanceof b&&(g?s((function(){_.valueOf.call(t)})):l(t)!=p)?u(new v(r(e)),t,b):r(e)},C=n(8)?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;C.length>S;S++)o(v,y=C[S])&&!o(b,y)&&d(b,y,f(v,y));(b.prototype=_).constructor=b,n(18)(i,p,b)}},function(e,t,n){"use strict";function r(e,t){for(var n=-1,r=t;++n<6;)r+=e*h[n],h[n]=r%1e7,r=d(r/1e7)}function i(e){for(var t=6,n=0;0<=--t;)n+=h[t],h[t]=d(n/e),n=n%e*1e7}function o(){for(var e,t=6,n="";0<=--t;)""===n&&0!==t&&0===h[t]||(e=String(h[t]),n=""===n?e:n+c.call("0",7-e.length)+e);return n}function l(e,t,n){return 0===t?n:t%2==1?l(e,t-1,n*e):l(e*e,t/2,n)}var u=n(0),a=n(27),s=n(126),c=n(90),f=1..toFixed,d=Math.floor,h=[0,0,0,0,0,0],p="Number.toFixed: incorrect invocation!";u(u.P+u.F*(!!f&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(3)((function(){f.call({})}))),"Number",{toFixed:function(e){var t,n,u=s(this,p),f="",d="0";if((e=a(e))<0||20<e)throw RangeError(p);if(u!=u)return"NaN";if(u<=-1e21||1e21<=u)return String(u);if(u<0&&(f="-",u=-u),1e-21<u)if(u=(t=function(e){for(var t=0,n=e;4096<=n;)t+=12,n/=4096;for(;2<=n;)t+=1,n/=2;return t}(u*l(2,69,1))-69)<0?u*l(2,-t,1):u/l(2,t,1),u*=4503599627370496,0<(t=52-t)){for(r(0,u),n=e;7<=n;)r(1e7,0),n-=7;for(r(l(10,n,1),0),n=t-1;23<=n;)i(1<<23),n-=23;i(1<<n),r(1,1),i(2),d=o()}else r(0,u),r(1<<-t,0),d=o()+c.call("0",e);return 0<e?f+((u=d.length)<=e?"0."+c.call("0",e-u)+d:d.slice(0,u-e)+"."+d.slice(u-e)):f+d}})},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(126),l=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==l.call(1,void 0)}))||!i((function(){l.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?l.call(t):l.call(t,e)}})},function(e,t,n){(n=n(0))(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),i=n(2).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(127)})},function(e,t,n){(n=n(0))(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),i=n(127),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){(n=n(0))(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){(n=n(0))(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0);n=n(125);r(r.S+r.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},function(e,t,n){var r=n(0);n=n(124);r(r.S+r.F*(Number.parseInt!=n),"Number",{parseInt:n})},function(e,t,n){var r=n(0),i=n(128),o=Math.sqrt;n=Math.acosh;r(r.S+r.F*!(n&&710==Math.floor(n(Number.MAX_VALUE))&&n(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){n=n(0);var r=Math.asinh;n(n.S+n.F*!(r&&0<1/r(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){n=n(0);var r=Math.atanh;n(n.S+n.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),i=n(91);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){(n=n(0))(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){n=n(0);var r=Math.exp;n(n.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,n){var r=n(0);n=n(92);r(r.S+r.F*(n!=Math.expm1),"Math",{expm1:n})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(129)})},function(e,t,n){n=n(0);var r=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var n,i,o=0,l=0,u=arguments.length,a=0;l<u;)a<(n=r(arguments[l++]))?(o=o*(i=a/n)*i+1,a=n):o+=0<n?(i=n/a)*i:n;return a===1/0?1/0:a*Math.sqrt(o)}})},function(e,t,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(3)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var n=65535&(e=+e),r=65535&(t=+t);return 0|n*r+((65535&e>>>16)*r+n*(65535&t>>>16)<<16>>>0)}})},function(e,t,n){(n=n(0))(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(128)})},function(e,t,n){(n=n(0))(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(91)})},function(e,t,n){var r=n(0),i=n(92),o=Math.exp;r(r.S+r.F*n(3)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),i=n(92),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){(n=n(0))(n.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(0),i=n(44),o=String.fromCharCode;n=String.fromCodePoint;r(r.S+r.F*(!!n&&1!=n.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,l=0;l<r;){if(t=+arguments[l++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0),i=n(21),o=n(7);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,l=[],u=0;u<n;)l.push(String(t[u++])),u<r&&l.push(String(arguments[u]));return l.join("")}})},function(e,t,n){"use strict";n(58)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(69)(!0);n(93)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e=this._t,t=this._i;return t>=e.length?{value:void 0,done:!0}:(e=r(e,t),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(0),i=n(69)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(95),l="endsWith",u=""[l];r(r.P+r.F*n(96)(l),"String",{endsWith:function(e){var t=o(this,e,l),n=1<arguments.length?arguments[1]:void 0,r=i(t.length);n=void 0===n?r:Math.min(i(n),r),r=String(e);return u?u.call(t,r,n):t.slice(n-r.length,n)===r}})},function(e,t,n){"use strict";var r=n(0),i=n(95);r(r.P+r.F*n(96)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(90)})},function(e,t,n){"use strict";var r=n(0),i=n(7),o=n(95),l="startsWith",u=""[l];r(r.P+r.F*n(96)(l),"String",{startsWith:function(e){var t=o(this,e,l),n=i(Math.min(1<arguments.length?arguments[1]:void 0,t.length));e=String(e);return u?u.call(t,e,n):t.slice(n,n+e.length)===e}})},function(e,t,n){"use strict";n(19)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(19)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(19)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(19)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(19)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(19)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(19)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(19)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(19)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(19)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(19)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(19)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(19)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){(n=n(0))(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(29);r(r.P+r.F*n(3)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0);n=n(240);r(r.P+r.F*(Date.prototype.toISOString!==n),"Date",{toISOString:n})},function(e,t,n){"use strict";function r(e){return 9<e?e:"0"+e}n=n(3);var i=Date.prototype.getTime,o=Date.prototype.toISOString;e.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!n((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?"-":9999<e?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"."+(99<t?t:"0"+r(t))+"Z"}:o},function(e,t,n){var r=Date.prototype,i="Invalid Date",o=r.toString,l=r.getTime;new Date(NaN)+""!=i&&n(18)(r,"toString",(function(){var e=l.call(this);return e==e?o.call(this):i}))},function(e,t,n){var r=n(6)("toPrimitive"),i=Date.prototype;r in i||n(17)(i,r,n(243))},function(e,t,n){"use strict";var r=n(1),i=n(29);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(68)})},function(e,t,n){"use strict";var r=n(25),i=n(0),o=n(12),l=n(130),u=n(97),a=n(7),s=n(98),c=n(99);i(i.S+i.F*!n(71)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,f,d=o(e),h=(e="function"==typeof this?this:Array,arguments.length),p=1<h?arguments[1]:void 0,v=void 0!==p,_=0,g=c(d);if(v&&(p=r(p,2<h?arguments[2]:void 0,2)),null==g||e==Array&&u(g))for(n=new e(t=a(d.length));_<t;_++)s(n,_,v?p(d[_],_):d[_]);else for(f=g.call(d),n=new e;!(i=f.next()).done;_++)s(n,_,v?l(f,p,[i.value,_],!0):i.value);return n.length=_,n}})},function(e,t,n){"use strict";var r=n(0),i=n(98);r(r.S+r.F*n(3)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);e<t;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),i=n(21),o=[].join;r(r.P+r.F*(n(61)!=Object||!n(28)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),i=n(86),o=n(26),l=n(44),u=n(7),a=[].slice;r(r.P+r.F*n(3)((function(){i&&a.call(i)})),"Array",{slice:function(e,t){var n=u(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return a.call(this,e,t);for(var i=l(e,n),s=(e=l(t,n),u(e-i)),c=new Array(s),f=0;f<s;f++)c[f]="String"==r?this.charAt(i+f):this[i+f];return c}})},function(e,t,n){"use strict";var r=n(0),i=n(15),o=n(12),l=n(3),u=[].sort,a=[1,2,3];r(r.P+r.F*(l((function(){a.sort(void 0)}))||!l((function(){a.sort(null)}))||!n(28)(u)),"Array",{sort:function(e){return void 0===e?u.call(o(this)):u.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(0),i=n(32)(0);n=n(28)([].forEach,!0);r(r.P+r.F*!n,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(4),i=n(68),o=n(6)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),i=n(32)(1);r(r.P+r.F*!n(28)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(32)(2);r(r.P+r.F*!n(28)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(32)(3);r(r.P+r.F*!n(28)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(32)(4);r(r.P+r.F*!n(28)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(131);r(r.P+r.F*!n(28)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),i=n(131);r(r.P+r.F*!n(28)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(66)(!1),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(l||!n(28)(o)),"Array",{indexOf:function(e){return l?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(21),o=n(27),l=n(7),u=[].lastIndexOf,a=!!u&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(a||!n(28)(u)),"Array",{lastIndexOf:function(e){if(a)return u.apply(this,arguments)||0;var t=i(this),n=l(t.length),r=n-1;for((r=1<arguments.length?Math.min(r,o(arguments[1])):r)<0&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(132)}),n(39)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(101)}),n(39)("fill")},function(e,t,n){"use strict";var r=n(0),i=n(32)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),n(39)("find")},function(e,t,n){"use strict";var r=n(0),i=n(32)(6),o="findIndex",l=!0;o in[]&&Array(1)[o]((function(){l=!1})),r(r.P+r.F*l,"Array",{findIndex:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),n(39)(o)},function(e,t,n){n(47)("Array")},function(e,t,n){var r=n(2),i=n(89),o=n(11).f,l=n(46).f,u=n(70),a=n(63),s=p=r.RegExp,c=p.prototype,f=/a/g,d=/a/g,h=new p(f)!==f;if(n(8)&&(!h||n(3)((function(){return d[n(6)("match")]=!1,p(f)!=f||p(d)==d||"/a/i"!=p(f,"i")})))){for(var p=function(e,t){var n=this instanceof p,r=u(e),o=void 0===t;return!n&&r&&e.constructor===p&&o?e:i(h?new s(r&&!o?e.source:e,t):s((r=e instanceof p)?e.source:e,r&&o?a.call(e):t),n?this:c,p)},v=l(s),_=0;v.length>_;)!function(e){e in p||o(p,e,{configurable:!0,get:function(){return s[e]},set:function(t){s[e]=t}})}(v[_++]);(c.constructor=p).prototype=c,n(18)(r,"RegExp",p)}n(47)("RegExp")},function(e,t,n){"use strict";function r(e){n(18)(RegExp.prototype,u,e,!0)}n(135);var i=n(1),o=n(63),l=n(8),u="toString",a=/./[u];n(3)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?r((function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!l&&e instanceof RegExp?o.call(e):void 0)})):a.name!=u&&r((function(){return a.call(this)}))},function(e,t,n){"use strict";var r=n(1),i=n(7),o=n(104),l=n(72);n(73)("match",1,(function(e,t,n,u){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=u(n,e,this);if(t.done)return t.value;var a=r(e),s=String(this);if(!a.global)return l(a,s);for(var c=a.unicode,f=[],d=a.lastIndex=0;null!==(h=l(a,s));){var h=String(h[0]);""===(f[d]=h)&&(a.lastIndex=o(s,i(a.lastIndex),c)),d++}return 0===d?null:f}]}))},function(e,t,n){"use strict";var r=n(1),i=n(12),o=n(7),l=n(27),u=n(104),a=n(72),s=Math.max,c=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(73)("replace",2,(function(e,t,n,p){return[function(r,i){var o=e(this),l=null==r?void 0:r[t];return void 0!==l?l.call(r,o,i):n.call(String(o),r,i)},function(e,t){var v=p(n,e,this,t);if(v.done)return v.value;for(var _,g=r(e),m=String(this),y="function"==typeof t,b=(y||(t=String(t)),g.global),C=(b&&(_=g.unicode,g.lastIndex=0),[]);null!==(w=a(g,m))&&(C.push(w),b);)""===String(w[0])&&(g.lastIndex=u(m,o(g.lastIndex),_));for(var S,T="",E=0,A=0;A<C.length;A++){for(var w=C[A],R=String(w[0]),I=s(c(l(w.index),m.length),0),O=[],k=1;k<w.length;k++)O.push(void 0===(S=w[k])?S:String(S));var P=w.groups,x=y?(x=[R].concat(O,I,m),void 0!==P&&x.push(P),String(t.apply(void 0,x))):function(e,t,r,o,l,u){var a=r+e.length,s=o.length,c=h;return void 0!==l&&(l=i(l),c=d),n.call(u,c,(function(n,i){var u;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(a);case"<":u=l[i.slice(1,-1)];break;default:var c,d=+i;if(0==d)return n;if(s<d)return 0!==(c=f(d/10))&&c<=s?void 0===o[c-1]?i.charAt(1):o[c-1]+i.charAt(1):n;u=o[d-1]}return void 0===u?"":u}))}(R,m,I,O,P,t);E<=I&&(T+=m.slice(E,I)+x,E=I+R.length)}return T+m.slice(E)}]}))},function(e,t,n){"use strict";var r=n(1),i=n(121),o=n(72);n(73)("search",1,(function(e,t,n,l){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){if((t=l(n,e,this)).done)return t.value;var t=r(e),u=(e=String(this),t.lastIndex);i(u,0)||(t.lastIndex=0),e=o(t,e);return i(t.lastIndex,u)||(t.lastIndex=u),null===e?-1:e.index}]}))},function(e,t,n){"use strict";var r=n(70),i=n(1),o=n(64),l=n(104),u=n(7),a=n(72),s=n(103),c=n(3),f=Math.min,d=[].push,h="split",p="length",v="lastIndex",_=4294967295,g=!c((function(){RegExp(_,"y")}));n(73)("split",2,(function(e,t,n,c){var m="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||1<"."[h](/()()/)[p]||""[h](/.?/)[p]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,l,u,a=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,h=void 0===t?_:t>>>0,g=new RegExp(e.source,c+"g");(o=s.call(g,i))&&!(f<(l=g[v])&&(a.push(i.slice(f,o.index)),1<o[p]&&o.index<i[p]&&d.apply(a,o.slice(1)),u=o[0][p],f=l,a[p]>=h));)g[v]===o.index&&g[v]++;return f===i[p]?!u&&g.test("")||a.push(""):a.push(i.slice(f)),a[p]>h?a.slice(0,h):a}:"0"[h](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n;return[function(n,r){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):m.call(String(i),n,r)},function(e,t){if((r=c(m,e,this,t,m!==n)).done)return r.value;var r=i(e),s=String(this),d=(e=o(r,RegExp),r.unicode),h=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(g?"y":"g"),p=new e(g?r:"^(?:"+r.source+")",h),v=void 0===t?_:t>>>0;if(0==v)return[];if(0===s.length)return null===a(p,s)?[s]:[];for(var y=0,b=0,C=[];b<s.length;){p.lastIndex=g?b:0;var S,T=a(p,g?s:s.slice(b));if(null===T||(S=f(u(p.lastIndex+(g?0:b)),s.length))===y)b=l(s,b,d);else{if(C.push(s.slice(y,b)),C.length===v)return C;for(var E=1;E<=T.length-1;E++)if(C.push(T[E]),C.length===v)return C;b=y=S}}return C.push(s.slice(y)),C}]}))},function(e,t,n){"use strict";function r(){}var i,o,l,u,a=n(37),s=n(2),c=n(25),f=n(57),d=n(0),h=n(4),p=n(15),v=n(48),_=n(49),g=n(64),m=n(105).set,y=n(106)(),b=n(107),C=n(136),S=n(74),T=n(137),E="Promise",A=s.TypeError,w=s.process,R=(P=w&&w.versions)&&P.v8||"",I=s[E],O="process"==f(w),k=o=b.f,P=!!function(){try{var e=I.resolve(1),t=(e.constructor={})[n(6)("species")]=function(e){e(r,r)};return(O||"function"==typeof PromiseRejectionEvent)&&e.then(r)instanceof t&&0!==R.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(e){}}(),x=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){var n;e._n||(e._n=!0,n=e._c,y((function(){for(var r,i=e._v,o=1==e._s,l=0,u=function(t){var n,r,l,u,a=o?t.ok:t.fail,c=t.resolve,f=t.reject,d=t.domain;try{a?(o||(2==e._h&&(u=e,m.call(s,(function(){var e;O?w.emit("rejectionHandled",u):(e=s.onrejectionhandled)&&e({promise:u,reason:u._v})}))),e._h=1),!0===a?n=i:(d&&d.enter(),n=a(i),d&&(d.exit(),l=!0)),n===t.promise?f(A("Promise-chain cycle")):(r=x(n))?r.call(n,c,f):c(n)):f(i)}catch(t){d&&!l&&d.exit(),f(t)}};n.length>l;)u(n[l++]);e._c=[],e._n=!1,t&&!e._h&&(r=e,m.call(s,(function(){var e,t,n=r._v,i=M(r);if(i&&(e=C((function(){O?w.emit("unhandledRejection",n,r):(t=s.onunhandledrejection)?t({promise:r,reason:n}):(t=s.console)&&t.error&&t.error("Unhandled promise rejection",n)})),r._h=O||M(r)?2:1),r._a=void 0,i&&e.e)throw e.v})))})))},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw A("Promise can't be resolved itself");(t=x(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,c(L,r,1),c(N,r,1))}catch(e){N.call(r,e)}})):(n._v=e,n._s=1,D(n,!1))}catch(e){N.call({_w:n,_d:!1},e)}}};P||(I=function(e){v(this,I,E,"_h"),p(e),i.call(this);try{e(c(L,this,1),c(N,this,1))}catch(e){N.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(50)(I.prototype,{then:function(e,t){var n=k(g(this,I));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=O?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),l=function(){var e=new i;this.promise=e,this.resolve=c(L,e,1),this.reject=c(N,e,1)},b.f=k=function(e){return e===I||e===u?new l:o(e)}),d(d.G+d.W+d.F*!P,{Promise:I}),n(56)(I,E),n(47)(E),u=n(24)[E],d(d.S+d.F*!P,E,{reject:function(e){var t=k(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!P),E,{resolve:function(e){return T(a&&this===u?I:this,e)}}),d(d.S+d.F*!(P&&n(71)((function(e){I.all(e).catch(r)}))),E,{all:function(e){var t=this,n=k(t),r=n.resolve,i=n.reject,o=C((function(){var n=[],o=0,l=1;_(e,!1,(function(e){var u=o++,a=!1;n.push(void 0),l++,t.resolve(e).then((function(e){a||(a=!0,n[u]=e,--l||r(n))}),i)})),--l||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=k(t),r=n.reject,i=C((function(){_(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";var r=n(142),i=n(51);n(75)("WeakSet",(function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),i=n(76),o=n(108),l=n(1),u=n(44),a=n(7),s=n(4),c=n(2).ArrayBuffer,f=n(64),d=o.ArrayBuffer,h=o.DataView,p=i.ABV&&c.isView,v=d.prototype.slice,_=i.VIEW;o="ArrayBuffer";r(r.G+r.W+r.F*(c!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,o,{isView:function(e){return p&&p(e)||s(e)&&_ in e}}),r(r.P+r.U+r.F*n(3)((function(){return!new d(2).slice(1,void 0).byteLength})),o,{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(l(this),e);for(var n=l(this).byteLength,r=u(e,n),i=u(void 0===t?n:t,n),o=(e=new(f(this,d))(a(i-r)),new h(this)),s=new h(e),c=0;r<i;)s.setUint8(c++,o.getUint8(r++));return e}}),n(47)(o)},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(76).ABV,{DataView:n(108).DataView})},function(e,t,n){n(35)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(35)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(35)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(0),i=n(15),o=n(1),l=(n(2).Reflect||{}).apply,u=Function.apply;r(r.S+r.F*!n(3)((function(){l((function(){}))})),"Reflect",{apply:function(e,t,n){return e=i(e),n=o(n),l?l(e,t,n):u.call(e,t,n)}})},function(e,t,n){var r=n(0),i=n(45),o=n(15),l=n(1),u=n(4),a=n(3),s=n(122),c=(n(2).Reflect||{}).construct,f=a((function(){function e(){}return!(c((function(){}),[],e)instanceof e)})),d=!a((function(){c((function(){}))}));r(r.S+r.F*(f||d),"Reflect",{construct:function(e,t){o(e),l(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!f)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(s.apply(e,r))}return r=n.prototype,n=i(u(r)?r:Object.prototype),r=Function.apply.call(e,n,t),u(r)?r:n}})},function(e,t,n){var r=n(11),i=n(0),o=n(1),l=n(29);i(i.S+i.F*n(3)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=l(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),i=n(22).f,o=n(1);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";function r(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)}var i=n(0),o=n(1);n(94)(r,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),i(i.S,"Reflect",{enumerate:function(e){return new r(e)}})},function(e,t,n){var r=n(22),i=n(23),o=n(20),l=n(0),u=n(4),a=n(1);l(l.S,"Reflect",{get:function e(t,n){var l,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(l=r.f(t,n))?o(l,"value")?l.value:void 0!==l.get?l.get.call(s):void 0:u(l=i(t))?e(l,n,s):void 0}})},function(e,t,n){var r=n(22),i=n(0),o=n(1);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(0),i=n(23),o=n(1);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){(n=n(0))(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),i=n(1),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(144)})},function(e,t,n){var r=n(0),i=n(1),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(11),i=n(22),o=n(23),l=n(20),u=n(0),a=n(41),s=n(1),c=n(4);u(u.S,"Reflect",{set:function e(t,n,u){var f,d=arguments.length<4?t:arguments[3],h=i.f(s(t),n);if(!h){if(c(f=o(t)))return e(f,n,u,d);h=a(0)}if(l(h,"value")){if(!1===h.writable||!c(d))return!1;if(f=i.f(d,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=u,r.f(d,n,f)}else r.f(d,n,a(0,u));return!0}return void 0!==h.set&&(h.set.call(d,u),!0)}})},function(e,t,n){var r=n(0),i=n(87);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(0),i=n(66)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),n(39)("includes")},function(e,t,n){"use strict";var r=n(0),i=n(145),o=n(12),l=n(7),u=n(15),a=n(100);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return u(e),t=l(r.length),n=a(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(39)("flatMap")},function(e,t,n){"use strict";var r=n(0),i=n(145),o=n(12),l=n(7),u=n(27),a=n(100);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=l(t.length),r=a(t,0);return i(r,t,t,n,0,void 0===e?1:u(e)),r}}),n(39)("flatten")},function(e,t,n){"use strict";var r=n(0),i=n(69)(!0);n=n(3)((function(){return"ð ®·"!=="ð ®·".at(0)}));r(r.P+r.F*n,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(146);n=n(74),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n);r(r.P+r.F*n,"String",{padStart:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(146);n=n(74),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n);r(r.P+r.F*n,"String",{padEnd:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(58)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){"use strict";n(58)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){"use strict";function r(e,t){this._r=e,this._s=t}var i=n(0),o=n(30),l=n(7),u=n(70),a=n(63),s=RegExp.prototype;n(94)(r,"RegExp String",(function(){var e=this._r.exec(this._s);return{value:e,done:null===e}})),i(i.P,"String",{matchAll:function(e){if(o(this),!u(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in s?String(e.flags):a.call(e);return(n=new RegExp(e.source,~n.indexOf("g")?n:"g"+n)).lastIndex=l(e.lastIndex),new r(n,t)}})},function(e,t,n){n(83)("asyncIterator")},function(e,t,n){n(83)("observable")},function(e,t,n){var r=n(0),i=n(144),o=n(21),l=n(22),u=n(98);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),a=l.f,s=i(r),c={},f=0;s.length>f;)void 0!==(n=a(r,t=s[f++]))&&u(c,t,n);return c}})},function(e,t,n){var r=n(0),i=n(147)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(0),i=n(147)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(15),l=n(11);n(8)&&r(r.P+n(77),"Object",{__defineGetter__:function(e,t){l.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(15),l=n(11);n(8)&&r(r.P+n(77),"Object",{__defineSetter__:function(e,t){l.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(29),l=n(23),u=n(22).f;n(8)&&r(r.P+n(77),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=u(n,r))return t.get}while(n=l(n))}})},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(29),l=n(23),u=n(22).f;n(8)&&r(r.P+n(77),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=u(n,r))return t.set}while(n=l(n))}})},function(e,t,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(148)("Map")})},function(e,t,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(148)("Set")})},function(e,t,n){n(78)("Map")},function(e,t,n){n(78)("Set")},function(e,t,n){n(78)("WeakMap")},function(e,t,n){n(78)("WeakSet")},function(e,t,n){n(79)("Map")},function(e,t,n){n(79)("Set")},function(e,t,n){n(79)("WeakMap")},function(e,t,n){n(79)("WeakSet")},function(e,t,n){var r=n(0);r(r.G,{global:n(2)})},function(e,t,n){var r=n(0);r(r.S,"System",{global:n(2)})},function(e,t,n){var r=n(0),i=n(26);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){(n=n(0))(n.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){(n=n(0))(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){n=n(0);var r=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*r}})},function(e,t,n){var r=n(0),i=n(150),o=n(129);r(r.S,"Math",{fscale:function(e,t,n,r,l){return o(i(e,t,n,r,l))}})},function(e,t,n){(n=n(0))(n.S,"Math",{iaddh:function(e,t,n,r){return(t>>>0)+(r>>>0)+(((e>>>=0)&(n>>>=0)|(e|n)&~(e+n>>>0))>>>31)|0}})},function(e,t,n){(n=n(0))(n.S,"Math",{isubh:function(e,t,n,r){return(t>>>0)-(r>>>0)-((~(e>>>=0)&(n>>>=0)|~(e^n)&e-n>>>0)>>>31)|0}})},function(e,t,n){(n=n(0))(n.S,"Math",{imulh:function(e,t){var n=65535&(e=+e),r=65535&(t=+t);return(e=e>>16)*(t=t>>16)+((r=(e*r>>>0)+(n*r>>>16))>>16)+((n*t>>>0)+(65535&r)>>16)}})},function(e,t,n){(n=n(0))(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){n=n(0);var r=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*r}})},function(e,t,n){var r=n(0);r(r.S,"Math",{scale:n(150)})},function(e,t,n){(n=n(0))(n.S,"Math",{umulh:function(e,t){var n=65535&(e=+e),r=65535&(t=+t);return(e=e>>>16)*(t=t>>>16)+((r=(e*r>>>0)+(n*r>>>16))>>>16)+((n*t>>>0)+(65535&r)>>>16)}})},function(e,t,n){(n=n(0))(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:0<e}})},function(e,t,n){"use strict";var r=n(0),i=n(24),o=n(2),l=n(64),u=n(137);r(r.P+r.R,"Promise",{finally:function(e){var t=l(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(0),i=n(107),o=n(136);r(r.S,"Promise",{try:function(e){var t=i.f(this);return((e=o(e)).e?t.reject:t.resolve)(e.v),t.promise}})},function(e,t,n){var r=n(36),i=n(1),o=r.key,l=r.set;r.exp({defineMetadata:function(e,t,n,r){l(e,t,i(n),o(r))}})},function(e,t,n){var r=n(36),i=n(1),o=r.key,l=r.map,u=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=l(i(t),n,!1);return!(void 0===r||!r.delete(e))&&(!!r.size||((r=u.get(t)).delete(n),!!r.size||u.delete(t)))}})},function(e,t,n){function r(e,t,n){return u(e,t,n)?a(e,t,n):null!==(t=l(t))?r(e,t,n):void 0}var i=n(36),o=n(1),l=n(23),u=i.has,a=i.get,s=i.key;i.exp({getMetadata:function(e,t){return r(e,o(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){function r(e,t){var n=s(e,t);return null!==(e=a(e))&&(e=r(e,t)).length?n.length?o(new i(n.concat(e))):e:n}var i=n(140),o=n(149),l=n(36),u=n(1),a=n(23),s=l.keys,c=l.key;l.exp({getMetadataKeys:function(e){return r(u(e),arguments.length<2?void 0:c(arguments[1]))}})},function(e,t,n){var r=n(36),i=n(1),o=r.get,l=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:l(arguments[2]))}})},function(e,t,n){var r=n(36),i=n(1),o=r.keys,l=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:l(arguments[1]))}})},function(e,t,n){function r(e,t,n){return!!u(e,t,n)||null!==(t=l(t))&&r(e,t,n)}var i=n(36),o=n(1),l=n(23),u=i.has,a=i.key;i.exp({hasMetadata:function(e,t){return r(e,o(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(36),i=n(1),o=r.has,l=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:l(arguments[2]))}})},function(e,t,n){var r=n(36),i=n(1),o=n(15),l=r.key,u=r.set;r.exp({metadata:function(e,t){return function(n,r){u(e,t,(void 0!==r?i:o)(n),l(r))}}})},function(e,t,n){var r=n(0),i=n(106)(),o=n(2).process,l="process"==n(26)(o);r(r.G,{asap:function(e){var t=l&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";function r(e){return null==e?void 0:h(e)}function i(e){var t=e._c;t&&(e._c=void 0,t())}function o(e){return void 0===e._o}function l(e){o(e)||(e._o=void 0,i(e))}function u(e,t){p(e),this._c=void 0,this._o=e,e=new b(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:h(n),this._c=n)}catch(t){return void e.error(t)}o(this)&&i(this)}var a=n(0),s=n(2),c=n(24),f=n(106)(),d=n(6)("observable"),h=n(15),p=n(1),v=n(48),_=n(50),g=n(17),m=n(49),y=m.RETURN,b=(u.prototype=_({},{unsubscribe:function(){l(this)}}),function(e){this._s=e}),C=(b.prototype=_({},{next:function(e){var t=this._s;if(!o(t)){var n=t._o;try{var i=r(n.next);if(i)return i.call(n,e)}catch(e){try{l(t)}finally{throw e}}}},error:function(e){var t=this._s;if(o(t))throw e;var n=t._o;t._o=void 0;try{var l=r(n.error);if(!l)throw e;e=l.call(n,e)}catch(e){try{i(t)}finally{throw e}}return i(t),e},complete:function(e){var t=this._s;if(!o(t)){var n=t._o;t._o=void 0;try{var l=r(n.complete);e=l?l.call(n,e):void 0}catch(e){try{i(t)}finally{throw e}}return i(t),e}}}),function(e){v(this,C,"Observable","_f")._f=h(e)});_(C.prototype,{subscribe:function(e){return new u(e,this._f)},forEach:function(e){var t=this;return new(c.Promise||s.Promise)((function(n,r){h(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n})}))}}),_(C,{from:function(e){var t,n="function"==typeof this?this:C,i=r(p(e)[d]);return i?(t=p(i.call(e))).constructor===n?t:new n((function(e){return t.subscribe(e)})):new n((function(t){var n=!1;return f((function(){if(!n){try{if(m(e,!1,(function(e){if(t.next(e),n)return y}))===y)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}})),function(){n=!0}}))},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:C)((function(e){var t=!1;return f((function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}})),function(){t=!0}}))}}),g(C.prototype,d,(function(){return this})),a(a.G,{Observable:C}),n(47)("Observable")},function(e,t,n){function r(e){return function(t,n){var r=2<arguments.length,i=r&&l.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}}var i=n(2),o=n(0),l=(n=n(74),[].slice);n=/MSIE .\./.test(n);o(o.G+o.B+o.F*n,{setTimeout:r(i.setTimeout),setInterval:r(i.setInterval)})},function(e,t,n){var r=n(0);n=n(105);r(r.G+r.B,{setImmediate:n.set,clearImmediate:n.clear})},function(e,t,n){for(var r=n(102),i=n(43),o=n(18),l=n(2),u=n(17),a=n(59),s=(n=n(6))("iterator"),c=n("toStringTag"),f=a.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(d),p=0;p<h.length;p++){var v,_=h[p],g=d[_],m=l[_],y=m&&m.prototype;if(y&&(y[s]||u(y,s,f),y[c]||u(y,c,_),a[_]=f,g))for(v in r)y[v]||o(y,v,r[v],!0)}},function(e,t,n){(function(t){!function(t){"use strict";var n,r,i,o,l,u,a,s,c=Object.prototype,f=c.hasOwnProperty,d=(v="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",h=v.asyncIterator||"@@asyncIterator",p=v.toStringTag||"@@toStringTag",v="object"==typeof e,_=t.regeneratorRuntime;function g(e,t,a,s){var c,f,d,h;t=t&&t.prototype instanceof y?t:y,t=Object.create(t.prototype),s=new w(s||[]);return t._invoke=(c=e,f=a,d=s,h=r,function(e,t){if(h===o)throw new Error("Generator is already running");if(h===l){if("throw"===e)throw t;return I()}for(d.method=e,d.arg=t;;){var a=d.delegate;if(a&&(a=function e(t,r){var i=t.iterator[r.method];if(i===n){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=n,e(t,r),"throw"===r.method))return u;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}return"throw"===(i=m(i,t.iterator,r.arg)).type?(r.method="throw",r.arg=i.arg,r.delegate=null,u):(i=i.arg)?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=n),r.delegate=null,u):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,u)}(a,d))){if(a===u)continue;return a}if("next"===d.method)d.sent=d._sent=d.arg;else if("throw"===d.method){if(h===r)throw h=l,d.arg;d.dispatchException(d.arg)}else"return"===d.method&&d.abrupt("return",d.arg);if(h=o,"normal"===(a=m(c,f,d)).type){if(h=d.done?l:i,a.arg!==u)return{value:a.arg,done:d.done}}else"throw"===a.type&&(h=l,d.method="throw",d.arg=a.arg)}}),t}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function y(){}function b(){}function C(){}function S(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function T(e){function n(t,r,i,o){var l;if("throw"!==(t=m(e[t],e,r)).type)return(r=(l=t.arg).value)&&"object"==typeof r&&f.call(r,"__await")?Promise.resolve(r.__await).then((function(e){n("next",e,i,o)}),(function(e){n("throw",e,i,o)})):Promise.resolve(r).then((function(e){l.value=e,i(l)}),o);o(t.arg)}var r;"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(e,t){function i(){return new Promise((function(r,i){n(e,t,r,i)}))}return r=r?r.then(i,i):i()}}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function R(e){if(e){var t,r=e[d];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return t=-1,(r=function r(){for(;++t<e.length;)if(f.call(e,t))return r.value=e[t],r.done=!1,r;return r.value=n,r.done=!0,r}).next=r}return{next:I}}function I(){return{value:n,done:!0}}_?v&&(e.exports=_):((_=t.regeneratorRuntime=v?e.exports:{}).wrap=g,r="suspendedStart",i="suspendedYield",o="executing",l="completed",u={},(v={})[d]=function(){return this},(a=(a=Object.getPrototypeOf)&&a(a(R([]))))&&a!==c&&f.call(a,d)&&(v=a),s=C.prototype=y.prototype=Object.create(v),(b.prototype=s.constructor=C).constructor=b,C[p]=b.displayName="GeneratorFunction",_.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},_.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,p in e||(e[p]="GeneratorFunction")),e.prototype=Object.create(s),e},_.awrap=function(e){return{__await:e}},S(T.prototype),T.prototype[h]=function(){return this},_.AsyncIterator=T,_.async=function(e,t,n,r){var i=new T(g(e,t,n,r));return _.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(s),s[p]="Generator",s[d]=function(){return this},s.toString=function(){return"[object Generator]"},_.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},_.values=R,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&f.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return l.type="throw",l.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var i=this.tryEntries.length-1;0<=i;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=f.call(o,"catchLoc"),a=f.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&f.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var o=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(n=i.completion).type&&(r=n.arg,A(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),u}})}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n(81))},function(e,t,n){n(359),e.exports=n(24).RegExp.escape},function(e,t,n){var r=n(0),i=n(360)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){e.exports=n(388)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=a(e);n=t?(n=a(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this;if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return u(i)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=n(34).EventEmitter,c=n(13),f=n(363),d=n(155),h=n(378),p=n(65),v=n(379),_=n(16),g=n(52),m=n(53),y=n(380),b=n(40),C=n(381),S=n(382),T=new(n=n(14))("JsSIP:UA").debug,E=new n("JsSIP:UA").error,A={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};e.exports=function(){var e=a,t=s;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t);var n,r=l(a);function a(e){var t;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");if(T("new() [configuration:%o]",e),(t=r.call(this))._cache={credentials:{}},t._configuration=Object.assign({},S.settings),t._dynConfiguration={},t._dialogs={},t._applicants={},t._sessions={},t._transport=null,t._contact=null,t._status=A.STATUS_INIT,t._error=null,t._transactions={nist:{},nict:{},ist:{},ict:{}},t._data={},t._closeTimer=null,void 0===e)throw new TypeError("Not enough arguments");try{t._loadConfig(e)}catch(e){throw t._status=A.STATUS_NOT_READY,t._error=A.CONFIGURATION_ERROR,e}return t._registrator=new f(u(t)),t}return e=a,t=[{key:"C",get:function(){return A}}],(n=[{key:"C",get:function(){return A}},{key:"status",get:function(){return this._status}},{key:"contact",get:function(){return this._contact}},{key:"configuration",get:function(){return this._configuration}},{key:"transport",get:function(){return this._transport}},{key:"start",value:function(){T("start()"),this._status===A.STATUS_INIT?this._transport.connect():this._status===A.STATUS_USER_CLOSED?(T("restarting UA"),null!==this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=A.STATUS_INIT,this._transport.connect()):this._status===A.STATUS_READY?T("UA is in READY status, not restarted"):T("ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this._dynConfiguration.register=this._configuration.register}},{key:"register",value:function(){T("register()"),this._dynConfiguration.register=!0,this._registrator.register()}},{key:"unregister",value:function(e){T("unregister()"),this._dynConfiguration.register=!1,this._registrator.unregister(e)}},{key:"registrator",value:function(){return this._registrator}},{key:"isRegistered",value:function(){return this._registrator.registered}},{key:"isConnected",value:function(){return this._transport.isConnected()}},{key:"call",value:function(e,t){T("call()");var n=new d(this);return n.connect(e,t),n}},{key:"sendMessage",value:function(e,t,n){T("sendMessage()");var r=new h(this);return r.send(e,t,n),r}},{key:"terminateSessions",value:function(e){for(var t in T("terminateSessions()"),this._sessions)this._sessions[t].isEnded()||this._sessions[t].terminate(e)}},{key:"stop",value:function(){var e=this;if(T("stop()"),this._dynConfiguration={},this._status===A.STATUS_USER_CLOSED)T("UA already closed");else{this._registrator.close();var t,n,r=Object.keys(this._sessions).length;for(t in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,t)){T("closing session ".concat(t));try{this._sessions[t].terminate()}catch(e){}}for(n in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,n))try{this._applicants[n].close()}catch(e){}this._status=A.STATUS_USER_CLOSED,0===Object.keys(this._transactions.nict).length+Object.keys(this._transactions.nist).length+Object.keys(this._transactions.ict).length+Object.keys(this._transactions.ist).length&&0===r?this._transport.disconnect():this._closeTimer=setTimeout((function(){e._closeTimer=null,e._transport.disconnect()}),2e3)}}},{key:"normalizeTarget",value:function(e){return _.normalizeTarget(e,this._configuration.hostport_params)}},{key:"get",value:function(e){switch(e){case"authorization_user":return this._configuration.authorization_user;case"realm":return this._configuration.realm;case"ha1":return this._configuration.ha1;case"authorization_jwt":return this._configuration.authorization_jwt;default:return void E('get() | cannot get "%s" parameter in runtime',e)}}},{key:"set",value:function(e,t){switch(e){case"authorization_user":this._configuration.authorization_user=String(t);break;case"password":this._configuration.password=String(t);break;case"realm":this._configuration.realm=String(t);break;case"ha1":this._configuration.ha1=String(t),this._configuration.password=null;break;case"authorization_jwt":this._configuration.authorization_jwt=String(t);break;case"display_name":this._configuration.display_name=t;break;default:return E('set() | cannot set "%s" parameter in runtime',e),!1}return!0}},{key:"newTransaction",value:function(e){this._transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})}},{key:"destroyTransaction",value:function(e){delete this._transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})}},{key:"newDialog",value:function(e){this._dialogs[e.id]=e}},{key:"destroyDialog",value:function(e){delete this._dialogs[e.id]}},{key:"newMessage",value:function(e,t){this._applicants[e]=e,this.emit("newMessage",t)}},{key:"destroyMessage",value:function(e){delete this._applicants[e]}},{key:"newRTCSession",value:function(e,t){this._sessions[e.id]=e,this.emit("newRTCSession",t)}},{key:"destroyRTCSession",value:function(e){delete this._sessions[e.id]}},{key:"registered",value:function(e){this.emit("registered",e)}},{key:"unregistered",value:function(e){this.emit("unregistered",e)}},{key:"registrationFailed",value:function(e){this.emit("registrationFailed",e)}},{key:"receiveRequest",value:function(e){var t,n,r,i=e.method;if(e.ruri.user!==this._configuration.uri.user&&e.ruri.user!==this._contact.uri.user)T("Request-URI does not point to us"),e.method!==c.ACK&&e.reply_sl(404);else if(e.ruri.scheme===c.SIPS)e.reply_sl(416);else if(!p.checkTransaction(this,e)){if(i===c.INVITE?new p.InviteServerTransaction(this,this._transport,e):i!==c.ACK&&i!==c.CANCEL&&new p.NonInviteServerTransaction(this,this._transport,e),i===c.OPTIONS)e.reply(200);else if(i===c.MESSAGE){if(0===this.listeners("newMessage").length)return void e.reply(405);new h(this).init_incoming(e)}else if(i===c.INVITE&&!e.to_tag&&0===this.listeners("newRTCSession").length)return void e.reply(405);if(e.to_tag)(r=this._findDialog(e.call_id,e.from_tag,e.to_tag))?r.receiveRequest(e):i===c.NOTIFY?(t=this._findSession(e))?t.receiveRequest(e):(T("received NOTIFY request for a non existent subscription"),e.reply(481,"Subscription does not exist")):i!==c.ACK&&e.reply(481);else switch(i){case c.INVITE:window.RTCPeerConnection?e.hasHeader("replaces")?(n=e.replaces,(r=this._findDialog(n.call_id,n.from_tag,n.to_tag))?(t=r.owner).isEnded()?e.reply(603):t.receiveRequest(e):e.reply(481)):(t=new d(this)).init_incoming(e):(E("INVITE received but WebRTC is not supported"),e.reply(488));break;case c.BYE:e.reply(481);break;case c.CANCEL:(t=this._findSession(e))?t.receiveRequest(e):T("received CANCEL request for a non existent session");break;case c.ACK:break;case c.NOTIFY:this.emit("sipEvent",{event:e.event,request:e}),e.reply(200);break;default:e.reply(405)}}}},{key:"_findSession",value:function(e){var t=e.call_id,n=e.from_tag;e=e.to_tag,n=this._sessions[t+n],t=this._sessions[t+e];return n||t||null}},{key:"_findDialog",value:function(e,t,n){return this._dialogs[e+t+n]||this._dialogs[e+n+t]||null}},{key:"_loadConfig",value:function(e){try{S.load(this._configuration,e)}catch(e){throw e}0===this._configuration.display_name&&(this._configuration.display_name="0"),this._configuration.instance_id||(this._configuration.instance_id=_.newUUID()),this._configuration.jssip_id=_.createRandomToken(5),(e=this._configuration.uri.clone()).user=null,this._configuration.hostport_params=e.toString().replace(/^sip:/i,"");try{this._transport=new v(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=function(e){this.emit("connecting",e)}.bind(this),this._transport.onconnect=function(e){this._status!==A.STATUS_USER_CLOSED&&(this._status=A.STATUS_READY,this._error=null,this.emit("connected",e),this._dynConfiguration.register&&this._registrator.register())}.bind(this),this._transport.ondisconnect=function(e){for(var t=0,n=["nict","ict","nist","ist"];t<n.length;t++){var r,i=n[t];for(r in this._transactions[i])Object.prototype.hasOwnProperty.call(this._transactions[i],r)&&this._transactions[i][r].onTransportError()}this.emit("disconnected",e),this._registrator.onTransportClosed(),this._status!==A.STATUS_USER_CLOSED&&(this._status=A.STATUS_NOT_READY,this._error=A.NETWORK_ERROR)}.bind(this),this._transport.ondata=function(e){var t,n=e.transport,r=e.message;if((r=y.parseMessage(r,this))&&!(this._status===A.STATUS_USER_CLOSED&&r instanceof b.IncomingRequest)&&C(r,this,n))if(r instanceof b.IncomingRequest)r.transport=n,this.receiveRequest(r);else if(r instanceof b.IncomingResponse)switch(r.method){case c.INVITE:(t=this._transactions.ict[r.via_branch])&&t.receiveResponse(r);break;case c.ACK:break;default:(t=this._transactions.nict[r.via_branch])&&t.receiveResponse(r)}}.bind(this)}catch(e){throw E(e),new g.ConfigurationError("sockets",this._configuration.sockets)}delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),this._configuration.registrar_server||((e=this._configuration.uri.clone()).user=null,e.clearParams(),e.clearHeaders(),this._configuration.registrar_server=e),this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new m("sip",_.createRandomToken(8),this._configuration.via_host,null,{transport:"ws"}),this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString:function(){var e=(t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).anonymous||null,t=t.outbound||null,n="<";return n+=e?this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":this.pub_gruu||this.uri.toString(),!t||(e?this.temp_gruu:this.pub_gruu)||(n+=";ob"),n+">"}};var t,n,r=["authorization_user","password","realm","ha1","authorization_jwt","display_name","register"];for(t in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,t)&&(-1!==r.indexOf(t)?Object.defineProperty(this._configuration,t,{writable:!0,configurable:!1}):Object.defineProperty(this._configuration,t,{writable:!1,configurable:!1}));for(n in T("configuration parameters after validation:"),this._configuration)if(Object.prototype.hasOwnProperty.call(S.settings,n))switch(n){case"uri":case"registrar_server":T("- ".concat(n,": ").concat(this._configuration[n]));break;case"password":case"ha1":case"authorization_jwt":T("- ".concat(n,": NOT SHOWN"));break;default:T("- ".concat(n,": ").concat(JSON.stringify(this._configuration[n])))}}}])&&i(e.prototype,n),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),a}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(16),o=n(13),l=n(40),u=n(80),a=new(n(14))("JsSIP:Registrator").debug;e.exports=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._ua=t,this._transport=n,this._registrar=t.configuration.registrar_server,this._expires=t.configuration.register_expires,this._call_id=i.createRandomToken(22),this._cseq=0,this._to_uri=t.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=";+sip.ice",this._extraHeaders=[],this._extraContactParams="",this._contact+=";reg-id=".concat(1),this._contact+=';+sip.instance="<urn:uuid:'.concat(this._ua.configuration.instance_id,'>"')}var t,n;return t=e,(n=[{key:"registered",get:function(){return this._registered}},{key:"setExtraHeaders",value:function(e){Array.isArray(e)||(e=[]),this._extraHeaders=e.slice()}},{key:"setExtraContactParams",value:function(e){for(var t in e instanceof Object||(e={}),this._extraContactParams="",e){var n;Object.prototype.hasOwnProperty.call(e,t)&&(n=e[t],this._extraContactParams+=";".concat(t),n&&(this._extraContactParams+="=".concat(n)))}}},{key:"register",value:function(){var e,t=this;this._registering?a("Register request in progress..."):((e=this._extraHeaders.slice()).push("Contact: ".concat(this._contact,";expires=").concat(this._expires).concat(this._extraContactParams)),e.push("Expires: ".concat(this._expires)),e=new l.OutgoingRequest(o.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},e),e=new u(this._ua,e,{onRequestTimeout:function(){t._registrationFailure(null,o.causes.REQUEST_TIMEOUT)},onTransportError:function(){t._registrationFailure(null,o.causes.CONNECTION_ERROR)},onAuthenticated:function(){t._cseq+=1},onReceiveResponse:function(e){if(e.cseq===t._cseq)switch(null!==t._registrationTimer&&(clearTimeout(t._registrationTimer),t._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):if(t._registering=!1,!e.hasHeader("Contact")){a("no Contact header in response to REGISTER, response ignored");break}var n=e.headers.Contact.reduce((function(e,t){return e.concat(t.parsed)}),[]).find((function(e){return e.uri.user===t._ua.contact.uri.user}));if(!n){a("no Contact header pointing to us, response ignored");break}var r=(r=(r=!(r=n.getParam("expires"))&&e.hasHeader("expires")?e.getHeader("expires"):r)||t._expires,64<(r=(r=Number(r))<10?10:r)?1e3*r/2+Math.floor(1e3*(r/2-32)*Math.random()):1e3*r-5e3);t._registrationTimer=setTimeout((function(){t._registrationTimer=null,0===t._ua.listeners("registrationExpiring").length?t.register():t._ua.emit("registrationExpiring")}),r),n.hasParam("temp-gruu")&&(t._ua.contact.temp_gruu=n.getParam("temp-gruu").replace(/"/g,"")),n.hasParam("pub-gruu")&&(t._ua.contact.pub_gruu=n.getParam("pub-gruu").replace(/"/g,"")),t._registered||(t._registered=!0,t._ua.registered({response:e}));break;case/^423$/.test(e.status_code):e.hasHeader("min-expires")?(t._expires=Number(e.getHeader("min-expires")),t._expires<10&&(t._expires=10),t.register()):(a("423 response received for REGISTER without Min-Expires"),t._registrationFailure(e,o.causes.SIP_FAILURE_CODE));break;default:r=i.sipErrorCause(e.status_code),t._registrationFailure(e,r)}}}),this._registering=!0,e.send())}},{key:"unregister",value:function(){var e,t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._registered?(this._registered=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),e=this._extraHeaders.slice(),n.all?e.push("Contact: *".concat(this._extraContactParams)):e.push("Contact: ".concat(this._contact,";expires=0").concat(this._extraContactParams)),e.push("Expires: 0"),n=new l.OutgoingRequest(o.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},e),new u(this._ua,n,{onRequestTimeout:function(){t._unregistered(null,o.causes.REQUEST_TIMEOUT)},onTransportError:function(){t._unregistered(null,o.causes.CONNECTION_ERROR)},onAuthenticated:function(){t._cseq+=1},onReceiveResponse:function(e){switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):t._unregistered(e);break;default:var n=i.sipErrorCause(e.status_code);t._unregistered(e,n)}}}).send()):a("already unregistered")}},{key:"close",value:function(){this._registered&&this.unregister()}},{key:"onTransportClosed",value:function(){this._registering=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}},{key:"_registrationFailure",value:function(e,t){this._registering=!1,this._ua.registrationFailed({response:e||null,cause:t}),this._registered&&(this._registered=!1,this._ua.unregistered({response:e||null,cause:t}))}},{key:"_unregistered",value:function(e,t){this._registering=!1,this._registered=!1,this._ua.unregistered({response:e||null,cause:t||null})}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){function r(e,t,n){var r=e.name&&e.names,i=(r=(e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={}),e.push?{}:r?t[e.name]:t),n.match(e.reg)),l=r,u=e.names;if((n=e.name)&&!u)l[n]=o(i[1]);else for(var a=0;a<u.length;a+=1)null!=i[a+1]&&(l[u[a]]=o(i[a+1]));e.push&&t[e.push].push(r)}function i(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=o(n[1]):1===n.length&&1<t.length&&(e[n[0]]=void 0),e}var o=function(e){return String(Number(e))===e?Number(e):e},l=n(151),u=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],i=t;return e.split(/(\r\n|\r|\n)/).filter(u).forEach((function(e){var t=e[0],o=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),i=n[n.length-1]);for(var u=0;u<(l[t]||[]).length;u+=1){var a=l[t][u];if(a.reg.test(o))return r(a,i,o)}})),t.media=n,t},t.parseParams=function(e){return e.split(/;\s?/).reduce(i,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(o),r=0;r<n.length;r+=3)t.push({component:n[r],ip:n[r+1],port:n[r+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(i,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=o(e):(t=o(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},function(e,t,n){function r(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var l=t.names[i];t.name?r.push(n[t.name][l]):r.push(n[t.names[i]])}else r.push(n[t.name]);return function(e){var t=1,n=arguments,r=n.length;return e.replace(o,(function(e){if(r<=t)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))}.apply(null,r)}var i=n(151),o=/%[sdv%]/g,l=["v","o","s","i","u","e","p","c","b","t","r","z","a"],u=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||l,o=t.innerOrder||u,a=[];return n.forEach((function(t){i[t].forEach((function(n){n.name in e&&null!=e[n.name]?a.push(r(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){a.push(r(t,n,e))}))}))})),e.media.forEach((function(e){a.push(r("m",i.m[0],e)),o.forEach((function(t){i[t].forEach((function(n){n.name in e&&null!=e[n.name]?a.push(r(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){a.push(r(t,n,e))}))}))}))})),a.join("\r\n")+"\r\n"}},function(e,t,n){e.exports=function(e){function t(e){let n,i,o,l=null;function u(...e){if(u.enabled){const o=u;var r=Number(new Date),i=r-(n||r);o.diff=i,o.prev=n,o.curr=r,n=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let l=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return"%";l++;const i=t.formatters[r];return"function"==typeof i&&(r=e[l],n=i.call(o,r),e.splice(l,1),l--),n}),t.formatArgs.call(o,e);(o.log||t.log).apply(o,e)}}return u.namespace=e,u.useColors=t.useColors(),u.color=t.selectColor(e),u.extend=r,u.destroy=t.destroy,Object.defineProperty(u,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==l?l:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{l=e}}),"function"==typeof t.init&&t.init(u),u}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return((t.debug=t).default=t).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[...t.names.map(i),...t.skips.map(i).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(367),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},function(e,t){var n=864e5;function r(e,t,n,r){return t=1.5*n<=t,Math.round(e/n)+" "+r+(t?"s":"")}e.exports=function(e,t){t=t||{};var i=typeof e;if(!("string"==i&&0<e.length)){if("number"==i&&isFinite(e))return(t.long?function(e){var t=Math.abs(e);return n<=t?r(e,t,n,"day"):36e5<=t?r(e,t,36e5,"hour"):6e4<=t?r(e,t,6e4,"minute"):1e3<=t?r(e,t,1e3,"second"):e+" ms"}:function(e){var t=Math.abs(e);return n<=t?Math.round(e/n)+"d":36e5<=t?Math.round(e/36e5)+"h":6e4<=t?Math.round(e/6e4)+"m":1e3<=t?Math.round(e/1e3)+"s":e+"ms"})(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}if(i=e,!(100<(i=String(i)).length)&&(i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i))){var o=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*o;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*o;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}},function(e,t,n){(function(e){var r,i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g,l=(t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,l=String(e).replace(o,(function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),a=r[n];n<i;a=r[++n])v(a)||!b(a)?l+=" "+a:l+=" "+u(a);return l},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}},{});function u(e,n){var r={seen:[],stylize:s};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,e,r.depth)}function a(e,t){return(t=u.styles[t])?"["+u.colors[t][0]+"m"+e+"["+u.colors[t][1]+"m":e}function s(e,t){return e}function c(e,n,r){if(e.customInspect&&n&&T(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n))return g(o=n.inspect(r,e))?o:c(e,o,r);if(o=function(e,t){return m(t)?e.stylize("undefined","undefined"):g(t)?(n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(n,"string")):_(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0;var n}(e,n))return o;var i,o=Object.keys(n),l=(i={},o.forEach((function(e,t){i[e]=!0})),i);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),S(n)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return f(n);if(0===o.length){if(T(n))return a=n.name?": "+n.name:"",e.stylize("[Function"+a+"]","special");if(y(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(C(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return f(n)}var u,a="",s=!1,b=["{","}"];return h(n)&&(s=!0,b=["[","]"]),T(n)&&(a=" [Function"+(n.name?": "+n.name:"")+"]"),y(n)&&(a=" "+RegExp.prototype.toString.call(n)),C(n)&&(a=" "+Date.prototype.toUTCString.call(n)),S(n)&&(a=" "+f(n)),0!==o.length||s&&0!=n.length?r<0?y(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=s?function(e,t,n,r,i){for(var o=[],l=0,u=t.length;l<u;++l)R(t,String(l))?o.push(d(e,t,n,r,String(l),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))})),o}(e,n,r,l,o):o.map((function(t){return d(e,n,r,l,t,s)})),e.seen.pop(),60<u.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?b[0]+(""===a?"":a+"\n ")+" "+u.join(",\n  ")+" "+b[1]:b[0]+a+" "+u.join(", ")+" "+b[1]):b[0]+a+b[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,o){var l,u;if((t=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(u=e.stylize("[Setter]","special")),R(r,i)||(l="["+i+"]"),u||(e.seen.indexOf(t.value)<0?-1<(u=v(n)?c(e,t.value,null):c(e,t.value,n-1)).indexOf("\n")&&(u=o?u.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+u.split("\n").map((function(e){return"   "+e})).join("\n")):u=e.stylize("[Circular]","special")),m(l)){if(o&&i.match(/^\d+$/))return u;l=(l=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.substr(1,l.length-2),e.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(l,"string"))}return l+": "+u}function h(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function v(e){return null===e}function _(e){return"number"==typeof e}function g(e){return"string"==typeof e}function m(e){return void 0===e}function y(e){return b(e)&&"[object RegExp]"===E(e)}function b(e){return"object"==typeof e&&null!==e}function C(e){return b(e)&&"[object Date]"===E(e)}function S(e){return b(e)&&("[object Error]"===E(e)||e instanceof Error)}function T(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){var i;return m(r)&&(r=e.env.NODE_DEBUG||""),n=n.toUpperCase(),l[n]||(new RegExp("\\b"+n+"\\b","i").test(r)?(i=e.pid,l[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,i,e)}):l[n]=function(){}),l[n]},(t.inspect=u).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=p,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=_,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=m,t.isRegExp=y,t.isObject=b,t.isDate=C,t.isError=S,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(369);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[A((e=new Date).getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":"),[e.getDate(),w[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(370),t._extend=function(e,t){if(t&&b(t))for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(e,t){var n;return e||((n=new Error("Promise was rejected with a falsy value")).reason=e,e=n),t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(I&&e[I]){var t;if("function"!=typeof(t=e[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(r){n(r)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),I&&Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=I,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");function o(){return i.apply(l,arguments)}var l=this;t.apply(this,n).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(O,t,o)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,i(t)),n}}).call(this,n(152))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){function n(){}e.super_=t,n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(16),o=new(n=n(14))("JsSIP:DigestAuthentication").debug,l=new n("JsSIP:DigestAuthentication").error;e.exports=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._credentials=t,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}var t,n;return t=e,(n=[{key:"get",value:function(e){switch(e){case"realm":return this._realm;case"ha1":return this._ha1;default:return void l('get() | cannot get "%s" parameter',e)}}},{key:"authenticate",value:function(e,t){var n=e.method,r=e.ruri,u=(e=e.body,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null);if(this._algorithm=t.algorithm,this._realm=t.realm,this._nonce=t.nonce,this._opaque=t.opaque,this._stale=t.stale,this._algorithm){if("MD5"!==this._algorithm)return l('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return l("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return l("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return l("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return l('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(t.qop)if(-1<t.qop.indexOf("auth-int"))this._qop="auth-int";else{if(!(-1<t.qop.indexOf("auth")))return l('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this._qop="auth"}else this._qop=null;this._method=n,this._uri=r,this._cnonce=u||i.createRandomToken(12),this._nc+=1;var a,s;t=Number(this._nc).toString(16);return this._ncHex="00000000".substr(0,8-t.length)+t,4294967296===this._nc&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=i.calculateMD5("".concat(this._credentials.username,":").concat(this._realm,":").concat(this._credentials.password)):this._ha1=this._credentials.ha1,"auth"===this._qop?(a="".concat(this._method,":").concat(this._uri),s=i.calculateMD5(a),o('authenticate() | using qop=auth [a2:"%s"]',a),this._response=i.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth:").concat(s))):"auth-int"===this._qop?(a="".concat(this._method,":").concat(this._uri,":").concat(i.calculateMD5(e||"")),s=i.calculateMD5(a),o('authenticate() | using qop=auth-int [a2:"%s"]',a),this._response=i.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth-int:").concat(s))):null===this._qop&&(a="".concat(this._method,":").concat(this._uri),s=i.calculateMD5(a),o('authenticate() | using qop=null [a2:"%s"]',a),this._response=i.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(s))),o("authenticate() | response generated"),!0}},{key:"toString",value:function(){var e=[];if(this._response)return e.push("algorithm=".concat(this._algorithm)),e.push('username="'.concat(this._credentials.username,'"')),e.push('realm="'.concat(this._realm,'"')),e.push('nonce="'.concat(this._nonce,'"')),e.push('uri="'.concat(this._uri,'"')),e.push('response="'.concat(this._response,'"')),this._opaque&&e.push('opaque="'.concat(this._opaque,'"')),this._qop&&(e.push("qop=".concat(this._qop)),e.push('cnonce="'.concat(this._cnonce,'"')),e.push("nc=".concat(this._ncHex))),"Digest ".concat(e.join(", "));throw new Error("response field does not exist, cannot generate Authorization header")}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(40),o=n(13),l=n(65),u=n(373),a=n(16),s=new(n(14))("JsSIP:Dialog").debug,c={STATUS_EARLY:1,STATUS_CONFIRMED:2};e.exports=function(){function e(t,n,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:c.STATUS_CONFIRMED,l=this,u=e;if(!(l instanceof u))throw new TypeError("Cannot call a class as a function");if(this._owner=t,this._ua=t._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!n.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};n instanceof i.IncomingResponse&&(o=n.status_code<200?c.STATUS_EARLY:c.STATUS_CONFIRMED),l=n.parseHeader("contact"),"UAS"===r?(this._id={call_id:n.call_id,local_tag:n.to_tag,remote_tag:n.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=o,this._remote_seqnum=n.cseq,this._local_uri=n.parseHeader("to").uri,this._remote_uri=n.parseHeader("from").uri,this._remote_target=l.uri,this._route_set=n.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):"UAC"===r&&(this._id={call_id:n.call_id,local_tag:n.from_tag,remote_tag:n.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=o,this._local_seqnum=n.cseq,this._local_uri=n.parseHeader("from").uri,this._remote_uri=n.parseHeader("to").uri,this._remote_target=l.uri,this._route_set=n.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),s("new ".concat(r," dialog created with status ").concat(this._state===c.STATUS_EARLY?"EARLY":"CONFIRMED"))}var t,n,f;return t=e,f=[{key:"C",get:function(){return c}}],(n=[{key:"id",get:function(){return this._id}},{key:"local_seqnum",get:function(){return this._local_seqnum},set:function(e){this._local_seqnum=e}},{key:"owner",get:function(){return this._owner}},{key:"uac_pending_reply",get:function(){return this._uac_pending_reply},set:function(e){this._uac_pending_reply=e}},{key:"uas_pending_reply",get:function(){return this._uas_pending_reply}},{key:"update",value:function(e,t){this._state=c.STATUS_CONFIRMED,s("dialog ".concat(this._id.toString(),"  changed to CONFIRMED state")),"UAC"===t&&(this._route_set=e.getHeaders("record-route").reverse())}},{key:"terminate",value:function(){s("dialog ".concat(this._id.toString()," deleted")),this._ua.destroyDialog(this)}},{key:"sendRequest",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=a.cloneArray(n.extraHeaders),i=a.cloneObject(n.eventHandlers);n=n.body||null,e=this._createRequest(e,r,n);return i.onAuthenticated=function(){t._local_seqnum+=1},new u(this,e,i).send(),e}},{key:"receiveRequest",value:function(e){this._checkInDialogRequest(e)&&(e.method===o.ACK&&null!==this._ack_seqnum?this._ack_seqnum=null:e.method===o.INVITE&&(this._ack_seqnum=e.cseq),this._owner.receiveRequest(e))}},{key:"_createRequest",value:function(e,t,n){t=a.cloneArray(t),this._local_seqnum||(this._local_seqnum=Math.floor(1e4*Math.random()));var r=e===o.CANCEL||e===o.ACK?this._local_seqnum:this._local_seqnum+=1;return new i.OutgoingRequest(e,this._remote_target,this._ua,{cseq:r,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},t,n)}},{key:"_checkInDialogRequest",value:function(e){var t,n=this;if(this._remote_seqnum)if(e.cseq<this._remote_seqnum){if(e.method!==o.ACK)return e.reply(500),!1;if(null===this._ack_seqnum||e.cseq!==this._ack_seqnum)return!1}else e.cseq>this._remote_seqnum&&(this._remote_seqnum=e.cseq);else this._remote_seqnum=e.cseq;if(e.method===o.INVITE||e.method===o.UPDATE&&e.body){if(!0===this._uac_pending_reply)e.reply(491);else{if(!0===this._uas_pending_reply)return t=1+(10*Math.random()|0),e.reply(500,null,["Retry-After:".concat(t)]),!1;this._uas_pending_reply=!0,e.server_transaction.on("stateChanged",(function t(){e.server_transaction.state!==l.C.STATUS_ACCEPTED&&e.server_transaction.state!==l.C.STATUS_COMPLETED&&e.server_transaction.state!==l.C.STATUS_TERMINATED||(e.server_transaction.removeListener("stateChanged",t),n._uas_pending_reply=!1)}))}e.hasHeader("contact")&&e.server_transaction.on("stateChanged",(function(){e.server_transaction.state===l.C.STATUS_ACCEPTED&&(n._remote_target=e.parseHeader("contact").uri)}))}else e.method===o.NOTIFY&&e.hasHeader("contact")&&e.server_transaction.on("stateChanged",(function(){e.server_transaction.state===l.C.STATUS_COMPLETED&&(n._remote_target=e.parseHeader("contact").uri)}));return!0}}])&&r(t.prototype,n),f&&r(t,f),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(13),o=n(65),l=n(155),u=n(80),a={onRequestTimeout:function(){},onTransportError:function(){},onSuccessResponse:function(){},onErrorResponse:function(){},onAuthenticated:function(){},onDialogError:function(){}};e.exports=function(){function e(t,n,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");for(var i in this._dialog=t,this._ua=t._ua,this._request=n,this._eventHandlers=r,this._reattempt=!1,this._reattemptTimer=null,a)!Object.prototype.hasOwnProperty.call(a,i)||this._eventHandlers[i]||(this._eventHandlers[i]=a[i])}var t,n;return t=e,(n=[{key:"request",get:function(){return this._request}},{key:"send",value:function(){var e=this,t=new u(this._ua,this._request,{onRequestTimeout:function(){e._eventHandlers.onRequestTimeout()},onTransportError:function(){e._eventHandlers.onTransportError()},onAuthenticated:function(t){e._eventHandlers.onAuthenticated(t)},onReceiveResponse:function(t){e._receiveResponse(t)}});t.send(),(this._request.method===i.INVITE||this._request.method===i.UPDATE&&this._request.body)&&t.clientTransaction.state!==o.C.STATUS_TERMINATED&&(this._dialog.uac_pending_reply=!0,t.clientTransaction.on("stateChanged",(function n(){t.clientTransaction.state!==o.C.STATUS_ACCEPTED&&t.clientTransaction.state!==o.C.STATUS_COMPLETED&&t.clientTransaction.state!==o.C.STATUS_TERMINATED||(t.clientTransaction.removeListener("stateChanged",n),e._dialog.uac_pending_reply=!1)})))}},{key:"_receiveResponse",value:function(e){var t=this;408===e.status_code||481===e.status_code?this._eventHandlers.onDialogError(e):e.method!==i.INVITE||491!==e.status_code||this._reattempt?200<=e.status_code&&e.status_code<300?this._eventHandlers.onSuccessResponse(e):300<=e.status_code&&this._eventHandlers.onErrorResponse(e):(this._request.cseq=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout((function(){t._dialog.owner.status!==l.C.STATUS_TERMINATED&&(t._reattempt=!0,t._request_sender.send())}),1e3))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);n=t?(n=u(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this;if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=n(34).EventEmitter,s=n(13),c=n(52),f=n(16),d=new(n(14))("JsSIP:RTCSession:DTMF").debug,h={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};e.exports=function(){var e=r,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t);var n=l(r);function r(e){var t;if(this instanceof r)return(t=n.call(this))._session=e,t._direction=null,t._tone=null,t._duration=null,t._request=null,t;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"tone",get:function(){return this._tone}},{key:"duration",get:function(){return this._duration}},{key:"send",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new c.InvalidStateError(this._session.status);var r=f.cloneArray(n.extraHeaders);if(this.eventHandlers=f.cloneObject(n.eventHandlers),"string"==typeof e)e=e.toUpperCase();else{if("number"!=typeof e)throw new TypeError("Invalid tone: ".concat(e));e=e.toString()}if(!e.match(/^[0-9A-DR#*]$/))throw new TypeError("Invalid tone: ".concat(e));this._tone=e,this._duration=n.duration,r.push("Content-Type: application/dtmf-relay"),e="Signal=".concat(this._tone,"\r\n"),e+="Duration=".concat(this._duration),this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(s.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){t.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:function(e){t.eventHandlers.onFailed&&t.eventHandlers.onFailed(),t.emit("failed",{originator:"remote",response:e})},onRequestTimeout:function(){t._session.onRequestTimeout()},onTransportError:function(){t._session.onTransportError()},onDialogError:function(){t._session.onDialogError()}},body:e})}},{key:"init_incoming",value:function(e){var t,n=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,r=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;this._direction="incoming",(this._request=e).reply(200),e.body&&(1<=(t=e.body.split("\n")).length&&n.test(t[0])&&(this._tone=t[0].replace(n,"$2")),2<=t.length&&r.test(t[1])&&(this._duration=parseInt(t[1].replace(r,"$2"),10))),this._duration||(this._duration=h.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:e}):d("invalid INFO DTMF received, discarded")}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(),e.exports.C=h},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);n=t?(n=u(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this;if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=n(34).EventEmitter,s=n(13),c=n(52),f=n(16);e.exports=function(){var e=r,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t);var n=l(r);function r(e){var t;if(this instanceof r)return(t=n.call(this))._session=e,t._direction=null,t._contentType=null,t._body=null,t;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"contentType",get:function(){return this._contentType}},{key:"body",get:function(){return this._body}},{key:"send",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(this._direction="outgoing",void 0===e)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new c.InvalidStateError(this._session.status);this._contentType=e,this._body=t,(r=f.cloneArray(r.extraHeaders)).push("Content-Type: ".concat(e)),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(s.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(e){n.emit("succeeded",{originator:"remote",response:e})},onErrorResponse:function(e){n.emit("failed",{originator:"remote",response:e})},onTransportError:function(){n._session.onTransportError()},onRequestTimeout:function(){n._session.onRequestTimeout()},onDialogError:function(){n._session.onDialogError()}},body:t})}},{key:"init_incoming",value:function(e){this._direction="incoming",(this.request=e).reply(200),this._contentType=e.hasHeader("Content-Type")?e.getHeader("Content-Type").toLowerCase():void 0,this._body=e.body,this._session.newInfo({originator:"remote",info:this,request:e})}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(13),o=new(n(14))("JsSIP:RTCSession:ReferNotifier").debug;e.exports=function(){function e(t,n,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._session=t,this._id=n,this._expires=r||300,this._active=!0,this.notify(100)}var t,n;return t=e,(n=[{key:"notify",value:function(e,t){if(o("notify()"),!1!==this._active){var n;t=t||i.REASON_PHRASE[e]||"",n=200<=e?"terminated;reason=noresource":"active;expires=".concat(this._expires);try{this._session.sendRequest(i.NOTIFY,{extraHeaders:["Event: ".concat("refer",";id=").concat(this._id),"Subscription-State: ".concat(n),"Content-Type: ".concat("message/sipfrag;version=2.0")],body:"SIP/2.0 ".concat(e," ").concat(t),eventHandlers:{onErrorResponse:function(){this._active=!1}}})}catch(e){o("Dropping NOTIFY message as session is already closed")}}}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);n=t?(n=u(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this;if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=n(34).EventEmitter,s=n(13),c=n(33),f=n(16),d=new(n(14))("JsSIP:RTCSession:ReferSubscriber").debug;e.exports=function(){var e=r,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t);var n=l(r);function r(e){var t;if(this instanceof r)return(t=n.call(this))._id=null,t._session=e,t;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"id",get:function(){return this._id}},{key:"sendRefer",value:function(e){var t,n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=(d("sendRefer()"),f.cloneArray(r.extraHeaders)),o=f.cloneObject(r.eventHandlers);for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&this.on(t,o[t]);var l=null;r.replaces&&(l=r.replaces._request.call_id,l=(l+=";to-tag=".concat(r.replaces._to_tag))+";from-tag=".concat(r.replaces._from_tag),l=encodeURIComponent(l)),r="Refer-To: <".concat(e).concat(l?"?Replaces=".concat(l):"",">"),i.push(r),e="Referred-By: <".concat(this._session._ua._configuration.uri._scheme,":").concat(this._session._ua._configuration.uri._user,"@").concat(this._session._ua._configuration.uri._host,">"),i.push(e),i.push("Contact: ".concat(this._session.contact)),l=this._session.sendRequest(s.REFER,{extraHeaders:i,eventHandlers:{onSuccessResponse:function(e){n._requestSucceeded(e)},onErrorResponse:function(e){n._requestFailed(e,s.causes.REJECTED)},onTransportError:function(){n._requestFailed(null,s.causes.CONNECTION_ERROR)},onRequestTimeout:function(){n._requestFailed(null,s.causes.REQUEST_TIMEOUT)},onDialogError:function(){n._requestFailed(null,s.causes.DIALOG_ERROR)}}});this._id=l.cseq}},{key:"receiveNotify",value:function(e){if(d("receiveNotify()"),e.body){var t=c.parse(e.body.trim(),"Status_Line");if(-1===t)d('receiveNotify() | error parsing NOTIFY body: "'.concat(e.body,'"'));else switch(!0){case/^100$/.test(t.status_code):this.emit("trying",{request:e,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",{request:e,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("accepted",{request:e,status_line:t});break;default:this.emit("failed",{request:e,status_line:t})}}}},{key:"_requestSucceeded",value:function(e){d("REFER succeeded"),d('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:e})}},{key:"_requestFailed",value:function(e,t){d("REFER failed"),d('emit "requestFailed"'),this.emit("requestFailed",{response:e||null,cause:t})}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);n=t?(n=u(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this;if(n&&("object"===r(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=n(34).EventEmitter,s=n(13),c=n(40),f=n(16),d=n(80),h=n(52),p=new(n(14))("JsSIP:Message").debug;e.exports=function(){var e=r,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t);var n=l(r);function r(e){var t;if(this instanceof r)return(t=n.call(this))._ua=e,t._request=null,t._closed=!1,t._direction=null,t._local_identity=null,t._remote_identity=null,t._is_replied=!1,t._data={},t;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"send",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=e;if(void 0===e||void 0===t)throw new TypeError("Not enough arguments");if(!(e=this._ua.normalizeTarget(e)))throw new TypeError("Invalid target: ".concat(i));i=f.cloneArray(r.extraHeaders);var o,l=f.cloneObject(r.eventHandlers);r=r.contentType||"text/plain";for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&this.on(o,l[o]);i.push("Content-Type: ".concat(r)),this._request=new c.OutgoingRequest(s.MESSAGE,e,this._ua,null,i),t&&(this._request.body=t),r=new d(this._ua,this._request,{onRequestTimeout:function(){n._onRequestTimeout()},onTransportError:function(){n._onTransportError()},onReceiveResponse:function(e){n._receiveResponse(e)}}),this._newMessage("local",this._request),r.send()}},{key:"init_incoming",value:function(e){this._request=e,this._newMessage("remote",e),this._is_replied||(this._is_replied=!0,e.reply(200)),this._close()}},{key:"accept",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=f.cloneArray(e.extraHeaders);e=e.body;if("incoming"!==this._direction)throw new h.NotSupportedError('"accept" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");this._is_replied=!0,this._request.reply(200,null,t,e)}},{key:"reject",value:function(){var e=(r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).status_code||480,t=r.reason_phrase,n=f.cloneArray(r.extraHeaders),r=r.body;if("incoming"!==this._direction)throw new h.NotSupportedError('"reject" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");if(e<300||700<=e)throw new TypeError("Invalid status_code: ".concat(e));this._is_replied=!0,this._request.reply(e,t,n,r)}},{key:"_receiveResponse",value:function(e){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this._succeeded("remote",e);break;default:var t=f.sipErrorCause(e.status_code);this._failed("remote",e,t)}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,s.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,s.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newMessage",value:function(e,t){"remote"===e?(this._direction="incoming",this._local_identity=t.to,this._remote_identity=t.from):"local"===e&&(this._direction="outgoing",this._local_identity=t.from,this._remote_identity=t.to),this._ua.newMessage(this,{originator:e,message:this,request:t})}},{key:"_failed",value:function(e,t,n){p("MESSAGE failed"),this._close(),p('emit "failed"'),this.emit("failed",{originator:e,response:t||null,cause:n})}},{key:"_succeeded",value:function(e,t){p("MESSAGE succeeded"),this._close(),p('emit "succeeded"'),this.emit("succeeded",{originator:e,response:t})}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i,o=n(156),l=new(i=n(14))("JsSIP:Transport").debug,u=new i("JsSIP:Transport").error,a={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:(i=n(13)).CONNECTION_RECOVERY_MIN_INTERVAL,max_interval:i.CONNECTION_RECOVERY_MAX_INTERVAL}};e.exports=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.recovery_options,r=this,i=e;if(!(r instanceof i))throw new TypeError("Cannot call a class as a function");l("new()"),this.status=a.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=n,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1;try{this.textDecoder=new TextDecoder("utf8")}catch(t){u("cannot use TextDecoder: ".concat(t))}if(void 0===t)throw new TypeError("Invalid argument. undefined 'sockets' argument");(t=t instanceof Array?t:[t]).forEach((function(e){if(!o.isSocket(e.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(e.weight&&!Number(e.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:e.socket,weight:e.weight||0,status:a.SOCKET_STATUS_READY})}),this),this._getSocket()}var t,n;return t=e,(n=[{key:"via_transport",get:function(){return this.socket.via_transport}},{key:"url",get:function(){return this.socket.url}},{key:"sip_uri",get:function(){return this.socket.sip_uri}},{key:"connect",value:function(){l("connect()"),this.isConnected()?l("Transport is already connected"):this.isConnecting()?l("Transport is connecting"):(this.close_requested=!1,this.status=a.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect()))}},{key:"disconnect",value:function(){l("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=a.STATUS_DISCONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}},{key:"send",value:function(e){return l("send()"),this.isConnected()?(e=e.toString(),l("sending message:\n\n".concat(e,"\n")),this.socket.send(e)):(u("unable to send message, transport is not connected"),!1)}},{key:"isConnected",value:function(){return this.status===a.STATUS_CONNECTED}},{key:"isConnecting",value:function(){return this.status===a.STATUS_CONNECTING}},{key:"_reconnect",value:function(){var e=this,t=(this.recover_attempts+=1,Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1));t<this.recovery_options.min_interval?t=this.recovery_options.min_interval:t>this.recovery_options.max_interval&&(t=this.recovery_options.max_interval),l("reconnection attempt: ".concat(this.recover_attempts,". next connection attempt in ").concat(t," seconds")),this.recovery_timer=setTimeout((function(){e.close_requested||e.isConnected()||e.isConnecting()||(e._getSocket(),e.connect())}),1e3*t)}},{key:"_getSocket",value:function(){var e,t=[];this.sockets.forEach((function(e){e.status!==a.SOCKET_STATUS_ERROR&&(0===t.length?t.push(e):e.weight>t[0].weight?t=[e]:e.weight===t[0].weight&&t.push(e))})),0===t.length?(this.sockets.forEach((function(e){e.status=a.SOCKET_STATUS_READY})),this._getSocket()):(e=Math.floor(Math.random()*t.length),this.socket=t[e].socket)}},{key:"_onConnect",value:function(){this.recover_attempts=0,this.status=a.STATUS_CONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}},{key:"_onDisconnect",value:function(e,t,n){this.status=a.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:e,code:t,reason:n}),this.close_requested||(this.sockets.forEach((function(e){this.socket===e.socket&&(e.status=a.SOCKET_STATUS_ERROR)}),this),this._reconnect(e))}},{key:"_onData",value:function(e){if("\r\n"===e)l("received message with CRLF Keep Alive response");else{if("string"!=typeof e){try{e=this.textDecoder?this.textDecoder.decode(e):String.fromCharCode.apply(null,new Uint8Array(e))}catch(e){return void l("received binary message failed to be converted into string, message discarded")}l("received binary message:\n\n".concat(e,"\n"))}else l("received text message:\n\n".concat(e,"\n"));this.ondata({transport:this,message:e})}}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";function r(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=n(33),l=n(40),u=new(n(14))("JsSIP:Parser").error;t.parseMessage=function(e,t){var n,i,a=e.indexOf("\r\n");if(-1===a)u("parseMessage() | no CRLF found, not a SIP message");else{var s=e.substring(0,a),c=o.parse(s,"Request_Response");if(-1!==c){c.status_code?((n=new l.IncomingResponse).status_code=c.status_code,n.reason_phrase=c.reason_phrase):((n=new l.IncomingRequest(t)).method=c.method,n.ruri=c.uri),n.data=e;for(var f=a+2;;){if(-2===(a=function(e,t){var n=t,r=0,i=0;if(e.substring(n,n+2).match(/(^\r\n)/))return-2;for(;0===r;){if(-1===(i=e.indexOf("\r\n",n)))return i;!e.substring(i+2,i+4).match(/(^\r\n)/)&&e.charAt(i+2).match(/(^\s+)/)?n=i+2:r=i}return r}(e,f))){i=f+2;break}if(-1===a)return void u("parseMessage() | malformed message");if(!0!==(c=function(e,t,n,i){var u,a=t.indexOf(":",n),s=t.substring(n,a).trim(),c=t.substring(a+1,i).trim();switch(s.toLowerCase()){case"via":case"v":e.addHeader("via",c),1===e.getHeaders("via").length?(u=e.parseHeader("Via"))&&(e.via=u,e.via_branch=u.branch):u=0;break;case"from":case"f":e.setHeader("from",c),(u=e.parseHeader("from"))&&(e.from=u,e.from_tag=u.getParam("tag"));break;case"to":case"t":e.setHeader("to",c),(u=e.parseHeader("to"))&&(e.to=u,e.to_tag=u.getParam("tag"));break;case"record-route":if(-1===(u=o.parse(c,"Record_Route")))u=void 0;else{var f,d=r(u);try{for(d.s();!(f=d.n()).done;){var h=f.value;e.addHeader("record-route",c.substring(h.possition,h.offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=h.parsed}}catch(e){d.e(e)}finally{d.f()}}break;case"call-id":case"i":e.setHeader("call-id",c),(u=e.parseHeader("call-id"))&&(e.call_id=c);break;case"contact":case"m":if(-1===(u=o.parse(c,"Contact")))u=void 0;else{var p,v=r(u);try{for(v.s();!(p=v.n()).done;){var _=p.value;e.addHeader("contact",c.substring(_.possition,_.offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=_.parsed}}catch(e){v.e(e)}finally{v.f()}}break;case"content-length":case"l":e.setHeader("content-length",c),u=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",c),u=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",c),(u=e.parseHeader("cseq"))&&(e.cseq=u.value),e instanceof l.IncomingResponse&&(e.method=u.method);break;case"max-forwards":e.setHeader("max-forwards",c),u=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",c),u=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",c),u=e.parseHeader("proxy-authenticate");break;case"session-expires":case"x":e.setHeader("session-expires",c),(u=e.parseHeader("session-expires"))&&(e.session_expires=u.expires,e.session_expires_refresher=u.refresher);break;case"refer-to":case"r":e.setHeader("refer-to",c),(u=e.parseHeader("refer-to"))&&(e.refer_to=u);break;case"replaces":e.setHeader("replaces",c),(u=e.parseHeader("replaces"))&&(e.replaces=u);break;case"event":case"o":e.setHeader("event",c),(u=e.parseHeader("event"))&&(e.event=u);break;default:e.addHeader(s,c),u=0}return void 0!==u||{error:'error parsing header "'.concat(s,'"')}}(n,e,f,a)))return void u("parseMessage() |",c.error);f=a+2}return n.hasHeader("content-length")?(t=n.getHeader("content-length"),n.body=e.substr(i,t)):n.body=e.substring(i),n}u('parseMessage() | error parsing first line of SIP message: "'.concat(s,'"'))}}},function(e,t,n){"use strict";function r(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o,l,u,a=n(13),s=n(40),c=n(16),f=new(n(14))("JsSIP:sanityCheck").debug,d=[function(){for(var e=0,t=["from","to","call_id","cseq","via"];e<t.length;e++){var n=t[e];if(!o.hasHeader(n))return f("missing mandatory header field : ".concat(n,", dropping the response")),!1}}],h=[function(){if("sip"!==o.s("to").uri.scheme)return v(416),!1},function(){if(!o.to_tag&&o.call_id.substr(0,5)===l.configuration.jssip_id)return v(482),!1},function(){if(c.str_utf8_length(o.body)<o.getHeader("content-length"))return v(400),!1},function(){var e,t=o.from_tag,n=o.call_id,r=o.cseq;if(!o.to_tag)if(o.method===a.INVITE){if(l._transactions.ist[o.via_branch])return!1;for(var i in l._transactions.ist)if(Object.prototype.hasOwnProperty.call(l._transactions.ist,i)&&(e=l._transactions.ist[i]).request.from_tag===t&&e.request.call_id===n&&e.request.cseq===r)return v(482),!1}else{if(l._transactions.nist[o.via_branch])return!1;for(var u in l._transactions.nist)if(Object.prototype.hasOwnProperty.call(l._transactions.nist,u)&&(e=l._transactions.nist[u]).request.from_tag===t&&e.request.call_id===n&&e.request.cseq===r)return v(482),!1}}],p=[function(){if(1<o.getHeaders("via").length)return f("more than one Via header field present in the response, dropping the response"),!1},function(){if(c.str_utf8_length(o.body)<o.getHeader("content-length"))return f("message body length is lower than the value in Content-Length header field, dropping the response"),!1}];function v(e){var t,n=o.getHeaders("via"),i="SIP/2.0 ".concat(e," ").concat(a.REASON_PHRASE[e],"\r\n"),l=r(n);try{for(l.s();!(t=l.n()).done;){var s=t.value;i+="Via: ".concat(s,"\r\n")}}catch(e){l.e(e)}finally{l.f()}e=o.getHeader("To"),o.to_tag||(e+=";tag=".concat(c.newTag())),i=(i=(i=(i+="To: ".concat(e,"\r\n"))+"From: ".concat(o.getHeader("From"),"\r\n"))+"Call-ID: ".concat(o.call_id,"\r\n"))+"CSeq: ".concat(o.cseq," ").concat(o.method,"\r\n"),u.send(i+="\r\n")}e.exports=function(e,t,n){o=e,l=t,u=n;var i,a=r(d);try{for(a.s();!(i=a.n()).done;)if(!1===(0,i.value)())return!1}catch(e){a.e(e)}finally{a.f()}if(o instanceof s.IncomingRequest){var c,f=r(h);try{for(f.s();!(c=f.n()).done;)if(!1===(0,c.value)())return!1}catch(e){f.e(e)}finally{f.f()}}else if(o instanceof s.IncomingResponse){var v,_=r(p);try{for(_.s();!(v=_.n()).done;)if(!1===(0,v.value)())return!1}catch(e){_.e(e)}finally{_.f()}}return!0}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=n(16),o=n(13),l=n(33),u=n(53),a=n(156),s=n(52),c=(t.settings={authorization_user:null,password:null,realm:null,ha1:null,authorization_jwt:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:o.UPDATE,session_timers_force_refresher:!1,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:o.CONNECTION_RECOVERY_MAX_INTERVAL,connection_recovery_min_interval:o.CONNECTION_RECOVERY_MIN_INTERVAL,via_host:"".concat(i.createRandomToken(12),".invalid")},{mandatory:{sockets:function(e){var t=[];if(a.isSocket(e))t.push({socket:e});else{if(!Array.isArray(e)||!e.length)return;var n,i=function(e,t){var n,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==i.return||i.return()}finally{if(u)throw o}}}}(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;Object.prototype.hasOwnProperty.call(o,"socket")&&a.isSocket(o.socket)?t.push(o):a.isSocket(o)&&t.push({socket:o})}}catch(e){i.e(e)}finally{i.f()}}return t},uri:function(e){if(/^sip:/i.test(e)||(e="".concat(o.SIP,":").concat(e)),(e=u.parse(e))&&e.user)return e}},optional:{authorization_user:function(e){if(-1!==l.parse('"'.concat(e,'"'),"quoted_string"))return e},authorization_jwt:function(e){if("string"==typeof e)return e},user_agent:function(e){if("string"==typeof e)return e},connection_recovery_max_interval:function(e){if(i.isDecimal(e)&&0<(e=Number(e)))return e},connection_recovery_min_interval:function(e){if(i.isDecimal(e)&&0<(e=Number(e)))return e},contact_uri:function(e){if("string"==typeof e&&-1!==(e=l.parse(e,"SIP_URI")))return e},display_name:function(e){return e},instance_id:function(e){if(/^uuid:/i.test(e)&&(e=e.substr(5)),-1!==l.parse(e,"uuid"))return e},no_answer_timeout:function(e){if(i.isDecimal(e)&&0<(e=Number(e)))return e},session_timers:function(e){if("boolean"==typeof e)return e},session_timers_refresh_method:function(e){if("string"==typeof e&&((e=e.toUpperCase())===o.INVITE||e===o.UPDATE))return e},session_timers_force_refresher:function(e){if("boolean"==typeof e)return e},password:function(e){return String(e)},realm:function(e){return String(e)},ha1:function(e){return String(e)},register:function(e){if("boolean"==typeof e)return e},register_expires:function(e){if(i.isDecimal(e)&&0<(e=Number(e)))return e},registrar_server:function(e){if(/^sip:/i.test(e)||(e="".concat(o.SIP,":").concat(e)),(e=u.parse(e))&&!e.user)return e},use_preloaded_route:function(e){if("boolean"==typeof e)return e}}});t.load=function(e,t){for(var n in c.mandatory){if(!t.hasOwnProperty(n))throw new s.ConfigurationError(n);var r=t[n],o=c.mandatory[n](r);if(void 0===o)throw new s.ConfigurationError(n,r);e[n]=o}for(var l in c.optional)if(t.hasOwnProperty(l)){var u=t[l];if(!i.isEmpty(u)){var a=c.optional[l](u);if(void 0===a)throw new s.ConfigurationError(l,u);e[l]=a}}}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(33),o=new(n=n(14))("JsSIP:WebSocketInterface").debug,l=new n("JsSIP:WebSocketInterface").error;e.exports=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");o('new() [url:"%s"]',t),this._url=t,this._sip_uri=null,this._via_transport=null,this._ws=null,this._heartbeat_timer=null,this._missed_heartbeats=0,this._PING_MSG="\r\n\r\n",this._PONG_MSG="\r\n";var n=i.parse(t,"absoluteURI");if(-1===n)throw l("invalid WebSocket URI: ".concat(t)),new TypeError("Invalid argument: ".concat(t));if("wss"!==n.scheme&&"ws"!==n.scheme)throw l("invalid WebSocket URI scheme: ".concat(n.scheme)),new TypeError("Invalid argument: ".concat(t));this._sip_uri="sip:".concat(n.host).concat(n.port?":".concat(n.port):"",";transport=ws"),this._via_transport=n.scheme.toUpperCase()}var t,n;return t=e,(n=[{key:"via_transport",get:function(){return this._via_transport},set:function(e){this._via_transport=e.toUpperCase()}},{key:"sip_uri",get:function(){return this._sip_uri}},{key:"url",get:function(){return this._url}},{key:"connect",value:function(){if(o("connect()"),this.isConnected())o("WebSocket ".concat(this._url," is already connected"));else if(this.isConnecting())o("WebSocket ".concat(this._url," is connecting"));else{this._ws&&this.disconnect(),o("connecting to WebSocket ".concat(this._url));try{this._ws=new WebSocket(this._url,"sip"),this._ws.binaryType="arraybuffer",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(e){this._onError(e)}}}},{key:"disconnect",value:function(){o("disconnect()"),this._ws&&(this._ws.onopen=function(){},this._ws.onclose=function(){},this._ws.onmessage=function(){},this._ws.onerror=function(){},this._ws.close(),this._ws=null,this._clearHeartbeatTimerInternals())}},{key:"send",value:function(e){return o("send()"),this.isConnected()?(this._ws.send(e),!0):(l("unable to send message, WebSocket is not open"),!1)}},{key:"isConnected",value:function(){return this._ws&&this._ws.readyState===this._ws.OPEN}},{key:"isConnecting",value:function(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}},{key:"_onOpen",value:function(){o("WebSocket ".concat(this._url," connected")),this.onconnect(),this._heartbeat_timer&&this._clearHeartbeatTimerInternals(),o("Starting the heartbeat timer"),this._heartbeat_timer=setInterval(this._heartbeatHandler.bind(this),1e4)}},{key:"_onClose",value:function(e){var t=e.wasClean,n=e.code;e=e.reason;o("WebSocket ".concat(this._url," closed")),!1===t&&o("WebSocket abrupt disconnection"),this._clearHeartbeatTimerInternals(),this.ondisconnect(!t,n,e)}},{key:"_onMessage",value:function(e){(e=e.data)===this._PONG_MSG?this._missed_heartbeats=0:(o("received WebSocket message"),this.ondata(e))}},{key:"_onError",value:function(e){l("WebSocket ".concat(this._url," error: "),e)}},{key:"_heartbeatHandler",value:function(){try{3<=this._missed_heartbeats?(this._clearHeartbeatTimerInternals(),this.isConnected()&&(o("Disconnecting ws as max retry times exceeded"),this._ws.close())):(this._missed_heartbeats++,this._ws.send(this._PING_MSG))}catch(e){this._clearHeartbeatTimerInternals(),o("Exception in heartbeatHandler %s",e.message)}}},{key:"_clearHeartbeatTimerInternals",value:function(){o("Clearing heartbeat timer"),this._heartbeat_timer&&clearInterval(this._heartbeat_timer),this._heartbeat_timer=null,this._missed_heartbeats=0}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){const r=n(112),i=n(113);e.exports=class e{static parse(e){if(-1!==(e=i.parse(e,"Name_Addr_Header")))return e}constructor(e,t,n){if(!(e&&e instanceof r))throw new TypeError('missing or invalid "uri" parameter');this._uri=e,this._parameters={},this.display_name=t;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&this.setParam(e,n[e])}get uri(){return this._uri}get display_name(){return this._display_name}set display_name(e){this._display_name=0===e?"0":e}setParam(e,t){e&&(this._parameters[e.toLowerCase()]=null==t?null:t.toString())}getParam(e){if(e)return this._parameters[e.toLowerCase()]}hasParam(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}deleteParam(e){var t;if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e))return t=this._parameters[e],delete this._parameters[e],t}clearParams(){this._parameters={}}clone(){return new e(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}_quote(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}toString(){let e=this._display_name?`"${this._quote(this._display_name)}" `:"";e+=`<${this._uri.toString()}>`;for(const t in this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,t)&&(e+=";"+t,null!==this._parameters[t]&&(e+="="+this._parameters[t]));return e}}},function(t,n){var r;if(void 0===e)throw(r=new Error("Cannot find module 'react-native'")).code="MODULE_NOT_FOUND",r;t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";n.r(t),n.d(t,"EngageDigitalClient",(function(){return mn})),n.d(t,"getEngageDigitalVersion",(function(){return bn})),n.d(t,"EngageDigitalSession",(function(){return en})),n.d(t,"isEngageDigitalWebrtcSupported",(function(){return Cn}));var r={},i=(n.r(r),n.d(r,"shimGetUserMedia",(function(){return K})),n.d(r,"shimGetDisplayMedia",(function(){return Y})),n.d(r,"shimMediaStream",(function(){return X})),n.d(r,"shimOnTrack",(function(){return Q})),n.d(r,"shimGetSendersWithDtmf",(function(){return Z})),n.d(r,"shimGetStats",(function(){return ee})),n.d(r,"shimSenderReceiverGetStats",(function(){return te})),n.d(r,"shimAddTrackRemoveTrackWithNative",(function(){return ne})),n.d(r,"shimAddTrackRemoveTrack",(function(){return re})),n.d(r,"shimPeerConnection",(function(){return ie})),n.d(r,"fixNegotiationNeeded",(function(){return oe})),{}),o=(n.r(i),n.d(i,"shimGetUserMedia",(function(){return le})),n.d(i,"shimGetDisplayMedia",(function(){return ue})),n.d(i,"shimOnTrack",(function(){return ae})),n.d(i,"shimPeerConnection",(function(){return se})),n.d(i,"shimSenderGetStats",(function(){return ce})),n.d(i,"shimReceiverGetStats",(function(){return fe})),n.d(i,"shimRemoveStream",(function(){return de})),n.d(i,"shimRTCDataChannel",(function(){return he})),n.d(i,"shimAddTransceiver",(function(){return pe})),n.d(i,"shimGetParameters",(function(){return ve})),n.d(i,"shimCreateOffer",(function(){return _e})),n.d(i,"shimCreateAnswer",(function(){return ge})),{}),l=(n.r(o),n.d(o,"shimLocalStreamsAPI",(function(){return me})),n.d(o,"shimRemoteStreamsAPI",(function(){return ye})),n.d(o,"shimCallbacksAPI",(function(){return be})),n.d(o,"shimGetUserMedia",(function(){return Ce})),n.d(o,"shimConstraints",(function(){return Se})),n.d(o,"shimRTCIceServerUrls",(function(){return Te})),n.d(o,"shimTrackEventTransceiver",(function(){return Ee})),n.d(o,"shimCreateOfferLegacy",(function(){return Ae})),n.d(o,"shimAudioContext",(function(){return we})),{}),u=(n.r(l),n.d(l,"shimRTCIceCandidate",(function(){return Oe})),n.d(l,"shimMaxMessageSize",(function(){return ke})),n.d(l,"shimSendThrowTypeError",(function(){return Pe})),n.d(l,"shimConnectionState",(function(){return xe})),n.d(l,"removeExtmapAllowMixed",(function(){return De})),n.d(l,"shimAddIceCandidateNullOrEmpty",(function(){return Me})),n.d(l,"shimParameterlessSetLocalDescription",(function(){return Ne})),n(5)),a={domain:"domain",uri:"userIdentity",connection_recovery_max_interval:"wsConnectionRecoveryMaxInterval",connection_recovery_min_interval:"wsConnectionRecoveryMinInterval",display_name:"userName",contact_uri:"uniqueClientId",no_answer_timeout:"noAnswerTimeout",session_timers:"sessionTimers",session_timers_refresh_method:"sessionTimersRefreshMethod",register:"needRegistration",register_expires:"registerExpires",registrar_server:"registrarServer",user_agent:"userAgent",authorization_jwt:"jwtToken",authorization_user:"jwtUser"},s={mediaConstraints:"mediaConstraints",mediaStream:"mediaStream",pcConfig:"peerConnectionConfig",rtcOfferConstraints:"rtcOfferConstraints",rtcAnswerConstraints:"rtcAnswerConstraints",extraHeaders:"extraHeaders",sessionTimersExpires:"sessionTimerInterval",codecPreferences:"codecPreferences"},c={userName:"display_name"},f="connecting",d="ready",h="connected",p="disconnected",v="newRTCSession",_="reconnecting",g="reconnected",m="failed",y="errorinfo",b={connecting:"connecting",disconnected:"disconnected",peerdisconnected:"peerdisconnected",failed:"failed",errorinfo:"errorinfo",icecandidate:"icecandidate",ringing:"ringing",connected:"connected",peerconnection:"peerconnection",remotestream:"remotestream",localstream:"localstream",localvideoadded:"localvideoadded",remotevideoadded:"remotevideoadded",localvideoremoved:"localvideoremoved",remotevideoremoved:"remotevideoremoved",upgradevideoaccessdenied:"upgradevideoaccessdenied",unmuted:"unmuted",muted:"muted",calltransferinitiated:"calltransferinitiated",calltransfersucceeded:"calltransfersucceeded",screensharestarted:"screensharestarted",screensharestopped:"screensharestopped",maxresolutionsupported:"maxresolutionsupported",iceconnectionstatechanged:"iceconnectionstatechanged"},C="init",S="connected",T="disconnected",E="connected",A={hasConnected:"Connection is connected state",connectionNotInitiated:"The connection is not initiated",connectionStablishedOnce:"Connection stablished and can not initiated multiple times",invalidLogLevel:"Provided log level is invalid",sessionNotActive:"Session not active",userDeniedMediaAccess:"User Denied Media Access",requestFailed:"requestFailed",configurationError:"CONFIGURATION_ERROR",internalServerError:"Internal Error",notSupportedError:"NotSupportedError",invalidStateError:"InvalidStateError",terminated:"terminated",typeError:"TypeError",invalidEvent:"InvalidEvent",notConnected:"Not_Connected",failedToFetch:"Failed_To_Fetch",alreadyReplied:"AlreadyReplied",physicalDeviceChange:"Physical_Device_Change",connectionError:"Connection Error",registrationFailed:"registrationFailed",error:"error",removevideonotsupported:"removevideonotsupported",addvideonotsupported:"addvideonotsupported",webrtcnotsupported:"WebRTC_Not_Supported",callnotconnected:"callnotconnected"},w={userName:"userName",iceTimeout:"iceTimeout",enableWebRTCStats:"enableWebRTCStats",webRTCStatsInterval:"webRTCStatsInterval",lightOffOnVideoMute:"lightOffOnVideoMute",log:"log"},R={connected:"connected",connecting:"connecting",disconnected:"disconnected",newRTCSession:"newRTCSession",ready:"ready",reconnecting:"reconnecting",reconnected:"reconnected",failed:"failed",errorinfo:"errorinfo"},I={mode1:"packetization-mode=1"},O="audioinput",k={deviceready:"deviceready",devicechange:"devicechange",updatedstream:"updatedstream",audiooutputdevice:"audiooutputdevice",switchcamerastream:"switchcamerastream",mediaaccessdenied:"mediaaccessdenied",failed:"failed",errorinfo:"errorinfo",deviceselected:"deviceselected"},P=["VP8","rtx","VP9","H264","H264-mode1"],x=["OPUS","G722","PCMU","PCMA","telephone-event"],D={values:[void 0,null,"inactive","recvonly"]},M="Engage-Call-Transfer",N={resolution:["HD","SD","LD","QCIF"]},L={HD:{frameWidth:1280,frameHight:720,frameRate:{ideal:30,min:10}},SD:{frameWidth:640,frameHight:480,frameRate:{ideal:30,min:10}},LD:{frameWidth:320,frameHight:240,frameRate:{ideal:30,min:10}},QCIF:{frameWidth:176,frameHight:144,frameRate:{ideal:30,min:10}}},U=n(54);let j=!0,F=!0;function q(e,t,n){return(e=e.match(t))&&e.length>=n&&parseInt(e[n],10)}function H(e,t,n){if(e.RTCPeerConnection){const r=e.RTCPeerConnection.prototype,i=r.addEventListener,o=(r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=e=>{(e=n(e))&&(r.handleEvent?r.handleEvent(e):r(e))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])},r.removeEventListener);r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function V(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(j=e)?"adapter.js logging disabled":"adapter.js logging enabled"}function W(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(F=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function G(){"object"!=typeof window||j||"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}function B(e,t){F&&console.warn(e+" is deprecated, please use "+t+" instead.")}function z(e){return"[object Object]"===Object.prototype.toString.call(e)}function $(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null!==t){const n=[];e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&n.push(e)}),n.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(i=>{i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach(n=>{e(t,t.get(n),r)})}))}(e,n,i)})})}return i}const J=G;function K(e,t){const n=e&&e.navigator;if(n.mediaDevices){const e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){const r="object"==typeof e[n]?e[n]:{ideal:e[n]},i=(void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact),function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t});if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),(e={})[i("max",n)]=r.ideal):e[i("",n)]=r.ideal,t.optional.push(e)}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(r,i){if(!(61<=t.version)){if((r=JSON.parse(JSON.stringify(r)))&&"object"==typeof r.audio&&((o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])})((r=JSON.parse(JSON.stringify(r))).audio,"autoGainControl","googAutoGainControl"),o(r.audio,"noiseSuppression","googNoiseSuppression"),r.audio=e(r.audio)),r&&"object"==typeof r.video){let l=r.video.facingMode;l=l&&("object"==typeof l?l:{ideal:l});var o=t.version<66;if(l&&("user"===l.exact||"environment"===l.exact||"user"===l.ideal||"environment"===l.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete r.video.facingMode,"environment"===l.exact||"environment"===l.ideal?t=["back","rear"]:"user"!==l.exact&&"user"!==l.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then(n=>{let o=(n=n.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return(o=!o&&n.length&&t.includes("back")?n[n.length-1]:o)&&(r.video.deviceId=l.exact?{exact:o.deviceId}:{ideal:o.deviceId}),r.video=e(r.video),J("chrome: "+JSON.stringify(r)),i(r)})}r.video=e(r.video)}J("chrome: "+JSON.stringify(r))}return i(r)},i=function(e){return 64<=t.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,o){r(e,e=>{n.webkitGetUserMedia(e,t,e=>{o&&o(i(e))})})}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return r(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(i(e))))}}}}function Y(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"!=typeof t?console.error("shimGetDisplayMedia: getSourceId argument is not a function"):e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})})}function X(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Q(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)H(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e));else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function Z(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack,r=(e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i},e.RTCPeerConnection.prototype.removeTrack);e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments),-1!==(e=this._senders.indexOf(e))&&this._senders.splice(e,1)}}const n=e.RTCPeerConnection.prototype.addStream,r=(e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})},e.RTCPeerConnection.prototype.removeStream);e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{var t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ee(e){if(e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(0<arguments.length&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},o=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};return 2<=arguments.length?t.apply(this,[function(e){n(o(i(e)))},e]):new Promise((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])}).then(n,r)}}}function te(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders,n=(t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),e.RTCPeerConnection.prototype.addTrack);n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>$(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),H(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>$(t,e.track,!1))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=!0:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}}}function ne(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack,n=(e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r},e.RTCPeerConnection.prototype.addStream),r=(e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);var r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)},e.RTCPeerConnection.prototype.removeStream),i=(e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)},e.RTCPeerConnection.prototype.removeTrack);e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{var n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function re(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&65<=t.version)return ne(e);const r=e.RTCPeerConnection.prototype.getLocalStreams,i=(e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])},e.RTCPeerConnection.prototype.addStream),o=(e.RTCPeerConnection.prototype.addStream=function(t){var n;this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),this._reverseStreams[t.id]||(n=new e.MediaStream(t.getTracks()),this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n),i.apply(this,[t])},e.RTCPeerConnection.prototype.removeStream),l=(e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[(this._streams[e.id]||e).id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var i;if(this.getSenders().find(e=>e.track===t))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];return o?(o.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))})):(i=new e.MediaStream([t]),this._streams[n.id]=i,this._reverseStreams[i.id]=n,this.addStream(i)),this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[t=>{t=n(this,t),e[0].apply(null,[t])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then(e=>n(this,e))}}[t]})),e.RTCPeerConnection.prototype.setLocalDescription),u=(e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type&&(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{t=e._reverseStreams[t];var r=e._streams[t.id];n=n.replace(new RegExp(t.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0])),l.apply(this,arguments)},Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription"));function n(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{t=e._reverseStreams[t];var r=e._streams[t.id];n=n.replace(new RegExp(r.id,"g"),t.id)}),new RTCSessionDescription({type:t.type,sdp:n})}Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){var e=u.get.apply(this);return""===e.type?e:n(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}}function ie(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}[t]}))}function oe(e,t){H(e,"negotiationneeded",e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}function le(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){B("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(55<t.version&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){var n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function ue(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(n&&n.video)return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n);{const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}})}function ae(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function se(e,t){if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}}[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then(e=>{if(t.version<53&&!i)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(i,o)}}}function ce(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){const t=e.RTCPeerConnection.prototype.getSenders,n=(t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),e.RTCPeerConnection.prototype.addTrack);n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function fe(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),H(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function de(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){B("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function he(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function pe(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1];var n=e&&"sendEncodings"in e,r=(n&&e.sendEncodings.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(1<=parseFloat(e.scaleResolutionDownBy)))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(0<=parseFloat(e.maxFramerate)))throw new RangeError("max_framerate must be >= 0.0")}),t.apply(this,arguments));if(n){const t=r.sender,n=t.getParameters();"encodings"in n&&(1!==n.encodings.length||0!==Object.keys(n.encodings[0]).length)||(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return r})}}function ve(e){if("object"==typeof e&&e.RTCRtpSender){const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function _e(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}}function ge(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}}function me(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})}})}}function ye(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams||[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),!this._remoteStreams.includes(e)){this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),!(0<=e._remoteStreams.indexOf(t))){e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}})}),t.apply(e,arguments)}}}function be(e){if("object"==typeof e&&e.RTCPeerConnection){const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(e,t){var r=2<=arguments.length?arguments[2]:e;const i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=2<=arguments.length?arguments[2]:e;const i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},e=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setLocalDescription=e,t.setRemoteDescription=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=function(e,t,n){const r=l.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r}}}function Ce(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Se(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Se(e){return e&&void 0!==e.video?Object.assign({},e,{video:function e(t){return z(t)?Object.keys(t).reduce((function(n,r){var i=(o=z(t[r]))?e(t[r]):t[r],o=o&&!Object.keys(i).length;return void 0===i||o?n:Object.assign(n,{[r]:i})}),{}):t}(e.video)}):e}function Te(e){if(e.RTCPeerConnection){const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(B("RTCIceServer.url","RTCIceServer.urls"),(r=JSON.parse(JSON.stringify(r))).urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}}function Ee(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ae(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind),n=(!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo),this.getTransceivers().find(e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function we(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Re=n(55),Ie=n.n(Re);function Oe(e){if(e.RTCIceCandidate&&(!e.RTCIceCandidate||!("foundation"in e.RTCIceCandidate.prototype))){const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=Ie.a.parseCandidate(e.candidate);const i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,H(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}}function ke(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&76<=t.version&&("plan-b"===(r=this.getConfiguration().sdpSemantics)&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})),function(e){if(!e||!e.sdp)return!1;const t=Ie.a.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=Ie.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(arguments[0])){var e=function(e){let n=65536;return"firefox"===t.browser?t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637:n}(r=function(e){return null===(e=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/))||e.length<2||(e=parseInt(e[1],10))!=e?-1:e}(arguments[0])),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=Ie.a.matchPrefix(e.sdp,"a=max-message-size:");return 0<i.length?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],r);let n;n=0===e&&0===r?Number.POSITIVE_INFINITY:0===e||0===r?Math.max(e,r):Math.min(e,r),e={},Object.defineProperty(e,"maxMessageSize",{get:()=>n}),this._sctp=e}return n.apply(this,arguments)}}}function Pe(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){const n=e.RTCPeerConnection.prototype.createDataChannel;function t(e,t){const n=e.send;e.send=function(){var r=(r=arguments[0]).length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return t(e,this),e},H(e,"datachannel",e=>(t(e.channel,e.target),e))}}function xe(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;var n;return t._lastConnectionState!==t.connectionState&&(t._lastConnectionState=t.connectionState,n=new Event("connectionstatechange",e),t.dispatchEvent(n)),e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}}function De(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&71<=t.version||"safari"===t.browser&&605<=t.version)){const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(n){var r;return n&&n.sdp&&-1!==n.sdp.indexOf("\na=extmap-allow-mixed")&&(r=n.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n"),e.RTCSessionDescription&&n instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:n.type,sdp:r}):n.sdp=r),t.apply(this,arguments)}}}function Me(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function Ne(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){const t=e.RTCPeerConnection.prototype.setLocalDescription;t&&0!==t.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return t.apply(this,arguments);if(!(e={type:e.type,sdp:e.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return t.apply(this,[e]);const n="offer"===e.type?this.createOffer:this.createAnswer;return n.apply(this).then(e=>t.apply(this,[e]))})}}t=function({window:e},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=G;var u=function(e){const t={browser:null,version:null};if(void 0!==e&&e.navigator){const n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=q(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=q(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=q(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}}else t.browser="Not a browser.";return t}(e);const a={browserDetails:u,commonShim:l,extractVersion:q,disableLog:V,disableWarnings:W,sdp:Re};switch(u.browser){case"chrome":if(!t.shimChrome)return n("Chrome shim is not included in this adapter release."),a;if(null===u.version)return n("Chrome shim can not determine version, not shimming."),a;n("adapter.js shimming chrome."),a.browserShim=r,Me(e,u),Ne(e),K(e,u),X(e),ie(e,u),Q(e),re(e,u),Z(e),ee(e),te(e),oe(e,u),Oe(e),xe(e),ke(e,u),Pe(e),De(e,u);break;case"firefox":if(!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),a;n("adapter.js shimming firefox."),a.browserShim=i,Me(e,u),Ne(e),le(e,u),se(e,u),ae(e),de(e),ce(e),fe(e),he(e),pe(e),ve(e),_e(e),ge(e),Oe(e),xe(e),ke(e,u),Pe(e);break;case"safari":if(!t.shimSafari)return n("Safari shim is not included in this adapter release."),a;n("adapter.js shimming safari."),a.browserShim=o,Me(e,u),Ne(e),Te(e),Ae(e),be(e),me(e),ye(e),Ee(e),Ce(e),we(e),Oe(e),ke(e,u),Pe(e),De(e,u);break;default:n("Unsupported browser!")}return a}({window:"undefined"==typeof window?void 0:window});var Le=new u.Logger("AppEnvironment");function Ue(e,t){return e.match(t)[0].split("/")[1]}Le.debug("browserDetails %o",t.browserDetails);var je,Fe=(window&&window.navigator&&window.navigator.userAgent?function(){var e=window.navigator.userAgent.toLowerCase(),t={signalling:"SIP",clientType:"ReactJS"},n="",r="";switch(!0){case-1<e.indexOf("edge"):n="Edge",r=Ue(e,/edge\/[0-9.]*/i);break;case-1<e.indexOf("edg"):n="Edge",r=Ue(e,/edg\/[0-9.]*/i);break;case-1<e.indexOf("chrome")&&!!window.chrome:var i=null==(i=window.navigator.userAgentData)?void 0:i.brands;r=i&&i.find((function(e){return"Google Chrome"===e.brand}))?(n="Chrome",Ue(e,/chrome\/[0-9.]*/i)):n="Other";break;case-1<e.indexOf("firefox"):n="Firefox",r=Ue(e,/firefox\/[0-9.]*/i);break;case-1<e.indexOf("safari"):n="Safari",r=Ue(e,/safari\/[0-9.]*/i);break;default:r=n="Other"}var o="Other";return-1!=e.indexOf("win")?o="Windows":-1!=navigator.userAgent.indexOf("like mac")?o="iOS":-1!=e.indexOf("mac")?o="Macintosh":-1!=e.indexOf("linux")?o="Linux":-1!=e.indexOf("android")&&(o="Android"),t.browserType=n,t.browserVersion=r,t.os=o,t}:function(){var e={signalling:"SIP",clientType:"other",browserType:"na",browserVersion:"na",os:"other",version:"na"};try{Le.debug("Get info if its react-native based application"),function(){Le.debug("Start Initializing ReactNative");var e=(l=n(386)).mediaDevices,t=l.MediaStream,r=l.MediaStreamTrack,i=l.RTCIceCandidate,o=l.RTCPeerConnection,l=l.RTCSessionDescription;window.RTCPeerConnection=window.RTCPeerConnection||o,window.RTCIceCandidate=window.RTCIceCandidate||i,window.RTCSessionDescription=window.RTCSessionDescription||l,window.MediaStream=window.MediaStream||t,window.MediaStreamTrack=window.MediaStreamTrack||r,window.navigator.mediaDevices=window.navigator.mediaDevices||e,window.navigator.getUserMedia=window.navigator.getUserMedia||e.getUserMedia,Le.debug("ReactNative initialization completed")}();var t=n(385);e.os=t.Platform.OS,e.clientType="ReactNative",e.version="ios"===t.Platform.OS?t.Platform.Version:t.Platform.constants.Release}catch(e){Le.debug("Error in AppEnvironment",e)}return e})(),qe=n(9);function He(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}He(je={},(t=n(10)).causes.CONNECTION_ERROR,{code:16001,message:"Connection Error"}),He(je,t.causes.REQUEST_TIMEOUT,{code:16002,message:"Request Timeout"}),He(je,t.causes.SIP_FAILURE_CODE,{code:16003,message:"Other Sip Failure"}),He(je,t.causes.INTERNAL_ERROR,{code:16004,message:"Internal Error"}),He(je,t.causes.BUSY,{code:16005,message:"Busy"}),He(je,t.causes.REJECTED,{code:16006,message:"Rejected"}),He(je,t.causes.REDIRECTED,{code:16007,message:"Redirected"}),He(je,t.causes.UNAVAILABLE,{code:16008,message:"Unavailable"}),He(je,t.causes.NOT_FOUND,{code:16009,message:"Not Found"}),He(je,t.causes.ADDRESS_INCOMPLETE,{code:16010,message:"Address Incomplete"}),He(je,t.causes.INCOMPATIBLE_SDP,{code:16011,message:"Incompatible SDP"}),He(je,t.causes.MISSING_SDP,{code:16012,message:"Missing SDP"}),He(je,t.causes.AUTHENTICATION_ERROR,{code:16013,message:"Authentication Error"}),He(je,t.causes.WEBRTC_ERROR,{code:16014,message:"WebRTC Error"}),He(je,t.causes.CANCELED,{code:16015,message:"Request canceled"}),He(je,t.causes.NO_ANSWER,{code:16016,message:"No Answer"}),He(je,t.causes.NO_ACK,{code:16017,message:"No ACK has been received"}),He(je,t.causes.DIALOG_ERROR,{code:16018,message:"Dialog Error"}),He(je,t.causes.USER_DENIED_MEDIA_ACCESS,{code:16019,message:"Media access is denied"}),He(je,t.causes.BAD_MEDIA_DESCRIPTION,{code:16020,message:"Bad Media Description"}),He(je,A.registrationFailed,{code:16021,message:"Registration is failed. Reason : %s"}),He(je,A.requestFailed,{code:16022,message:"Refer is failed. Reason : %s"}),He(je,b.upgradevideoaccessdenied,{code:16023,message:"User denided media access during upgrade"}),He(je,A.configurationError,{code:16024,message:"Invalid value %s for the parameter %s."}),He(je,A.alreadyReplied,{code:16025,message:"Message already replied"}),He(je,A.notSupportedError,{code:16026,message:"%s"}),He(je,A.invalidStateError,{code:16027,message:"Operation cannot be executed in state : %s"}),He(je,A.terminated,{code:16028,message:"Session is already terminated"}),He(je,A.typeError,{code:16029,message:"Invalid argument: %s"}),He(je,A.invalidEvent,{code:16030,message:"Invalid Event: %s"}),He(je,A.notConnected,{code:16031,message:"Not Connected"}),He(je,A.failedToFetch,{code:16032,message:"Failed to fetch %s file. Could not load file %s or file has invalid content"}),He(je,A.physicalDeviceChange,{code:16033,message:"%s"}),He(je,A.addvideonotsupported,{code:16034,message:"Add Video is not supported"}),He(je,A.removevideonotsupported,{code:16035,message:"Remove Video is not supported"}),He(je,A.invalidResolution,{code:16036,message:"Invalid Camera Resolution: %s"}),He(je,A.webrtcnotsupported,{code:16037,message:"Engage Digital WebRTC not Supported"}),He(je,A.callnotconnected,{code:16038,message:"Could not do this operation as call is not connected"}),He(je,A.mutenotallowedduringscreenshare,{code:16039,message:"Cannot unmute video during Screen share"});var Ve=je;function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t,n){return(Ge=Be()?Reflect.construct.bind():function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&ze(t,n.prototype),t}).apply(null,arguments)}function Be(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ze(e,t){return(ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Je=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ze(t,e);var n=function(e){var t=Be();return function(){var n,r=$e(e);n=t?(n=$e(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===We(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e,t,i){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");var o=n.call(this),l=Ve[e];return l?(o.errorMessage=at(l.message,[i,t]),o.errorCode=l.code):(o.errorMessage=e,o.errorCode=16004),o}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}(function(e){var t="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ge(e,arguments,$e(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ze(n,e)}(e)}(Error)),Ke=n(114);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{l||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ze(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=new u.Logger("Helper");function nt(e){for(var t="",n="abcdefghijklmnopqrstuvwxyz",r=n.length,i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t}function rt(){var e=Fe.signalling,t=Fe.clientType,n=Fe.os,r=Fe.browserType,i=Fe.browserVersion,o=Fe.version,l=bn();return"ReactNative"!==t?"X-Client-Info: ".concat(t,"-").concat(l,"-").concat(e,"-").concat(n,"-").concat(r,"-").concat(i):"X-Client-Info: ".concat(t,"-").concat(l,"-").concat(e,"-").concat(n,"-app-").concat(o)}function it(e,t){var n=e.candidate,r=e.ready,i=(tt.debug("Calling processIceCandidate isTimeoutRegistered : [%s] candidate : %o iceTimeoutInSeconds: %d",!0===it.isIceTimeoutRegistered,n,t),"number"==typeof t?1e3*t:5e3);it.isIceTimeoutRegistered||(it.isIceTimeoutRegistered=!0,setTimeout((function(){try{tt.debug("Executing IceGathering timeout after [%d ms]",i),r()}catch(e){tt.debug("Error due to immediate cancel of call. Error %s",e.message)}it.isIceTimeoutRegistered=!1}),i))}function ot(e,t){if(tt.debug("userProvidedCallParams : %o, defaultCallParams: %o",e,t),void 0!==(e=e||{}).customParams&&"object"!==Ye(e.customParams))throw new Je(A.configurationError,"customParams",e);var n=Object.assign({},t);return Object.keys(e).forEach((function(t){n[t]=e[t]})),tt.debug("mergedCallParams %o",n),n}function lt(e,t){for(var n={},r=0,i=Object.entries(s);r<i.length;r++){var o,l=(o=Xe(i[r],2))[0];e[o=o[1]]&&(n[l]=e[o])}return tt.debug("Available constraints %o",t),t&&(n.mediaConstraints=t),n.extraHeaders=function(e){var t=rt();return Ke.isEmpty(e.customParams)?[t]:[t,function(e){for(var t="X-Custom-Param : ",n=0,r=Object.entries(e.customParams);n<r.length;n++){var i=(o=Xe(r[n],2))[0],o=o[1];t=t+i+"="+encodeURIComponent(o)+","}return t.slice(0,t.length-1)}(e)]}(e),tt.debug("callParams in jssip format %o",n),n}function ut(e,t){return!(!e||!e.find((function(e){return e.deviceId===t})))}function at(e,t){Array.isArray(t)||(t=[t]);var n=0;return e.replace(/%s/g,(function(){return t[n++]}))}function st(e,t,n){var r=Ve[e];return r?{errorMessage:at(r.message,[n,t]),errorCode:r.code}:{errorMessage:e,errorCode:16004}}function ct(e,t){var n=Ve[e];return n?{errorMessage:at(n.message,t),errorCode:n.code}:{errorMessage:e,errorCode:16004}}function ft(e,t,n,r){if(e&&e.sdp&&t){for(var i=qe.parse(e.sdp),o=i.media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),l=i.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol})),u=(i.media=[],0),a=0,s=0;s<t.length;s++)"UDP/TLS/RTP/SAVPF"===t[s].protocol&&0<l.length&&void 0!==l[u]&&("audio"===l[u].type&&(l[u].setup=n),"video"===l[u].type&&(l[u].setup=r),"inactive"===l[u].direction&&(l[u].port=0),t[s]=l[u],u++),"UDP/TLS/RTP/SAVP"===t[s].protocol&&0<o.length&&void 0!==o[a]&&("audio"===o[a].type&&(o[a].setup=n),"video"===o[a].type&&(o[a].setup=r),"inactive"===o[a].direction&&(o[a].port=0),t[s]=o[a],a++),i.media.push(t[s]);e.sdp=qe.write(i)}else if(e&&e.sdp){var c=qe.parse(e.sdp),f=c.media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),d=c.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));if(0<d.length)for(var h=0;h<d.length;h++)"video"===d[h].type&&"inactive"===d[h].direction&&(d[h].port=0);else if(0<f.length)for(var p=0;p<f.length;p++)"video"===f[p].type&&"inactive"===f[p].direction&&(f[p].port=0);e.sdp=qe.write(c),tt.debug("Modified SDP after converting the port 0 : %o",e)}}function dt(e,t){if(tt.debug("removeUnwantedMlinesFromOffer "),e&&e.sdp){var n=qe.parse(e.sdp),r=n.media;n.media=[];for(var i=0;i<r.length;i++){var o=r[i];o.port=0,o.direction="inactive",n.media.push(o)}var l=n.media,u=qe.parse(e.sdp),a=u.media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),s=u.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));if(u.media=[],0<s.length)for(var c=0;c<s.length;c++)0==s[c].port&&!0!==t||u.media.push(s[c]);else if(0<a.length)for(var f=0;f<a.length;f++)0==a[f].port&&!0!==t||u.media.push(a[f]);e.sdp=qe.write(u),tt.debug("Modified SDP : %o",e)}return l}function ht(e){tt.debug("hasVideoMLine ");var t=!1;if(e&&e.sdp){var n=(e=qe.parse(e.sdp)).media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),r=e.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));if(0<r.length)for(var i=0;i<r.length;i++)0!=r[i].port&&"video"===r[i].type&&(t=!0);else if(0<n.length)for(var o=0;o<n.length;o++)0!=n[o].port&&"video"===n[o].type&&(t=!0);tt.debug("Sdp hasVideo : %s",t)}return t}function pt(e){tt.debug("hasVideoMLine ");var t=!1;if(e&&e.sdp){var n=(e=qe.parse(e.sdp)).media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),r=e.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));if(0<r.length)for(var i=0;i<r.length;i++)0!=r[i].port&&"video"===r[i].type&&(t=!0);else if(0<n.length)for(var o=0;o<n.length;o++)0!=n[o].port&&"video"===n[o].type&&(t=!0);tt.debug("Sdp hasVideo : %o",t)}return t}function vt(){var e=Fe.os,t=Fe.browserType,n=Fe.browserVersion,r=Fe.version,i=Fe.clientType;return window.RTCPeerConnection?"ReactNative"!==i?"Chrome"===t&&parseFloat(n)>=72||"Firefox"===t&&parseFloat(n)>=72||"Edge"===t&&parseFloat(n)>=72||"Safari"===t&&parseFloat(n)>=12.1||(tt&&tt.warn("EngageDigital WebRTC is not supported for [%s] and [%s]",t,n),!1):"android"===e&&parseFloat(r)>=10||"ios"===e&&parseFloat(r)>=12||(tt&&tt.warn("EngageDigital WebRTC is not supported for ".concat(e,", ").concat(r)),!1):(tt&&tt.warn("EngageDigital WebRTC is not supported for [%s] and [%s]",t,n),!1)}function _t(e){var t=new Map;if(e){var n=e.split("&");if(n)for(var r=0;r<n.length;r++){var i=(o=Xe(n[r].split("="),2))[0],o=o[1];"replaces"!==(null==i?void 0:i.toLowerCase())&&t.set(i,decodeURIComponent(o))}}return t}var gt={0:"NULL",1:"INVITE_SENT",2:"1XX_RECEIVED",3:"INVITE_RECEIVED",4:"WAITING_FOR_ANSWER",5:"ANSWERED",6:"WAITING_FOR_ACK",7:"CANCELED",8:"TERMINATED",9:"CONFIRMED"},mt=new u.Logger("firefoxAdaptor");function yt(e){"Firefox"===Fe.browserType&&(e.sdp=e.sdp.replace(/telephone-event\/8000/g,"telephone-event"),e.sdp=e.sdp.replace(/telephone-event\/16000/g,"telephone-event"),e.sdp=e.sdp.replace(/telephone-event\/32000/g,"telephone-event"),e.sdp=e.sdp.replace(/telephone-event\/48000/g,"telephone-event"),mt.debug("After converting the telephone-event. %o",e.sdp))}function bt(e){"Firefox"===Fe.browserType&&(e.sdp=e.sdp.replace(/telephone-event\/48000/g,"telephone-event/8000"),e.sdp=e.sdp.replace(/telephone-event\/32000/g,"telephone-event/8000"),e.sdp=e.sdp.replace(/telephone-event\/16000/g,"telephone-event/8000"),mt.debug("After converting the telephone-event. %o",e.sdp))}function Ct(e){e.sdp=e.sdp.replace(/telephone-event\r\n/g,"telephone-event/8000\r\n"),mt.debug("Convert wild card telephone event to 8k. %o",e.sdp)}function St(){return"Firefox"===Fe.browserType}function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t){return(Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function It(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function Pt(e,t){Nt.debug("Collect WebRTC stats with webRTCStatsInterval %s seconds",t),e?Lt?Nt.debug("To collect statistics time interval is already running"):Lt=setInterval((function(){!function(e,t){e.getStats(null).then((function(e){t(e)})).catch(t)}(e,(function(e){e&&e.forEach&&(Ut.allStats.codec=[],Ut.allStats.audioRTCMediaStreamTrack=[],Ut.allStats.videoRTCMediaStreamTrack=[],Ut.candidates.remote=[],Ut.candidates.local=[],Ut.candidates.candidatePair=[],Ut.allStats.certificate=[],Ut.allStats.mediaSource=[],Ut.allStats.videoInboundRTP={},Ut.allStats.videoOutboundRTP={},Ut.allStats.videoRemoteInboundRTP={},Ut.allStats.videoRemoteOutboundRTP={},function(e){e.forEach((function(e){(function(e){"candidate-pair"===e.type&&"succeeded"===e.state&&e.nominated&&Ut.candidates.candidatePair.push(e),"remote-candidate"===e.type&&Ut.candidates.remote.push(e),"local-candidate"===e.type&&Ut.candidates.local.push(e)})(e),function(e){switch(e.type){case"certificate":Ut.allStats.certificate.push(e);break;case"codec":Ut.allStats.codec.push(e);break;case"csrc":Ut.allStats.csrc=e;break;case"data-channel":Ut.allStats.dataChannel=e;break;case"ice-server":Ut.allStats.iceServer=e;break;case"inbound-rtp":"audio"===e.kind?Ut.allStats.audioInboundRTP=e:"video"===e.kind&&(Ut.allStats.videoInboundRTP=e);break;case"media-source":Ut.allStats.mediaSource.push(e);break;case"outbound-rtp":"audio"===e.kind?Ut.allStats.audioOutboundRTP=e:"video"===e.kind&&(Ut.allStats.videoOutboundRTP=e);break;case"peer-connection":Ut.allStats.peerConnection=e;break;case"receiver":Ut.allStats.receiver=e;break;case"remote-inbound-rtp":"audio"===e.kind?Ut.allStats.audioRemoteInboundRTP=e:"video"===e.kind&&(Ut.allStats.videoRemoteInboundRTP=e);break;case"remote-outbound-rtp":"audio"===e.kind?Ut.allStats.audioRemoteOutboundRTP=e:"video"===e.kind&&(Ut.allStats.videoRemoteOutboundRTP=e);break;case"sctp-transport":Ut.allStats.sctpTransport=e;break;case"sender":Ut.allStats.sender=e;break;case"stream":Ut.allStats.stream=e;break;case"track":"audio"===e.kind?Ut.allStats.audioRTCMediaStreamTrack.push(e):"video"===e.kind&&Ut.allStats.videoRTCMediaStreamTrack.push(e);break;case"transceiver":Ut.allStats.transceiver=e;break;case"transport":Ut.allStats.transport=e}}(e)})),Nt.debug("WebRTC Statistics %o",JSON.parse(JSON.stringify(Ut)))}(e))}))}),1e3*t):Nt.debug("Got peerConnection for statistics %o",e)}var xt=new u.Logger("RTCUtils"),Dt=n(34),Mt=new(function(){var e=r,t=Dt;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rt(e,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ot(e);n=t?(n=Ot(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Tt(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return It(r)}}(r);function r(){var e;if(this instanceof r)return kt(It(e=n.call(this)),"_registerDeviceSelectedEvent",(function(){e._deviceEventListener(k.deviceselected,(function(t){e._executeUserCallbacks(k.deviceselected,t)}))})),kt(It(e),"_registerChangeDeviceEvent",(function(){e._deviceEventListener(k.devicechange,(function(t){e._executeUserCallbacks(k.devicechange,t)}))})),kt(It(e),"_registerAudioOutputDeviceEvent",(function(){e._deviceEventListener(k.audiooutputdevice,(function(t){e._executeUserCallbacks(k.audiooutputdevice,t)}))})),kt(It(e),"getSelectedAudioInputDevice",(function(){var t;return e._setAudioInputDeviceId?e._audioInputDeviceList.map((function(n){n.deviceId===e._setAudioInputDeviceId&&(t=n)})):e._updatedDeviceInfo.map((function(e){"default"===e.deviceId&&"audioinput"===e.kind&&(t=e)})),t})),kt(It(e),"getSelectedVideoInputDevice",(function(){var t;return e._setVideoInputDeviceId?e._videoInputDeviceList.map((function(n){n.deviceId===e._setVideoInputDeviceId&&(t=n)})):e._updatedDeviceInfo.map((function(e){e.label&&e.label.includes("Integrated Webcam")&&(t=e)})),t})),kt(It(e),"getSelectedAudioOutputDevice",(function(){var t;return e._setAudioOutputDeviceId?e._audioOutputDeviceList.map((function(n){n.deviceId===e._setAudioOutputDeviceId&&(t=n)})):e._updatedDeviceInfo.map((function(e){"default"===e.deviceId&&"audiooutput"===e.kind&&(t=e)})),t})),kt(It(e),"getAudioOutputDevices",(function(){return xt.debug("Get Audio Output Devices list %o",e._audioOutputDeviceList),e._audioOutputDeviceList})),kt(It(e),"getAudioInputDevices",(function(){return xt.debug("Get Audio Input Devices list %o",e._audioInputDeviceList),e._audioInputDeviceList})),kt(It(e),"getVideoInputDevices",(function(){return xt.debug("Get Video Input Devices list %o",e._videoInputDeviceList),e._videoInputDeviceList})),kt(It(e),"setAudioOutputDevice",(function(t){return ut(e._updatedDeviceInfo,t)?(e._setAudioOutputDeviceId=t,e.emit(k.deviceselected,e._setAudioOutputDeviceId),e._emitAudioOutputDeviceEvent(),!0):(xt.debug("unable to setAudioOutputDevice"),!1)})),kt(It(e),"setAudioInputDevice",(function(t){return xt.debug("audio input device id: %s",t),ut(e._updatedDeviceInfo,t)?("Safari"!==Fe.browserType&&(e._updatedStream&&e._mediastreamClose(e._updatedStream),e._updatedModifiedStream&&e._mediastreamClose(e._updatedModifiedStream),e._session&&e._mediastreamClose(e._session._connection.getLocalStreams()[0])),e._setAudioInputDeviceId=t,e.emit(k.deviceselected,e._setAudioInputDeviceId),e._setUserMediaAccess(),!0):(xt.debug("audio input device id not valid, %s",t),!1)})),kt(It(e),"setVideoInputDevice",(function(t){return!!ut(e._updatedDeviceInfo,t)&&("Safari"!==Fe.browserType&&(e._closeVideoStream(e._updatedStream),e._closeVideoStream(e._updatedModifiedStream),e._session&&e._closeVideoStream(e._session._connection.getLocalStreams()[0])),e._setVideoInputDeviceId=t,e.emit(k.deviceselected,e._setVideoInputDeviceId),e._setUserMediaAccess(),!0)})),kt(It(e),"_checkVideoFrameProperty",(function(){if(e._updateCameraQualityConstraints&&e._updateCameraQualityConstraints.width&&e._updateCameraQualityConstraints.height)return e._updateCameraQualityConstraints.deviceId.exact=e._setVideoInputDeviceId,e._updateCameraQualityConstraints})),kt(It(e),"setCameraResolution",(function(t){"Safari"!==Fe.browserType&&(e._updatedStream&&e._mediastreamClose(e._updatedStream),e._updatedModifiedStream&&e._mediastreamClose(e._updatedModifiedStream),e._session&&e._session._connection&&e._mediastreamClose(e._session._connection.getLocalStreams()[0]));var n,r=t&&"string"==typeof t&&t.toUpperCase();N.resolution.includes(r)?(r=L[r],e._setVideoInputDeviceId||(e._setVideoInputDeviceId=e._videoInputDeviceList&&(null==(n=e._videoInputDeviceList[0])?void 0:n.deviceId)),!e._setAudioInputDeviceId&&e._audioInputDeviceList&&0<e._audioInputDeviceList.length&&(e._setAudioInputDeviceId=e._audioInputDeviceList[0].deviceId),n={deviceId:{exact:e._setVideoInputDeviceId},height:r.frameHight,width:r.frameWidth,frameRate:r.frameRate},e._updateCameraQualityConstraints=n,e._selectedCameraResolution=t,e._setUserMediaAccess()):(xt.debug("Invalid Camera Resolution %s",t),r=ct(A.invalidResolution,t),e.emit(k.errorinfo,r))})),kt(It(e),"_replaceTracks",(function(t){var n,r;"ReactNative"===Fe.clientType?xt.debug("Its react native returning from replaceTracks"):(n=t.getVideoTracks()[0],r=t.getAudioTracks()[0],e._session._connection.getSenders().forEach((function(t){t&&t.track&&("video"===t.track.kind&&n?n&&t.track.id!=n.id&&(xt.debug("replace video track"),n&&e._isUsedVidioDeviceMuted(n),r&&e._isUsedAudioDeviceMuted(r),e._updatedModifiedStream&&e._mediastreamClose(e._updatedModifiedStream),e._updatedModifiedStream=r?new MediaStream([r,n]):new MediaStream([n]),t.replaceTrack(n),e._session.emit(b.localvideoadded,{stream:e._updatedModifiedStream})):r&&"audio"===t.track.kind&&t.track.id!=r.id&&(xt.debug("replace audio track %o",r),r&&e._isUsedAudioDeviceMuted(r),t.replaceTrack(r)))})))})),kt(It(e),"_setSession",(function(t){xt.debug("Current session set"),e._session=t})),kt(It(e),"addEventHandler",(function(t,n){var r;if(xt.debug("Registering event %s",t),!e._checkInvalidEvent(t))switch(t){case void 0:case null:xt.debug("Invalid Event name [%s]",t),r=ct(A.invalidEvent,t),e.emit(y,r);break;case k.deviceready:e.on(t,n);break;default:e._eventHandlerMapRTCUtils.get(t)||e._eventHandlerMapRTCUtils.set(t,[]),e._eventHandlerMapRTCUtils.get(t).push(n)}})),kt(It(e),"resetVideoInputDevice",(function(){return 1<e._videoInputDeviceList.length?("Safari"!==Fe.browserType&&(e._closeVideoStream(e._updatedStream),e._closeVideoStream(e._updatedModifiedStream),e._session&&e._closeVideoStream(e._session._connection.getLocalStreams()[0])),e._setVideoInputDeviceId=e._videoInputDeviceList[0].deviceId,e.emit(k.deviceselected,e._setVideoInputDeviceId),e._setUserMediaAccess(),!0):(xt.debug("Unable to reset, only one device available"),!1)})),kt(It(e),"resetAudioInputDevice",(function(){return"Safari"!==Fe.browserType&&(e._updatedStream&&e._mediastreamClose(e._updatedStream),e._updatedModifiedStream&&e._mediastreamClose(e._updatedModifiedStream),e._session&&e._mediastreamClose(e._session._connection.getLocalStreams()[0])),1<e._audioInputDeviceList.length?("Firefox"===Fe.browserType||"Safari"===Fe.browserType?e._setAudioInputDeviceId=e._audioInputDeviceList[0].deviceId:e._setAudioInputDeviceId="default",e.emit(k.deviceselected,e._setAudioInputDeviceId),e._setUserMediaAccess(),!0):(xt.debug("Unable to reset, only one device available"),!1)})),kt(It(e),"resetAudioOutputDevice",(function(){return 1<e._audioOutputDeviceList.length?("Firefox"===Fe.browserType||"Safari"===Fe.browserType?e._setAudioOutputDeviceId=e._audioOutputDeviceList[0].deviceId:e._setAudioOutputDeviceId="default",e.emit(k.audiooutputdevice,e._setAudioOutputDeviceId),e.emit(k.deviceselected,e._setAudioOutputDeviceId),!0):(xt.debug("Unable to reset, only one device available"),!1)})),kt(It(e),"_closeMediaStream",(function(e){if(e)try{if(e.getTracks){var t,n=Et(e.getTracks());try{for(n.s();!(t=n.n()).done;){var r=t.value;"video"==r.kind&&"live"==r.readyState&&(xt.debug("stop media stream track %o",r),r.stop())}}catch(t){n.e(t)}finally{n.f()}}else{var i,o=Et(e.getVideoTracks());try{for(o.s();!(i=o.n()).done;){var l=i.value;xt.debug("stop media video track %o",l),l.stop()}}catch(t){o.e(t)}finally{o.f()}}}catch(t){"function"!=typeof e.stop&&"object"!==Tt(e.stop)||e.stop()}})),e._setAudioOutputDeviceId=null,e._setAudioInputDeviceId=null,e._setVideoInputDeviceId=null,e._updatedStream=null,e._updatedMediaConstraints=null,e._updatedDeviceInfo=null,e._session=null,e._eventHandlerMapRTCUtils=new Map,e._updatedModifiedStream=null,e._selectedCameraResolution=null,e._resetDevices(),e._onDeviceChange(),e._registerDeviceEvents(),e;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"getAVPermission",value:function(){xt.debug("calling getAVPermission"),this._getUserMediaAccess()}},{key:"_registerDeviceEvents",value:function(){this._registerChangeDeviceEvent(),this._registerAudioOutputDeviceEvent(),this._registerAVAccessDeniedEvent(),this._registerFailedEvent(),this._registerErrorInfoEvent(),this._registerDeviceSelectedEvent()}},{key:"_registerAVAccessDeniedEvent",value:function(){var e=this;this._deviceEventListener(k.mediaaccessdenied,(function(t){e._executeUserCallbacks(k.mediaaccessdenied,Ve[t.cause])}))}},{key:"_registerFailedEvent",value:function(){var e=this;this._deviceEventListener(k.failed,(function(t){e._executeUserCallbacks(k.failed,t)}))}},{key:"_registerErrorInfoEvent",value:function(){var e=this;this._deviceEventListener(k.errorinfo,(function(t){e._executeUserCallbacks(k.errorinfo,t)}))}},{key:"_executeUserCallbacks",value:function(e,t){try{var n=this._eventHandlerMapRTCUtils&&this._eventHandlerMapRTCUtils.get(e);n&&n.forEach((function(e){return t?e(t):e()}))}catch(n){xt.debug("Got error %o while executing usercallback for the event %s",n,e)}}},{key:"_onDeviceChange",value:function(){var e=this;try{navigator.mediaDevices.addEventListener("devicechange",(function(){return e._deviceChangeHandler()}))}catch(e){xt.warn("Device Change error %o",e)}}},{key:"_deviceChangeHandler",value:function(){var e=this;navigator.mediaDevices.enumerateDevices().then((function(t){e._isNewDeviceAdded(t)?(xt.debug("New device added"),e._gotDevices(t),e.emit(k.devicechange,t),"Safari"!==Fe.browserType&&(e._updatedStream&&e._mediastreamClose(e._updatedStream),e._updatedModifiedStream&&e._mediastreamClose(e._updatedModifiedStream),e._session&&e._mediastreamClose(e._session._connection.getLocalStreams()[0])),e._videoDeviceSelection(),e._audioInputDeviceSelection(),e._audioOutputDeviceSelection(),e._setUserMediaAccess()):xt.debug("Existing devices changed")}))}},{key:"_isNewDeviceAdded",value:function(e){var t=this;return this._tempAudioInputDeviceList=[],e.forEach((function(e){e.kind===O&&t._tempAudioInputDeviceList.push(e)})),this._tempAudioInputDeviceList.length!==this._audioInputDeviceList.length}},{key:"_videoDeviceSelection",value:function(){this._setVideoInputDeviceId=this._videoInputDeviceList[0].deviceId}},{key:"_audioInputDeviceSelection",value:function(){this._setAudioInputDeviceId=this._audioInputDeviceList[0].deviceId}},{key:"_audioOutputDeviceSelection",value:function(){0<this._audioOutputDeviceList.length&&(this._setAudioOutputDeviceId=this._audioOutputDeviceList[0].deviceId,this.emit(k.audiooutputdevice,this._setAudioOutputDeviceId))}},{key:"_getAvailableDevices",value:function(){var e=this;try{navigator.mediaDevices.enumerateDevices().then((function(t){e._gotDevices(t),e._closeMediaStream(e._updatedStream)}))}catch(e){var t=ct(A.internalServerError);this.emit(k.errorinfo,t),xt.debug("GetAvailableDevices Error: [%s]",e)}}},{key:"_gotDevices",value:function(e){var t=this;this._updatedDeviceInfo=e,this._resetDevices(),e.forEach((function(e){e.kind===O?t._audioInputDeviceList.push(e):"audiooutput"===e.kind?t._audioOutputDeviceList.push(e):"videoinput"===e.kind?t._videoInputDeviceList.push(e):xt.debug("Some other kind of source/device: %o",e)})),this.emit(k.deviceready)}},{key:"_resetDevices",value:function(){this._audioInputDeviceList=[],this._audioOutputDeviceList=[],this._videoInputDeviceList=[]}},{key:"_getSelectedDevice",value:function(e,t,n){var r;return e.forEach((function(e){e.kind===n&&e.deviceId===t&&(r=e)})),r}},{key:"_mediastreamClose",value:function(e){var t;e=e,t=this._setVideoInputDeviceId,tt.debug("trackStopper called - Stream :",e),e.getTracks().forEach((function(e){e&&"audio"===e.kind&&"live"==e.readyState&&e.stop(),t&&e&&"video"===e.kind&&"live"==e.readyState&&e.stop()}))}},{key:"_closeVideoStream",value:function(e){e&&e.getTracks((function(e){e&&"video"===e.kind&&"live"==e.readyState&&e.stop()}))}},{key:"_setUserMediaAccess",value:function(){var e,t=this,n={audio:this._setAudioInputDeviceId?{deviceId:{exact:this._setAudioInputDeviceId}}:void 0,video:this._updateCameraQualityConstraints&&this._updateCameraQualityConstraints.width?this._checkVideoFrameProperty():this._setVideoInputDeviceId?{deviceId:{exact:this._setVideoInputDeviceId}}:void 0};return xt.debug("Final Constraints to set %o",n),this._updatedMediaConstraints=n,xt.debug("peerConnection %o",null==(e=this._session)?void 0:e._connection),new Promise((function(e,r){t._session&&navigator.mediaDevices.getUserMedia(n).then((function(n){t._updatedStream=n,t._session&&t._replaceTracks(n),e(n)})).catch((function(e){xt.debug("GetUser media error %o",e),xt.debug(A.userDeniedMediaAccess,e);var n=ct(A.userDeniedMediaAccess,e);t.emit(m,n),r(e)}))}))}},{key:"_getUserMediaAccess",value:function(){var e=this,t=(xt.debug("calling getUserMediaAccess"),{audio:!0,video:!0});return this._updatedMediaConstraints=t,new Promise((function(n,r){navigator.mediaDevices.getUserMedia(t).then((function(t){e._updatedStream=t,e._getAvailableDevices(),n()})).catch((function(t){xt.debug(A.userDeniedMediaAccess,t);var n=ct(A.userDeniedMediaAccess,t);e.emit(m,n),r(t)}))}))}},{key:"_isUsedAudioDeviceMuted",value:function(e){this._session&&this._session.isMuted().audio&&(e.enabled=!1)}},{key:"_isUsedVidioDeviceMuted",value:function(e){this._session&&this._session.isMuted().video&&(e.enabled=!1)}},{key:"_deviceEventListener",value:function(e,t){this.on(e,t)}},{key:"removeEventHandler",value:function(e){this._checkInvalidEvent(e)||(this._eventHandlerMapRTCUtils.delete(e),xt.debug("Removed Event : %s",e))}},{key:"_checkInvalidEvent",value:function(e){return void 0===k[e]&&(xt.warn("Invalid Event [%s]",e),e=ct(A.invalidEvent,e),this.emit(y,e),!0)}},{key:"_emitAudioOutputDeviceEvent",value:function(){null!==this._session&&this._setAudioOutputDeviceId&&this.emit(k.audiooutputdevice,this._setAudioOutputDeviceId)}},{key:"getSelectedCameraResolution",value:function(){if(this._selectedCameraResolution)return this._selectedCameraResolution}},{key:"streamClose",value:function(){this._updatedStream&&!this._session&&this._closeMediaStream(this._updatedStream),this._updatedModifiedStream&&!this._session&&this._closeMediaStream(this._updatedModifiedStream)}},{key:"_clearRTCUtilsInternals",value:function(){xt.debug("Clear RTCUtils Internal"),this._updatedStream&&this._mediastreamClose(this._updatedStream),this._updatedModifiedStream&&this._mediastreamClose(this._updatedModifiedStream),this._session=null,this._updatedStream=null,this._updatedModifiedStream=null,this._resetDevices()}}])&&wt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}()),Nt=new u.Logger("EngageDigitalStatistics"),Lt=null,Ut={candidates:{local:[],remote:[],candidatePair:[]},allStats:{videoOutboundRTP:{},audioOutboundRTP:{},audioInboundRTP:{},videoInboundRTP:{},audioRemoteInboundRTP:{},videoRemoteInboundRTP:{},audioRemoteOutboundRTP:{},videoRemoteOutboundRTP:{},certificate:[],codec:[],csrc:{},dataChannel:{},iceServer:{},mediaSource:[],peerConnection:{},receiver:{},sctpTransport:{},sender:{},stream:{},audioRTCMediaStreamTrack:[],videoRTCMediaStreamTrack:[],transceiver:{},transport:{}}};function jt(){clearInterval(Lt),Lt=null}var Ft={"42C00A":"SD","42D00B":"SD","42C00B":"SD","42C00C":"HD","42C00D":"HD","42C014":"HD","42C015":"HD","42C016":"HD","42C01E":"HD","42C01F":"HD"};function qt(e){return function(e){if(Array.isArray(e))return Bt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Gt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Gt(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw i}}}}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{l||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||Gt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t){return($t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yt(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var Xt=n(34),Qt=new u.Logger("EngageDigitalSession"),Zt={once:!0},en=function(){var e=r,t=Xt;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$t(e,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kt(e);n=t?(n=Kt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Ht(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Jt(r)}}(r);function r(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=this,l=r;if(o instanceof l)return Yt(Jt(e=n.call(this)),"getSessionId",(function(){return e._checkState(),e._sessionId})),Yt(Jt(e),"getCallState",(function(){return e._checkState(),e._callState})),Yt(Jt(e),"getCallParams",(function(){return e._checkState(),Object.assign({},e._callParams)})),Yt(Jt(e),"getConfig",(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(e._checkState(),"string"!=typeof t)Qt.warn("Get Config: parameter %s not accepted",t),n=ct(A.typeError,t),e.emit(y,n);else{var n=t&&t.trim();if(!n)return e._callParams;if(n in e._callParams)return e._callParams[n];Qt.warn("Get Config: Parameter %s not found",n),n=ct(A.typeError,t),e.emit(y,n)}})),Yt(Jt(e),"getRemoteId",(function(){return e._checkState(),Qt.debug("RemoteId: %o",e._session.remote_identity),e._session.remote_identity})),Yt(Jt(e),"getPeerConnection",(function(){return e._checkState(),e._session.connection})),Yt(Jt(e),"acceptCall",(function(t){var n=ot(t,e._defaultCallParams);Qt.debug("Accept call: utils.updatedMediaConstraints %o",Mt._updatedMediaConstraints);var r={audio:(null!=(r=Mt._updatedMediaConstraints)&&r.audio?{audio:Mt._updatedMediaConstraints.audio}:{audio:!0}).audio};null!=t&&null!=(t=t.mediaConstraints)&&t.video?(t=null!=(t=Mt._updatedMediaConstraints)&&t.video?{video:Mt._updatedMediaConstraints.video}:{video:!0},r.video=t.video):r.video=!1,Qt.debug("Accept Call: Available constraints %o",r),t=lt(e._callParams=n,r);Qt.debug("Accept call: jssip call params %o",t);try{e._session.answer(t)}catch(t){Qt.debug("Error in acceptCall %s",t.message),e._checkAndThrowErrorInInvalidState(t)}})),Yt(Jt(e),"rejectCall",(function(){e._checkState();try{Qt.debug("Rejecting the call"),e._session.terminate({status_code:486})}catch(t){Qt.debug("Error in rejectCall %s",t.message),e._checkAndThrowErrorInInvalidState(t)}})),Yt(Jt(e),"disconnectCall",(function(){try{e._session.terminate()}catch(t){Qt.debug("Error in disconnectCall %s",t.message),e._checkAndThrowErrorInInvalidState(t)}})),Yt(Jt(e),"unjoinRoom",(function(){e.disconnectCall()})),Yt(Jt(e),"hasLocalVideo",(function(){e._checkState();var t=e.getPeerConnection().localDescription;return D.values.includes(e._getVideoDirection(t))})),Yt(Jt(e),"hasRemoteVideo",(function(t){return e._checkState(),t=t||e.getPeerConnection().remoteDescription,e.hasValidRemoteVideoMLine(t.sdp)})),Yt(Jt(e),"addEventHandler",(function(t,n){e._checkState(),e._checkInvalidEvent(t)||(Qt.debug("adding Event handler %s",t),e._eventHandlerMap.get(t)||e._eventHandlerMap.set(t,[]),e._eventHandlerMap.get(t).push(n))})),Yt(Jt(e),"isRinging",(function(){return e._checkState(),e._session.isInProgress()})),Yt(Jt(e),"isEstablished",(function(){return e._checkState(),e._session.isEstablished()})),Yt(Jt(e),"getDirection",(function(){return e._checkState(),e._session.direction})),Yt(Jt(e),"isMuted",(function(){return e._checkState(),e._session.isMuted()})),Yt(Jt(e),"getOriginator",(function(){return e._checkState(),e._originator})),Yt(Jt(e),"canvasStream",(function(e){var t=e.color,n=document.createElement("canvas"),r=(n.width=n.height=10,n.getContext("2d")),i=(r.fillStyle=t,r.fillRect(0,0,n.width,n.height),n.captureStream(0)),o=Wt(i.getVideoTracks(),1)[0],l=(o.onmute=o.onunmute=function(){},function(){return("requestFrame"in o?o:i).requestFrame()});return requestAnimationFrame((function e(){if(!o.enabled||"live"!==o.readyState)return!1;r.fillStyle=t,r.fillRect(0,0,n.width,n.height),l(),requestAnimationFrame(e)})),{track:o}})),Yt(Jt(e),"getMaxResolutionSupported",(function(){return e._checkState(),e._maxresolutionsupported})),Qt.debug("Begin Constructor"),e._callParams=Object.assign({},t),e._defaultCallParams=Object.assign({},i),e._session=null,e._sessionId=null,e._callState=null,e._originator=null,e._sessionState=null,e._eventHandlerMap=new Map,e._configParams,e._backedUpMLinesFromOffer=null,e.incomingCallWithVideo=!1,e._isCallGotReferred=!1,e._updatedAddVideoStream=void 0,e._updatedLocalStream=null,e.callTransferHeaders=null,e._needVideoMline=!1,e._isInitialInvite=!1,e._isCallee=!1,e._isCaller=!1,e._sendRemoveVideoEvent=!1,e._incomingInviteRequestHeaders=null,e._generateNewStreamAddVideo=null,e._firstSessionId=null,e._isScreenSharing=!1,e._isAudioCall=!1,e._isVideoEnabledBeforeScreenShare=!1,e._offerConstraintOption={},e._maxresolutionsupported=void 0,Qt.debug("End Constructor"),e;throw new TypeError("Cannot call a class as a function")}return e=r,(t=[{key:"isIncomingCallWithVideo",value:function(){return this.incomingCallWithVideo}},{key:"getCallTransferHeaders",value:function(){return this.callTransferHeaders}},{key:"hasValidRemoteVideoMLine",value:function(e){var t=!1;if(e){var n=(e=qe.parse(e)).media.filter((function(e){return"UDP/TLS/RTP/SAVP"===e.protocol})),r=e.media.filter((function(e){return"UDP/TLS/RTP/SAVPF"===e.protocol}));if(0<r.length)for(var i=0;i<r.length;i++)0!=r[i].port&&"video"===r[i].type&&(t=!0);else if(0<n.length)for(var o=0;o<n.length;o++)0!=n[o].port&&"video"===n[o].type&&(t=!0);Qt.debug("Sdp hasVideo : %o",t)}return t}},{key:"_checkInvalidEvent",value:function(e){return null==b[e]&&(Qt.warn("Invalid Event [%s]",e),e=ct(A.invalidEvent,e),this.emit(b.errorinfo,e),!0)}},{key:"removeEventHandler",value:function(e){this._checkState(),this._checkInvalidEvent(e)||(Qt.debug("remove event handler for %s",e),this._eventHandlerMap.delete(e),Qt.debug("event handler map after remove %o",this._eventHandlerMap))}},{key:"getLocalStream",value:function(){return this._checkState(),this.getPeerConnection().getLocalStreams()[0]}},{key:"getRemoteStream",value:function(){return this._checkState(),this.getPeerConnection().getRemoteStreams()[0]}},{key:"toggleVideo",value:function(){var e=Fe.clientType,t=(this._checkState(),""),n=null==(n=this._session._dialog)?void 0:n._id.call_id;if(!this._isScreenSharing){var r=this.isMuted().video;r?(Qt.debug("video unmuted"),this._session.unmute({video:!0}),Qt.debug("Sending Info",t='<?xml version="1.0" encoding="UTF-8"?>\n<event target="conn:'+n+'">\n<send target="media" event="videounmute" />\n</event>'),this.videoResourceOnLight(e)):(Qt.debug("video muted"),this._session.mute({video:!0}),Qt.debug("Sending Info",t='<?xml version="1.0" encoding="UTF-8"?>\n<event target="conn:'+n+'">\n<send target="media" event="videomute" />\n</event>'),this.videoResourceOffLight(e),this.getPeerConnection());try{this._session.sendInfo("applicaition/xml",t),Qt.debug("Info sent")}catch(e){n=ct(A.typeError,e),this.emit(y,n),Qt.warn("INFO: %o",e)}return r}e=ct(A.mutenotallowedduringscreenshare," "),this.emit(b.errorinfo,e)}},{key:"videoResourceOffLight",value:function(e){var t=this;if("ReactNative"!==e&&!0===this._configParams.lightOffOnVideoMute&&"object"===Ht(e=function(){if(Qt.debug("videoResourceOffLight"),!t._getVideoTransceiver())return Qt.debug("There is no video in this session"),{v:void 0};var e,n=t.canvasStream({color:"black"}).track,r=Vt(t.getPeerConnection().getSenders().filter((function(e){return e.track&&"video"===e.track.kind})));try{for(r.s();!(e=r.n()).done;)!function(){var t=e.value,r=t.track;Qt.debug("sender, track ",t,n),Qt.debug("canvas track ",n),setTimeout((function(){r.stop(),t.replaceTrack(n)}),2e3)}()}catch(e){r.e(e)}finally{r.f()}}()))return e.v}},{key:"videoResourceOnLight",value:function(e){var t=this;"ReactNative"!==e&&!0===this._configParams.lightOffOnVideoMute&&(this._getVideoTransceiver()?(this._stopMediaStream(),e=null!=(e=Mt._updatedMediaConstraints)&&e.video?{video:Mt._updatedMediaConstraints.video}:{video:!0},navigator.mediaDevices.getUserMedia(e).then((function(e){var n=(t._updatedAddVideoStream=e).getVideoTracks()[0],r=(e=t.getPeerConnection()).getLocalStreams()[0];e.getSenders().find((function(e){return e.track.kind==n.kind})).replaceTrack(n),e=r.getAudioTracks()[0];t._generateNewStreamAddVideo=new MediaStream([e,n]),t.emit(b.localvideoadded,{stream:t._generateNewStreamAddVideo})}))):Qt.debug("There is no video in this session, use addVideo() API"))}},{key:"toggleAudio",value:function(){this._checkState();var e=this.isMuted().audio;return e?this._session.unmute({audio:!0}):this._session.mute({audio:!0}),this._isScreenSharing&&this.getPeerConnection().getSenders().find((function(e){"video"==e.track.kind&&"screen:0:0"==e.track.label&&(e.track.enabled=!0)})),e}},{key:"enableAudio",value:function(e){this._checkState(),"boolean"!=typeof e&&Qt.debug("enableAudio: audioRequest should boolean");var t={audio:!0};e?this._session.unmute(t):this._session.mute(t)}},{key:"enableVideo",value:function(e){Qt.debug("enableVideo : %s",e);var t=Fe.clientType,n=(this._checkState(),"boolean"!=typeof e&&Qt.debug("enableVideo: audioRequest should boolean"),{video:!0});e?(this._session.unmute(n),this.videoResourceOnLight(t)):(this._session.mute(n),this.videoResourceOffLight(t))}},{key:"sendDTMF",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Qt.debug("dtmf optionalParams %o",t),t=Object.assign({},t,{transportType:"RFC2833"});Qt.debug("dtmf optional %o",t),this._checkState();try{this._session.sendDTMF(e,t)}catch(t){e=ct(A.typeError,t),this.emit(y,e),Qt.warn("DTMF: %o",t)}}},{key:"addVideo",value:function(){var e=this,t=(this._checkState(),this.getPeerConnection());if(t.addTrack)if(this._callState!==E)o=ct(A.callnotconnected),this.emit(y,o);else{var n=t.getLocalStreams()[0],r=this._getVideoTransceiver();if(r&&"sendrecv"==r.direction){if(!St()||!0!==r.stopped)return void Qt.debug("Video is already there");Qt.debug("Browser type is firefox proceed.")}var i={rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:1}},o=(Qt.debug("utils.updatedMediaConstraints %o",Mt._updatedMediaConstraints),null!=(o=Mt._updatedMediaConstraints)&&o.video?{video:Mt._updatedMediaConstraints.video}:{video:!0});Qt.debug("videoConstraints : %o",o),Qt.debug("Upgrade media stream %o",this._updatedAddVideoStream),navigator.mediaDevices.getUserMedia(o).then((function(o){if(e._updatedAddVideoStream=o,r&&("inactive"==r.direction||"recvonly"==r.direction)){Qt.debug("video transiver is %s",r.direction);var l=r.sender,u=o.getVideoTracks()[0],a=0<n.getVideoTracks().length;try{if(a)return Qt.debug("Before replace track %o",u),l.replaceTrack(u),Qt.debug("after replace track"),r.direction="sendrecv",Qt.debug("Sending addVideo renegotiate"),e._session.renegotiate(i),void e.emit(b.localvideoadded,{stream:t.getLocalStreams()[0]})}catch(o){Qt.debug("Not able to replace the stream try adding")}}a=o.getVideoTracks()[0],n.addTrack(a),t.addTrack(a,n),St()?e.emit(b.localvideoadded,{stream:n}):(l=n.getAudioTracks()[0],e._generateNewStreamAddVideo=new MediaStream([l,a]),e.emit(b.localvideoadded,{stream:e._generateNewStreamAddVideo})),Qt.debug("renegotiate reinvite flow, stream : %o",o),e._session.renegotiate(i),e._session.unmute({video:!0})})).catch((function(t){Qt.error("Error in media access %o",t),t=ct(A.userDeniedMediaAccess,t),e.emit(b.upgradevideoaccessdenied,t)}))}else o=ct(A.addvideonotsupported),this.emit(y,o)}},{key:"triggerIceRestart",value:function(){this._offerConstraintOption={rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:this.hasRemoteVideo()?1:0},iceRestart:!0},this.getPeerConnection().restartIce()}},{key:"screenShare",value:function(){var e=this;if(this._checkState(),"ReactNative"!==Fe.clientType&&this._configParams.screenShareEnabled){var t=this.getPeerConnection(),n={video:{cursor:"always",height:720,width:1280,aspectRatio:1.777777778},audio:!1},r={rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:1}};if(this.hasRemoteVideo())navigator.mediaDevices.getDisplayMedia(n).then((function(t){e._isScreenSharing=!0,e._updatedAddVideoStream=t,e.isMuted().video||(e._isVideoEnabledBeforeScreenShare=!0,e._session.mute({video:!0})),e._isScreenSharing=!0;var n=t.getVideoTracks()[0];e.getPeerConnection().getSenders().find((function(e){return e.track.kind==n.kind})).replaceTrack(n),e._generateNewStreamAddVideo=new MediaStream([n]),e.emit(b.screensharestarted,e._generateNewStreamAddVideo),t.getVideoTracks()[0].addEventListener("ended",(function(){Qt.debug("screensharing has ended"),e.stopScreenShare()}))})).catch((function(e){Qt.error("Error in screen share %o",e)}));else{this._isAudioCall=!0;var i=t.getLocalStreams()[0],o=this._getVideoTransceiver();if(o&&"sendrecv"==o.direction){if(!St()||!0!==o.stopped)return void Qt.debug("Video is already there");Qt.debug("Browser type is firefox proceed.")}navigator.mediaDevices.getDisplayMedia(n).then((function(n){if(e._isScreenSharing=!0,o&&("inactive"==o.direction||"recvonly"==o.direction)){var l=o.sender,u=n.getVideoTracks()[0],a=0<i.getVideoTracks().length;try{if(a)return Qt.debug("Replace track %o",u),l.replaceTrack(u),o.direction="sendrecv",e._session.renegotiate(r),void e.emit(b.screensharestarted,{stream:e._generateNewStreamAddVideo})}catch(n){Qt.debug("Not able to replace the stream try adding")}}a=n.getVideoTracks()[0],t.addTrack(a),St()||(l=i.getAudioTracks()[0],e._generateNewStreamAddVideo=new MediaStream([l,a])),Qt.debug("renegotiate reinvite flow, stream : %o",n),e._session.renegotiate(r),e.emit(b.screensharestarted,{stream:e._generateNewStreamAddVideo}),n.getVideoTracks()[0].addEventListener("ended",(function(){Qt.debug("screensharing has ended"),e.stopScreenShare()}))})).catch((function(e){Qt.error("Error in screen share %o",e)}))}}}},{key:"stopScreenShare",value:function(){var e,t,n,r,i=this;this._checkState(),"ReactNative"!==Fe.clientType&&this._configParams.screenShareEnabled&&(this._isScreenSharing=!1,this._isAudioCall?this.removeVideo():this._isVideoEnabledBeforeScreenShare&&this.isMuted().video?(r=null!=(r=Mt._updatedMediaConstraints)&&r.video?{video:Mt._updatedMediaConstraints.video}:{video:!0},navigator.mediaDevices.getUserMedia(r).then((function(e){var t=(i._updatedAddVideoStream=e).getVideoTracks()[0],n=(e=i.getPeerConnection()).getLocalStreams()[0],r=e.getSenders().find((function(e){return e.track.kind==t.kind}));r.track.enabled=!1,setTimeout((function(){r.track.stop(),r.replaceTrack(t)}),1e3),e=n.getAudioTracks()[0];i._generateNewStreamAddVideo=new MediaStream([e,t]),i.emit(b.screensharestopped,{stream:i._generateNewStreamAddVideo}),i.emit(b.localvideoadded,{stream:i._generateNewStreamAddVideo})})),this._isVideoEnabledBeforeScreenShare=!1,this._session.unmute({video:!0})):(e=(r=this.getPeerConnection()).getLocalStreams()[0],t=e.getVideoTracks()[0],(n=r.getSenders().find((function(e){return e.track.kind==t.kind}))).track.enabled=!1,setTimeout((function(){n.track.stop(),n.replaceTrack(t)}),1e3),r=e.getAudioTracks()[0],this._generateNewStreamAddVideo=new MediaStream([r,t]),this.emit(b.screensharestopped,{stream:this._generateNewStreamAddVideo})))}},{key:"isScreenShared",value:function(){return this._checkState(),this._isScreenSharing}},{key:"_getVideoDirection",value:function(e){Qt.debug("_getVideoDirection Sdp %o",e);e=qe.parse(e.sdp);var t,n,r=(Array.isArray(e.media)||(e.media=[e.media]),Vt(e.media));try{for(r.s();!(n=r.n()).done;){var i=n.value;"video"===i.type&&(t=i.direction)}}catch(e){r.e(e)}finally{r.f()}return Qt.debug("video Direction %s",t),t}},{key:"removeVideo",value:function(e){var t=this;if(this._checkState(),this._offerConstraintOption={rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:0}},this.getPeerConnection().addTrack)if(this._callState!==E)n=ct(A.callnotconnected),this.emit(y,n);else{var n=this.getPeerConnection(),r=this._getVideoTransceiver();if(Qt.debug("removeVideo is firefox ? %s",St()),St()||"remote"===e||r&&"sendrecv"===(null==r?void 0:r.direction)){this._stopMediaStream(),"remote"!==e&&n.addEventListener("negotiationneeded",(function(e){Qt.debug("removevideo got negotiationneeded event %o",e),Qt.debug("Sending renegotiate"),t._session.renegotiate(t._offerConstraintOption)}),Zt);var i=n.getLocalStreams()[0].clone();if(Qt.debug("1 localStream.getVideoTracks() %o",i.getVideoTracks()),St())for(var o=i.getVideoTracks().length,l=i.getVideoTracks(),u=0;u<o;u++)i.removeTrack(l[u]);else 0<i.getVideoTracks().length&&i.removeTrack(i.getVideoTracks()[0]);Qt.debug("2 localStream.getVideoTracks() %o",i.getVideoTracks()),r&&n.removeTrack(r.sender),this.emit(b.localvideoremoved,{stream:i})}else Qt.debug("Video is not there, direction is %s ",null==r?void 0:r.direction)}else e=ct(A.removevideonotsupported),this.emit(y,e)}},{key:"switchCamera",value:function(){Qt.debug("Begin Switch camera"),this.getLocalStream().getVideoTracks().forEach((function(e){Qt.debug("has _switchCamera %s",e._switchCamera),e._switchCamera&&e._switchCamera()})),Qt.debug("End Switch camera")}},{key:"_reactNativeRemoveVideo",value:function(e){var t=this,n=(Qt.debug("react native remove stream"),this._offerConstraintOption={rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:0}},this.getPeerConnection()),r=this.getPeerConnection().localDescription;r=this._getVideoDirection(r);Qt.debug("video direction is %s",r),"sendrecv"!==r?Qt.debug("Video is not there"):("remote"!==e&&n.addEventListener("negotiationneeded",(function(e){Qt.debug("removevideo got negotiationneeded event %o",e),Qt.debug("Sending renegotiate"),t._session.renegotiate(t._offerConstraintOption)}),Zt),r=n.getLocalStreams()[0],Qt.debug("1 localStream.getVideoTracks() %o",r.getVideoTracks()),e=r.getAudioTracks()[0],e=new MediaStream([e]),Qt.debug("2 localStream.getVideoTracks() %o",r.getVideoTracks()),n.removeStream(r),n.addStream(e),this.emit(b.localvideoremoved,{stream:e}))}},{key:"_setConfig",value:function(e){this._configParams=e}},{key:"_setSession",value:function(e){this._sessionId=e._id,Qt.debug("Setting session %o with id %s peerconnection %s",e,this._sessionId,e.connection),this._session=e,this._sessionState=E,this._registerAllEvents(),"local"===this._originator&&this._startListenToPeerConnectionEvents()}},{key:"_startListenToPeerConnectionEvents",value:function(){var e=this;this.getPeerConnection().addEventListener("addstream",(function(t){var n=t.stream;Qt.debug('peerconnection "addstream" event %o',n),e.emit(b.remotestream,{stream:n}),Mt._emitAudioOutputDeviceEvent(),n.addEventListener("removetrack",(function(t){Qt.debug("removetrack event %o",t),"video"===(null==(t=t.track)?void 0:t.kind)&&(Qt.debug("video track is removed"),e.removeVideo("remote"),e.emit(b.remotevideoremoved,{stream:n}))})),n.addEventListener("ended",(function(t){e.emit(b.remotevideoremoved,{stream:n}),Qt.debug("ended event for track %o",t.track)}))})),this.getPeerConnection().addEventListener("signalingstatechange",(function(t){Qt.debug("signalingstatechange message event %o state %s",t,e.getPeerConnection().signalingState),Qt.debug("client type isFirefox %s",St()),"stable"===e.getPeerConnection().signalingState&&e._needVideoMline&&!0===e._sendRemoveVideoEvent&&!0===St()&&(Qt.debug("video tracks size %s ",e.getPeerConnection().getRemoteStreams()[0].getVideoTracks().length),e.removeVideo("remote"),e.emit(b.remotevideoremoved,{stream:e.getPeerConnection().getRemoteStreams()[0]}),e._sendRemoveVideoEvent=!1)}),!1),this.getPeerConnection().addEventListener("track",(function(t){var n;Qt.debug("track event %o",t),"video"===t.track.kind&&(Qt.debug("Remote video track added track %o",t.track),Qt.debug("stream size is %s",t.streams.length),0===t.streams.length?((n=e.getPeerConnection().getRemoteStreams()[0].getVideoTracks()).push(t.track),n=new MediaStream([e.getPeerConnection().getRemoteStreams()[0].getAudioTracks()[0]].concat(qt(n))),e.emit(b.remotevideoadded,{stream:n})):e.emit(b.remotevideoadded,{stream:t.streams[0]}))})),this.getPeerConnection().addEventListener("negotiationneeded",(function(){Qt.debug("negotiationneeded called"),Qt.debug("Sending renegotiate",e._offerConstraintOption),e._session.renegotiate(e._offerConstraintOption)})),this.getPeerConnection().addEventListener("iceconnectionstatechange",(function(){var t;null!=(t=e._session)&&t.connection&&(Qt.debug("iceconnectionstatechange %s: ",e.getPeerConnection().iceConnectionState),e.getPeerConnection().iceConnectionState!==T&&"failed"!==e.getPeerConnection().iceConnectionState||e.emit(b.iceconnectionstatechanged,e.getPeerConnection().iceConnectionState))}))}},{key:"_registerAllEvents",value:function(){this._registerIceCandidateEventHandler(),this._registerConnectingEvent(),this._registerAcceptedEvent(),this._registerEndedEvent(),this._registerFailedEvent(),this._registerErrorInfoEvent(),this._registerProgressEvent(),this._registerConnectedEvent(),this._registerSDPEvent(),this._registerPeerConnectionEvent(),this._registerEngageLocalVideoAddedEvent(),this._registerEngageRemoteVideoAddedEvent(),this._registerEngageRemoteVideoRemovedEvent(),this._registerEngageLocalVideoRemovedEvent(),this._registerEngageRemoteStreamEvent(),this._registerLocalStreamEvent(),this._registerEngageUpgradeVideoAccessDeniedEvent(),this._registerEngageSwitchCameraEvent(),this._registerLocalVideoAddedEvent(),this._registerUpgradeVideoAccessDeniedEvent(),this._registerMutedEvent(),this._registerUnMutedEvent(),this._registerReferEvent(),this._registerEngageCallTransferInitiatedEvent(),this._registerEngageCallTransferSucceededEvent(),this._registerEngageScreenShareStartedEvent(),this._registerEngageScreenShareStoppedEvent(),this._registerMaxResolutionSupportedEvent(),this._registerIceConnectionStateChangedEvent()}},{key:"_registerMutedEvent",value:function(){var e=this;this._registerEventWithJssip(b.muted,(function(t){var n;Qt.debug("Got Mute event %o",t),!0===(null==t?void 0:t.video)&&null!=(n=e._updatedLocalStream)&&n.getVideoTracks()[0]&&(e._updatedLocalStream.getVideoTracks()[0].enabled=!1),e._executeUserCallbacks(b.muted,t)}))}},{key:"_registerUnMutedEvent",value:function(){var e=this;this._registerEventWithJssip(b.unmuted,(function(t){var n;Qt.debug("Got unMute event %o",t),!0===(null==t?void 0:t.video)&&null!=(n=e._updatedLocalStream)&&n.getVideoTracks()[0]&&(e._updatedLocalStream.getVideoTracks()[0].enabled=!0),e._executeUserCallbacks(b.unmuted,t)}))}},{key:"_registerReferEvent",value:function(){var e=this;this._registerEventWithJssip("refer",(function(t){Qt.debug("Got refer event %o",t),Qt.debug("Dialing to referred number %s",null==t||null==(o=t.request)||null==(o=o.refer_to)||null==(o=o._uri)?void 0:o._user);var n,r,i,o={};o.mediaConstraints={audio:!0,video:e.hasLocalVideo()},o.extraHeaders=(n=null==(n=t.request.refer_to)||null==(n=n.uri)?void 0:n.toString(),i=[],n&&((n=n.split("?")[1])?(r=_t(n),i.push("".concat(M,": ").concat(n)),r.forEach((function(e,t){return i.push("".concat(t,": ").concat(e))}))):i.push("".concat(M,": additional-info=na"))),i),t.accept(null,o),e._isCallGotReferred=!0,e.emit(b.calltransferinitiated,{to:null==t||null==(n=t.request)||null==(r=n.refer_to)||null==(o=r._uri)?void 0:o._user})}))}},{key:"_registerErrorInfoEvent",value:function(){var e=this;this._registerEventWithEngageDigital(k.errorinfo,(function(t){Qt.debug("Got errorinfo event: %o",t),e._executeUserCallbacks(k.errorinfo,t)}))}},{key:"_registerIceCandidateEventHandler",value:function(){Qt.debug("Entering registerIceCandidateEventHandler");var e=this._configParams;this._session.on("icecandidate",(function(t){it(t,e.iceTimeout),it.isIceTimeoutRegistered=!0}))}},{key:"_registerConnectingEvent",value:function(){var e=this;this._registerEventWithJssip(b.connecting,(function(){e._callState="connecting",Qt.debug("Call is Connecting"),e._executeUserCallbacks(b.connecting)}))}},{key:"_executeUserCallbacks",value:function(e,t){try{var n=this._eventHandlerMap&&this._eventHandlerMap.get(e);n&&n.forEach((function(e){return t?e(t):e()}))}catch(n){Qt.debug("Got error %o while executing usercallback for the event %s",n,e)}}},{key:"_registerAcceptedEvent",value:function(){this._registerEventWithJssip("accepted",(function(e){Qt.debug("Call Accepted, originator %s",e.originator)}))}},{key:"_registerConnectedEvent",value:function(){var e=this;this._registerEventWithJssip("confirmed",(function(t){e._callState=E,Qt.debug("Call Connected"),e._isCallGotReferred?e.emit(b.calltransfersucceeded):e._executeUserCallbacks(b.connected,t)}))}},{key:"_registerLocalVideoAddedEvent",value:function(){var e=this;this._registerEventWithJssip(b.localvideoadded,(function(t){Qt.debug("localvideo added event %o",t),t=t.stream,e._executeUserCallbacks(b.localvideoadded,{stream:t})}))}},{key:"_registerPeerConnectionEvent",value:function(){var e=this;this._registerEventWithJssip("peerconnection",(function(t){e._configParams.enableWebRTCStats&&Pt(t.peerconnection,e._configParams.webRTCStatsInterval),Qt.debug("Engage digital enableWebRTCStats %s",e._configParams.enableWebRTCStats),Qt.debug("Got peerconnection event %o",t),e._startListenToPeerConnectionEvents()}))}},{key:"_registerEngageLocalVideoAddedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.localvideoadded,(function(t){Qt.debug("Local Video added event %o",t.stream.getVideoTracks()),e._updatedLocalStream=t.stream,e._executeUserCallbacks(b.localvideoadded,t)}))}},{key:"_registerEngageRemoteVideoAddedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.remotevideoadded,(function(t){for(var n=t.stream.getVideoTracks(),r=0;r<n.length;++r)1<n.length&&(n[r].enabled=!1);t=new MediaStream([t.stream.getAudioTracks()[0]].concat(qt(n))),Qt.debug("Remote Video added event %o",t),e._executeUserCallbacks(b.remotevideoadded,{stream:t})}))}},{key:"_registerEngageRemoteVideoRemovedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.remotevideoremoved,(function(t){t=new MediaStream([t.stream.getAudioTracks()[0]]),Qt.debug("Remote Video removed event %o",t),e._executeUserCallbacks(b.remotevideoremoved,{stream:t})}))}},{key:"_registerEngageLocalVideoRemovedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.localvideoremoved,(function(t){Qt.debug("Local Video removed event %o",t),e._updatedLocalStream=t.stream,e._executeUserCallbacks(b.localvideoremoved,t)}))}},{key:"_registerEngageRemoteStreamEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.remotestream,(function(t){Qt.debug("Got remote stream %o",t),e._executeUserCallbacks(b.remotestream,t)}))}},{key:"_registerLocalStreamEvent",value:function(){var e=this;this._registerEventWithJssip(b.localstream,(function(t){Qt.debug("Got Local stream : %o joinWithVideoMuted : %s",t,e._callParams.joinWithVideoMuted),e._callParams.joinWithVideoMuted&&"boolean"==typeof e._callParams.joinWithVideoMuted&&e.enableVideo(!1),e._updatedLocalStream=t.stream,e._executeUserCallbacks(b.localstream,t)}))}},{key:"_registerEngageUpgradeVideoAccessDeniedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.upgradevideoaccessdenied,(function(t){Qt.debug("User Denied Video access while trying to upgrade, in offer %o",t),t=ct(A.userDeniedMediaAccess,t),e._executeUserCallbacks(b.upgradevideoaccessdenied,t)}))}},{key:"_registerUpgradeVideoAccessDeniedEvent",value:function(){var e=this;this._registerEventWithJssip(b.upgradevideoaccessdenied,(function(t){Qt.debug("User Denied Video access while trying to upgrade, in answer %o",t),t=ct(A.userDeniedMediaAccess,t),e._executeUserCallbacks(b.upgradevideoaccessdenied,t)}))}},{key:"_registerEngageSwitchCameraEvent",value:function(){var e=this;this._registerEventWithEngageDigital("switchcamerastream",(function(t){Qt.debug("switchcamerastream %o",t),e._executeUserCallbacks("switchcamerastream",t)}))}},{key:"_registerEngageCallTransferInitiatedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.calltransferinitiated,(function(t){Qt.debug("Got calltransferinitiated event %o",t),e._callState="calltransferinitiated",e._executeUserCallbacks(b.calltransferinitiated,t)}))}},{key:"_registerEngageCallTransferSucceededEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.calltransfersucceeded,(function(){Qt.debug("Got calltransfersucceeded event"),e._executeUserCallbacks(b.calltransfersucceeded)}))}},{key:"_registerEngageScreenShareStartedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.screensharestarted,(function(){Qt.debug("Got screensharestarted event"),e._executeUserCallbacks(b.screensharestarted)}))}},{key:"_registerEngageScreenShareStoppedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.screensharestopped,(function(t){Qt.debug("Got screensharestopped event %o",t),e._executeUserCallbacks(b.screensharestopped,t)}))}},{key:"_registerMaxResolutionSupportedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.maxresolutionsupported,(function(t){Qt.debug("Resolution set by media server as per profile-level-id",t),e._executeUserCallbacks(b.maxresolutionsupported,t)}))}},{key:"_registerIceConnectionStateChangedEvent",value:function(){var e=this;this._registerEventWithEngageDigital(b.iceconnectionstatechanged,(function(t){Qt.debug("Ice connection state:",t),e._executeUserCallbacks(b.iceconnectionstatechanged,t)}))}},{key:"_registerEndedEvent",value:function(){var e=this;this._registerEventWithJssip("ended",(function(t){Qt.debug("Call Ended %o",t),"local"===t.originator&&(Qt.debug("You Disconnected"),e._callState="ended",e._executeUserCallbacks(b.disconnected,t),e._clearInternals()),"remote"===t.originator&&(e._isCallEndedDueToRefer(t)?Qt.debug("As part of refer, got bye for current call. First SessionId %s refer sessionId %s",e._firstSessionId,e._sessionId):(Qt.debug("Peer Disconnected %o",t),e._callState="ended",e._executeUserCallbacks(b.peerdisconnected,t),e._clearInternals()))}))}},{key:"_isCallEndedDueToRefer",value:function(e){return this._isCallGotReferred&&e.sessionid===this._firstSessionId}},{key:"_registerFailedEvent",value:function(){var e=this;this._registerEventWithJssip(b.failed,(function(t){e._callState="failed",Qt.debug("Call Failed"),t=ct(t.cause),e._executeUserCallbacks(b.failed,t),e._clearInternals()}))}},{key:"_registerProgressEvent",value:function(){var e=this;this._registerEventWithJssip("progress",(function(t){e._callState="ringing",Qt.debug("Call is in Progress"),e._executeUserCallbacks(b.ringing,t)}))}},{key:"getAudioRole",value:function(e,t,n){return!0===e?"answer"===n?"passive":"actpass":!0===t?"active":void 0}},{key:"getVideoRole",value:function(e,t,n){if(!0===e||!0===t)return"answer"===n?"active":"actpass"}},{key:"_registerSDPEvent",value:function(){var e=this;this._registerEventWithJssip("sdp",(function(t){if("local"===t.originator&&"offer"===t.type&&e._callParams){var n=qe.parse(t.sdp),r=n.media.find((function(e){return"video"===e.type})),i=n.media.find((function(e){return"audio"===e.type}));if(e._isInitialInvite||e.preferCodec(i,null==(i=e._callParams.codecPreferences)?void 0:i.audio),!0===pt(t)&&e.preferCodec(r,null==(i=e._callParams.codecPreferences)?void 0:i.video),t.sdp=qe.write(n),e._isInitialInvite||(e._isInitialInvite=!0,e._isCaller=!0),!e._needVideoMline&&(e._needVideoMline=pt(t),r=function(e){if(e)for(var t=0;t<e.length;t++)if("video"===e[t].type)return!0;return!1}(e._backedUpMLinesFromOffer),!0===e._isCallee&&!1===r)){Qt.debug("recalculating the backUpMlines");var o=qe.parse(t.sdp),l=o.media;o.media=[];for(var u=0;u<l.length;u++){var a=l[u];a.port=0,a.direction="inactive",o.media.push(a)}e._backedUpMLinesFromOffer=o.media}i=e.getAudioRole(e._isCaller,e._isCallee,t.type),n=e.getVideoRole(e._isCaller,e._isCallee,t.type),Qt.debug("Current ICE roles audio=%s & video=%s ",i,n),ft(t,e._backedUpMLinesFromOffer,i,n),yt(t),Qt.debug("Added Codec Preferences in the sdp for type %s and originator %s",t.type,t.originator),Qt.debug("SDP data: ",t.sdp)}else"remote"===t.originator&&"offer"===t.type?(Qt.debug("Got remote sdp offer"),St()&&((r=qe.parse(t.sdp)).media.map((function(e,t){"audio"===e.type&&e.rtp&&void 0!==e.maxptime&&0<e.rtp.length&&"opus"===e.rtp[0].codec.toLowerCase()&&(Qt.debug("set maxptime to 20 at sdp media at index %s",t),e.maxptime=20)})),t.sdp=qe.write(r)),e._needVideoMline||(e._needVideoMline=pt(t)),St()&&(i=ht(t),e._needVideoMline&&!1===i&&(e._sendRemoveVideoEvent=!0)),e._backedUpMLinesFromOffer=dt(t,e._needVideoMline),e._isInitialInvite||(e._isInitialInvite=!0,e._isCallee=!0),Ct(t),Ct(t),bt(t),Qt.debug("Modified SDP after removing unwanted mLines  %s",t.sdp),t&&t.sdp&&e.determineMaxVideoResolution(t.sdp)):"local"===t.originator&&"answer"===t.type?(Qt.debug("Answer sdp generated"),n=e.getAudioRole(e._isCaller,e._isCallee,t.type),r=e.getVideoRole(e._isCaller,e._isCallee,t.type),Qt.debug("Current ICE roles audio=%s & video=%s ",n,r),ft(t,e._backedUpMLinesFromOffer,n,r),yt(t),Qt.debug("Modified SDP with required mLines %s",t.sdp)):"remote"===t.originator&&"answer"===t.type&&(Qt.debug("Answer sdp received"),St()&&(i=ht(t),e._needVideoMline&&!1===i&&(e._sendRemoveVideoEvent=!0)),dt(t,e._needVideoMline),Ct(t),bt(t),t&&t.sdp&&e.determineMaxVideoResolution(t.sdp));t.sdp=t.sdp.replace(/a=extmap:\d{1,} urn:3gpp:video-orientation\r\n/g,""),t.sdp=e.removeIpv6Candidates(t.sdp)}))}},{key:"determineMaxVideoResolution",value:function(e){var t,n;e=qe.parse(e);(e=(Qt.debug("** tempSDP %o",e),e.media.find((function(e){return"video"===e.type}))))&&"UDP/TLS/RTP/SAVPF"===e.protocol&&(t=-1!=e.payloads.toString().indexOf(" ")?parseInt(e.payloads.toString().split(" ")[0]):e.payloads,n=e.rtp.find((function(e){return e.payload===t})),Qt.debug("** Extracted RTP: ",n),n&&"H264"===n.codec&&(Qt.debug("** RTP.Codec = h264 found"),n=e.fmtp.find((function(e){return e.payload===t})).config.split(";").filter((function(e){return e.includes("profile-level-id")}))[0].split("=")[1],Qt.debug("** Extracted profile-Id: ",n),e=Mt.getSelectedCameraResolution(),n&&e!==Ft[n]&&(this._maxresolutionsupported=Ft[n],Qt.debug("** Resolution and Profile_level_resolution %s %s",e,Ft[n]),this.emit(b.maxresolutionsupported,Ft[n]))))}},{key:"removeIpv6Candidates",value:function(e){return e.replace(/a=candidate:\d{1,} \d{1,} \w{3} \d{1,} [\w]{4}:.*\r\n/g,"")}},{key:"preferCodec",value:function(e,t){var n,r;e&&t&&qt(t).reverse().forEach((function(t){var i,o,l,u;if(t.includes("-")?(n=t.slice(0,t.indexOf("-")),r=t.slice(t.lastIndexOf("-")+1)):n=t,t=e.rtp.filter((function(e){return e.codec&&e.codec.toLowerCase()===n.toLowerCase()})).map((function(e){return e.payload}))){var a=e.payloads.toString().split(" ").map((function(e){return parseInt(e,10)})),s=0<(s=(s=e,u=[],(l=r)&&s.fmtp.filter((function(e){e.config.split(";").find((function(t){I[l]==t&&u.push(e.payload)}))})),u)).length?s:t;i=e,o=[],(t=s).map((function(e){i.fmtp.filter((function(t){t.payload!=e||!t.config.includes("packetization-mode=0")&&(t.config.includes("packetization-mode")||o.includes(e))||o.push(e)}))}));var c,f=Vt((0<o.length?o:t).reverse());try{for(f.s();!(c=f.n()).done;){var d=c.value,h=a.indexOf(d);a.splice(h,1),a.unshift(d)}}catch(t){f.e(t)}finally{f.f()}e.payloads=a.join(" ")}}))}},{key:"_setIncomingRequestHeaders",value:function(e){for(var t in this._incomingInviteRequestHeaders=new Map,e)this._incomingInviteRequestHeaders.set(t.toLowerCase(),e[t])}},{key:"getIncomingCallHeader",value:function(e){if(e&&"string"==typeof e&&this._incomingInviteRequestHeaders){var t=this._incomingInviteRequestHeaders.get(e.toLowerCase());if(void 0!==t){if(1<t.length){var n,r=[];for(n in t)r.push(t[n].raw);return r}return t[0].raw}}Qt.debug("headerName %s is not found or this is not an incoming session",e)}},{key:"_registerEventWithJssip",value:function(e,t){this._session.on(e,t)}},{key:"_registerEventWithEngageDigital",value:function(e,t){0==this.listenerCount(e)&&this.on(e,t)}},{key:"_checkState",value:function(){if(!this._session)throw Qt.debug("Session State is not connected"),new Je("InvalidStateError","",gt[0])}},{key:"_getVideoTransceiver",value:function(){var e=this.getPeerConnection().getTransceivers(),t=(Qt.debug("Transceivers %o",e),null);if(St()){t=null;for(var n,r=0;r<e.length;r++)if(Qt.debug("videoTransiver[%o] = %o",r,e[r]),"video"===(null==(n=e[r].sender)||null==(n=n.track)?void 0:n.kind)&&!1===e[r].stopped){t=e[r];break}Qt.debug("videoTranseiver %o",t),t&&!0===t.stopped?Qt.debug("videoTranseiver is stopped"):t?Qt.debug("videoTranseiver is active"):Qt.debug("videoTranseiver is not available")}else t=e.find((function(e){return"video"===(null==e||null==(e=e.sender)||null==(e=e.track)?void 0:e.kind)}));return t}},{key:"_getAudioTransceiver",value:function(){var e=this.getPeerConnection().getTransceivers().find((function(e){return"audio"===(null==e||null==(e=e.sender)||null==(e=e.track)?void 0:e.kind)}));return Qt.debug("audioTransceiver %o",e),e}},{key:"_reactNativeAddVideo",value:function(){var e,t=this,n=(Qt.debug("1 React native way of adding video"),this.getPeerConnection()),r=this.getPeerConnection().localDescription,i=this._getVideoDirection(r);Qt.debug("video direction is %s",i),"sendrecv"===i?Qt.debug("Video is already there"):(e={rtcOfferConstraints:{offerToReceiveAudio:1,offerToReceiveVideo:1}},navigator.mediaDevices.getUserMedia({video:!0}).then((function(r){var o,l;!i||"inactive"!==i&&"recvonly"!==i?(o=r.getVideoTracks()[0],Qt.debug("LocalStreams size : %s",n.getLocalStreams().length),l=n.getLocalStreams()[0].getAudioTracks()[0],n.getLocalStreams()[0].removeTrack(l),l=new MediaStream([l,o]),n.removeStream(n.getLocalStreams()[0]),Qt.debug("LocalStreams size : %s",n.getLocalStreams().length),n.addStream(l),t.emit(b.localvideoadded,{stream:l}),Qt.debug("renegotiate reinvite flow, audio track length %s : steam length : %d",n.getLocalStreams()[0].getAudioTracks().length,n.getLocalStreams().length)):(o=r.getVideoTracks(),Qt.debug("Sending addVideo renegotiate"),l=n.getLocalStreams()[0].getAudioTracks()[0],n.removeStream(n.getLocalStreams()[0]),r=new MediaStream([l,o[0]]),n.addStream(r),t.emit(b.localvideoadded,{stream:r})),t._session.renegotiate(e)})).catch((function(e){Qt.error("Error in media access %o",e),t.emit(b.upgradevideoaccessdenied,{originator:"local",message:null,cause:A.userDeniedMediaAccess})})))}},{key:"_stopMediaStream",value:function(){Mt._closeMediaStream(this._updatedLocalStream),Mt._updatedStream&&Mt._closeMediaStream(Mt._updatedStream),Mt._updatedModifiedStream&&Mt._closeMediaStream(Mt._updatedModifiedStream),this._updatedAddVideoStream&&Mt._closeMediaStream(this._updatedAddVideoStream),this._generateNewStreamAddVideo&&Mt._closeMediaStream(this._generateNewStreamAddVideo)}},{key:"_clearInternals",value:function(){Qt.debug("Start clearing the session internals"),jt(),this._stopMediaStream(),this.emit("sessionTerminated",this._sessionId),this._session=null,this._sessionId=null,this._callState=null,this._callParams=null,this._originator=null,this._sessionState=null,this._eventHandlerMap.clear(),this._defaultCallParams=null,it.isIceTimeoutRegistered=!1,Qt.debug("End clearing the session internals")}},{key:"_checkAndThrowErrorInInvalidState",value:function(e){if("INVALID_STATE_ERROR"===e.name)throw new Je("InvalidStateError","",gt[""+e.status])}}])&&zt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}();function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nn=n(114),rn=new u.Logger("ConfigParamsValidator"),on={iceTimeout:{defaultVal:5,validate:function(e){if(Object(U.isDecimal)(e)){var t=Number(e);if(0<t)return t}rn.debug("invalid value %s for iceTimeout",e)}},registrarServer:{validate:function(e){if(Object(U.isEmpty)(e))throw new Je(A.configurationError,"registrarServer",e);return e}},enableWebRTCStats:{defaultVal:!1,validate:function(e){if("boolean"==typeof e)return e}},lightOffOnVideoMute:{defaultVal:!1,validate:function(e){if("boolean"==typeof e)return e}},webRTCStatsInterval:{defaultVal:30,validate:function(e){if(Object(U.isDecimal)(e)){var t=Number(e);if(0<t)return t}rn.debug("invalid value %s for webRTCStatsInterval",e)}},log:{defaultVal:{console:{enable:!1},blob:{enable:!1,emptyAfterRetrieval:!0}},validate:function(e){var t={};if("object"===tn(e=e||{})){var n=e.console;if(void 0!==n){if("object"!==tn(n)||"boolean"!=typeof n.enable)return;t.console={},t.console.enable=n.enable}if(void 0!==(n=e.blob)){if("object"!==tn(n))return;if(void 0!==n.enable){if(t.blob={},"boolean"!=typeof n.enable)return;t.blob.enable=n.enable}if(void 0!==n.emptyAfterRetrieval){if(t.blob=t.blob||{},"boolean"!=typeof n.emptyAfterRetrieval)return;t.blob.emptyAfterRetrieval=n.emptyAfterRetrieval}}}if(0<Object.keys(t).length)return t},merge:function(e,t){return nn.merge(e,t)}},screenShareEnabled:{defaultVal:!1,validate:function(e){if("boolean"==typeof e)return e}},iceRestart:{defaultVal:!1,validate:function(e){if("boolean"==typeof e)return e}}};function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{l||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dn(e,t){return(dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var _n=n(34),gn=new u.Logger("EngageDigitalClient"),mn=function(){var e=i,t=_n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dn(e,t);var r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pn(e);n=t?(n=pn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ln(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return hn(r)}}(i);function i(e,t){var o,l,a,s,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},h=this;if(!(h instanceof(g=i)))throw new TypeError("Cannot call a class as a function");vn(hn(o=r.call(this)),"_checkWebrtcSupported",(function(){var e;vt()||(e=ct(A.webrtcnotsupported),o.emit(y,e))})),vn(hn(o),"getUniqueClientId",(function(){return o._uniqueClientId})),vn(hn(o),"getConfig",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof e||void 0===e)gn.warn("Get Config: parameter %s not accepted",e),t=ct(A.typeError,e),o.emit(y,t);else{var t=e&&e.trim();if(!t)return o._configParams;if(t in o._configParams)return o._configParams[t];e=ct(A.typeError,e),o.emit(y,e),gn.warn("Get Config: Parameter %s not found",t)}})),vn(hn(o),"setConfig",(function(e,t){try{if(gn.debug("Set Config: confName %s value %o",e,t),e in w){var n,r=on[e];if(r)return void 0===(n=r.validate(t))?(o._emitErrorInfo(A.configurationError,[t,e]),!1):(r.merge&&(n=r.merge(o._configParams[e],n)),o._configParams[e]=n,"log"===e&&u.logHandler.updateLogSettings(n),"enableWebRTCStats"===e&&(n?o.collectStatsWhenSessionIsAlive():jt()),!0);var i=o._UA.set(c[e],t);return i?o._configParams[e]=t:o._emitErrorInfo(A.configurationError,[t,e]),i}return o._emitErrorInfo(A.configurationError,[t,e]),!1}catch(n){return o._emitErrorInfo(A.configurationError,[t,e]),!1}})),vn(hn(o),"_registerEventToEngageDigitalClient",(function(e,t){o.on(e,t)})),vn(hn(o),"addEventHandler",(function(e,t){var n;if(!o._checkInvalidEvent(e))switch(e){case void 0:case null:gn.debug("Invalid Event name [%s]",e),n=ct(A.invalidEvent,e),o.emit(y,n);break;case d:o._registerEventToEngageDigitalClient(e,t);break;default:o._eventHandlerMap.get(e)||o._eventHandlerMap.set(e,[]),o._eventHandlerMap.get(e).push(t),gn.debug("addeventHandler for %s",e)}})),vn(hn(o),"_registerNewSessionEvent",(function(){o._registerEventToUA(v,(function(e){var t,n;gn.debug("Got newRTCSession event %o",e),o._sessionMap&&0<o._sessionMap.size&&!e.isRefer?(gn.warn("Rejecting the request originated from [%s] as you are already in a call",e.originator),e.session.terminate({status_code:486})):("local"===e.originator?(gn.debug("newRTCSession is for outgoing call"),o._engageSession&&e.isRefer&&(o._sessionMap.delete(o._engageSession.getSessionId()),o._engageSession.removeEventHandler(b.connecting),o._engageSession.removeEventHandler(b.ringing))):(gn.debug("newRTCSession is for incoming call"),o._engageSession=new en({},o._defaultConfig.callParams),o._engageSession._setIncomingRequestHeaders(e.request.headers)),o._configParams.enableWebRTCStats&&Pt(null==(t=e.session)?void 0:t._connection,o._configParams.webRTCStatsInterval),o._engageSession._setConfig(o._configParams),o._engageSession._originator=e.originator,o._engageSession._setSession(e.session),gn.debug("Set Engage Session to RTCUtils"),o._engageDigitalRTCUtils._setSession(e.session),o._sessionMap.set(o._engageSession.getSessionId(),o._engageSession),e.isRefer||(o._engageSession._firstSessionId=e.session._id),t=o._eventHandlerMap.get("newRTCSession"),"remote"===e.originator&&(n=o._engageSession.hasRemoteVideo({sdp:e.request.body}),gn.debug("hasRemoteVideo %s",n),o._engageSession.incomingCallWithVideo=n,(n=e.request.getHeader(M))&&(o._engageSession.callTransferHeaders=_t(n),gn.debug("This call is being transferred here. Additional data : %o",o._engageSession.getCallTransferHeaders()))),gn.debug("this.incomingCallWithVideo %s : ",o._engageSession.isIncomingCallWithVideo()),t&&!e.isRefer&&t.forEach((function(e){return e(o._engageSession)})),o._engageSession.on("sessionTerminated",(function(e){gn.debug("Clearing session with id %s from session map",e),o._sessionMap.delete(e),Mt._clearRTCUtilsInternals()})))}))})),vn(hn(o),"connect",(function(){var e;gn.debug("connect"),o._connectionState==C?o._UA.start():(e=ct(A.connectionError),o.emit(y,e),gn.warn("Connection Error: Connection already established"))})),vn(hn(o),"disconnect",(function(){try{o._clearInternals(),o._sessionMap.clear(),o._UA.stop(),o._isFirstTimeConnected=!0,o._connectionState=T,u.logHandler.clearLogs(),o._eventHandlerMap.clear(),o._engageDigitalRTCUtils=null}catch(e){gn.warn("Connection Error: Connection not initiated ")}})),vn(hn(o),"makeCall",(function(e,t){if(!o.isConnected())throw new Je(A.notConnected);if(!(e=e?e.trim():""))throw new Je(A.configurationError,"uri",e);gn.debug("makeCall Start");var n=ot(t,o._defaultConfig.callParams);gn.debug("updatedMediaConstraints %o callParams.mediaConstraints %o",Mt._updatedMediaConstraints,null==t?void 0:t.mediaConstraints),o._engageSession=new en(n),o._engageSession._setConfig(o._configParams);var r={audio:(null!=(r=Mt._updatedMediaConstraints)&&r.audio?{audio:Mt._updatedMediaConstraints.audio}:{audio:!0}).audio};null!=t&&null!=(t=t.mediaConstraints)&&t.video&&(t=null!=(t=Mt._updatedMediaConstraints)&&t.video?{video:Mt._updatedMediaConstraints.video}:{video:!0},r.video=t.video),gn.debug("mediaConstraints : %o",r),t=lt(n,r);return o._UA.call(e,t),gn.debug("makeCall End"),o._engageSession})),vn(hn(o),"getUri",(function(){try{return gn.debug("getUri called with %o",o._UA.configuration.uri),o._UA.configuration.uri}catch(t){gn.warn("Get uri Error: %o",t);var e=ct(A.internalServerError);o.emit(y,e)}})),vn(hn(o),"isConnected",(function(){try{return o._connectionState===S&&o._UA.isConnected()}catch(t){var e=ct(A.connectionError);o.emit(y,e),gn.warn("Connection Error: Connection not initiated ")}})),vn(hn(o),"getSessions",(function(){return 0<o._sessionMap.size?o._sessionMap:(gn.debug("No session is running currently"),null)})),vn(hn(o),"getSessionById",(function(e){return e&&0<o._sessionMap.size?o._sessionMap.get(e):(gn.debug("getSessions method called once you get newRtcSession"),gn.debug("Session not available for provided session Id",e),null)})),vn(hn(o),"getEngageDigitalRTCUtils",(function(){return o._engageDigitalRTCUtils})),vn(hn(o),"getEngageDigitalStats",(function(){return Ut})),vn(hn(o),"disableEngageDigitalStats",(function(){o.setConfig("enableWebRTCStats",!1)})),vn(hn(o),"enableEngageDigitalStats",(function(){o.setConfig("enableWebRTCStats",!0)})),vn(hn(o),"joinRoom",(function(e,t){o.makeCall(e,t)})),h=new u.Logger,g=n(157),l=u.logHandler.logSettings,u.logHandler.updateLogSettings({console:{enable:!0},blob:{enable:!0}}),a=Fe.os,_=Fe.browserType,p=Fe.browserVersion,s=Fe.version,"ReactNative"!==Fe.clientType?(h.debug("version: %s",g.version),h.debug("[%s]: Application running on [%s] browser and version is [%s] ",a,_,p)):(h.debug("version: ".concat(g.version)),h.debug("Application running on ".concat(a,": ").concat(s))),vt(),u.logHandler.updateLogSettings(l),gn.debug("Begin Constructor");var p,_=on.log.validate(f.log),g=(_&&(p=on.log.merge(on.log.defaultVal,_),u.logHandler.updateLogSettings(p)),o._userProvidedConfigParams=function(e,t,n){if(tt.debug("domain %s",t),!e)throw new Je(A.configurationError,"userIdentity",e);if(t)return t=t.constructor==Array?t:[t],et({userIdentity:e.replace(/\s+/g,""),domain:t},n);throw new Je(A.configurationError,"domain",t)}(e,t,f),o._initialized=!!o._initialized,o._connectionState=C,o._eventHandlerMap=new Map,o._sessionMap=new Map,o._disabledCodecs=null,o._isFirstTimeConnected=!0,o._clientIp=null,o._engageDigitalRTCUtils=Mt,function(e,t){if(t=!(1<arguments.length&&void 0!==t)||t,tt.debug("generateURL domain %s",e),e)return"".concat(t?"https":"http","://").concat(e,"/").concat("engageDigitalConfig.js");throw new Je("domain",e)}(o._userProvidedConfigParams.domain,o._userProvidedConfigParams.isSecureWeb));return o._registerEngageDigitalEvents(),o._loadConfig(g).then((function(e){var t,n;o._defaultConfig=Object.assign({},e),o._disabledCodecs=null==e||null==(t=e.configParams)?void 0:t.unsupportedVideoCodecs,gn.debug("Got unSupportedCodec list from config [%o]",o._disabledCodecs),o._configParams=o._buildConfigParams(o._userProvidedConfigParams,e.configParams),o.updateLogSettings(o._configParams.log),o._uniqueClientId=(t=o._configParams,n=(e=o._clientIp)||"clientIP",tt.debug("ClientIp %s",e),((e=t.userName)?t.userName.trim():t.userName)?"sip:".concat(e.replace(/\s+/g,"").concat("_").concat(nt(5)),"@").concat(n):(t="EngageDigital_".concat(nt(5)),"sip:".concat(t,"@").concat(n))),o._createAgent(),o._checkWebrtcSupported()})).catch((function(e){gn.error("Engage Digital client load error %o",e),o.emit(m,e)})),o}return e=i,(t=[{key:"updateLogSettings",value:function(e){return this.setConfig("log",e)}},{key:"_emitErrorInfo",value:function(e,t){e=ct(e,t),this.emit(y,e),gn.warn(e)}},{key:"_registerEventToUA",value:function(e,t){this._UA.on(e,t)}},{key:"_registerJsSipEvents",value:function(){this._registerConnectingEvent(),this._registerConnectedEvent(),this._registerDisconnectedEvent(),this._registerNewSessionEvent(),this._registerRegisteredEvent(),this._registerUnRegisteredEvent(),this._registerRegistrationFailedEvent(),this._registerRegistrationExpiringEvent(),this._registerNewMessageEvent(),this._registerSipEvent()}},{key:"_registerEngageDigitalEvents",value:function(){this._registerFailedEvent(),this._registerErrorInfoEvent()}},{key:"_registerFailedEvent",value:function(){var e=this;this._registerEventToEngageDigitalClient(m,(function(t){gn.debug("emitting failed event"),e._executeUserCallbacks(m,t)}))}},{key:"_registerErrorInfoEvent",value:function(){var e=this;this._registerEventToEngageDigitalClient(y,(function(t){e._executeUserCallbacks(y,t)}))}},{key:"_executeUserCallbacks",value:function(e,t){try{var n=this._eventHandlerMap&&this._eventHandlerMap.get(e);n&&n.forEach((function(e){return t?e(t):e()}))}catch(n){gn.debug("Got error %o while executing usercallback for the event %s",n,e)}}},{key:"_registerConnectingEvent",value:function(){var e=this;this._registerEventToUA(f,(function(t){e._connectionState="connecting",e._isFirstTimeConnected?(gn.debug("Event %s and data %o",f,t),e._executeUserCallbacks(f,t)):(gn.debug("Event %s and data %o",_,t),e._executeUserCallbacks(_,t))}))}},{key:"_registerRegistrationExpiringEvent",value:function(){var e=this;this._registerEventToUA("registrationExpiring",(function(){gn.debug("Registration is going to be expired, doing register"),e._UA.register()}))}},{key:"_registerNewMessageEvent",value:function(){this._registerEventToUA("newMessage",(function(){}))}},{key:"_registerSipEvent",value:function(){this._registerEventToUA("sipEvent",(function(){}))}},{key:"_registerConnectedEvent",value:function(){var e=this;this._registerEventToUA(h,(function(t){gn.debug("needRegistration at connected event : %s",e._configParams.needRegistration),e._configParams.needRegistration||(e._connectionState=S,e._isFirstTimeConnected?(gn.debug("Event %s and data %o",h,t),e._executeUserCallbacks(h,t),e._isFirstTimeConnected=!1):(gn.debug("Event %s and data %o",g,t),e._executeUserCallbacks(g,t)))}))}},{key:"_registerDisconnectedEvent",value:function(){var e=this;this._registerEventToUA(p,(function(t){e._isFirstTimeConnected=!1,e._connectionState=T,gn.debug("Event %s and data %o",p,t),e._executeUserCallbacks(p,t)}))}},{key:"_registerRegisteredEvent",value:function(){var e=this;this._registerEventToUA("registered",(function(t){var n;e._isFirstTimeConnected?(gn.debug("Event %s and data %o",h,t),e._connectionState=S,e._executeUserCallbacks(h,t)):(gn.debug("Event %s and data %o",g,t),e._connectionState=S,gn.debug("SessionInfo %o",e._engageSession),(null==(n=e._engageSession)?void 0:n._sessionState)===S&&null!=(n=e._engageSession)&&n.getPeerConnection()?(gn.debug("Trigger Ice Restart"),e._engageSession.triggerIceRestart()):gn.debug("To trigger icerestart, ongoing session is required, but current session is already closed"),e._executeUserCallbacks(g,t))}))}},{key:"_registerUnRegisteredEvent",value:function(){var e=this;this._registerEventToUA("unregistered",(function(t){e._connectionState="unRegistered",gn.debug("Event %s and data %o",p,t)}))}},{key:"_registerRegistrationFailedEvent",value:function(){var e=this;this._registerEventToUA("registrationFailed",(function(t){gn.warn("registrationFailed %o",t),e._emitErrorInfo(A.registrationFailed,t.cause),e._connectionState="registrationFailed"}))}},{key:"_loadConfig",value:function(e){var t=this;if(!this._initialized)return gn.debug(e),new Promise((function(n){gn.debug("User provided configParams : %o",t._userProvidedConfigParams),fetch(e).then((function(e){return t._clientIp=e.headers.get("X-Real-IP"),gn.debug("clientIp",e.headers.get("X-Real-IP")),e.text()})).then((function(e){window.eval(e),e=window.engageDigitalCfg,t._initialized=!0,gn.debug("defaultConfig %o",e),n(e)})).catch((function(n){gn.error("",n),n=st("Failed_To_Fetch",e,"engageDigitalConfig.js"),t.emit(m,n)}))}))}},{key:"_createAgent",value:function(){try{for(var e=this._configParams,t=e.domain,n=e.userIdentity,r=(this._socketConnections=function(e,t,n){var r=!(2<arguments.length&&void 0!==n)||n,i=[];return e.forEach((function(e){var n=r?"wss://":"ws://";(n=void 0===t||Object(U.isEmpty)(t.trim())?new u.WebSocketInterface(n+e+"/kamailio"):new u.WebSocketInterface(n+e+"/"+t.trim()+"/kamailio")).via_transport="auto",i.push(n)})),i}(t,e.zoneId,e.isSecureWeb),{}),i=Object.keys(e),o=0,l=Object.entries(a);o<l.length;o++){var s=sn(l[o],2),c=s[0],f=s[1];i.includes(f)&&(r[c]=e[f])}var d="sip:".concat(n,"@").concat(this._configParams.registrarServer),h=an(an({},r),{},{contact_uri:this._uniqueClientId,uri:d,sockets:this._socketConnections,user_agent:"EngageDigital"});gn.debug("Configuration send to jssip [%o]",h),this._UA=new u.UA(h),this._UA.xClientInfoHeader=rt(),this._UA.rtcUtils=Mt,this._registerJsSipEvents(),this.emit("ready")}catch(e){throw gn.error("Create Agent Error %o",e),e.name&&(t=st(e.name,a[e.parameter],e.value),this.emit(m,t)),e}}},{key:"removeEventHandler",value:function(e){var t;this._checkInvalidEvent(e)?(t=ct(A.invalidEvent,e),this.emit(y,t),gn.warn("Invalid event name [%s]",e)):(this._eventHandlerMap.delete(e),gn.debug("Removed Event handler : %s",e))}},{key:"_buildConfigParams",value:function(e,t){var n=Object.assign({},t);return Object.keys(e).forEach((function(t){n[t]=e[t]})),function(e,t){var n,r=1<arguments.length&&void 0!==t?t:{},i=e||{};for(n in on){var o=on[n],l=o.validate(e[n]),u=void 0,a=void 0;a=void 0!==(a=void 0!==r[n]?o.validate(r[n]):a)?a:o.defaultVal,u=void 0!==l?l:a;o.merge&&(u=o.merge(a,u)),i[n]=u}return rn.debug("final configuration %o",i),i}(n,t)}},{key:"getSupportedCodecs",value:function(){var e=navigator.userAgent&&navigator.userAgent.includes("Firefox")?{video:this._supportedCodecList(P),audio:this._supportedCodecList(x)}:{video:this._supportedCodecList(RTCRtpSender.getCapabilities("video").codecs),audio:this._supportedCodecList(RTCRtpSender.getCapabilities("audio").codecs)};return gn.debug("Supported Codecs: [%o]",e),e}},{key:"_supportedCodecList",value:function(e){var t=this;try{var n,r=[];return e?((e&&e.filter((function(e){return navigator.userAgent&&!navigator.userAgent.includes("Firefox")?!t._disabledCodecs.includes(e.mimeType.split("/")[1]):!t._disabledCodecs.includes(e)}))).map((function(e){var t=e.mimeType?e.mimeType.split("/")[1]:e;e.sdpFmtpLine&&e.sdpFmtpLine.includes("packetization-mode")&&e.sdpFmtpLine.split(";").map((function(e){Object.keys(I).forEach((function(i){I[i]===e&&(n=t+"-"+i,r.includes(n)||r.push(n))}))})),r.includes(t)||r.push(t)})),r):[]}catch(t){gn.warn("SupportedCodecList Error: %o",t),e=ct(A.internalServerError),this.emit(y,e)}}},{key:"_checkInvalidEvent",value:function(e){return null==R[e]&&(gn.warn("Invalid Event [%s]",e),e=ct(A.invalidEvent,e),this.emit(y,e),!0)}},{key:"getEnvironment",value:function(){var e=Fe.os,t=Fe.browserType,n=Fe.browserVersion,r=Fe.version,i=Fe.api_level,o=Fe.clientType;return gn.debug("clientType : %s",o),"ReactNative"!==o?{os:e,browserType:t,browserVersion:n}:{os:e,version:r,api_level:i}}},{key:"getLogs",value:function(){return u.logHandler.getLogs()}},{key:"collectStatsWhenSessionIsAlive",value:function(){var e;this._sessionMap.keys().next().value&&(e=this._sessionMap.values().next().value)&&Pt(null==(e=e._session)?void 0:e._connection,this._configParams.webRTCStatsInterval)}},{key:"_clearInternals",value:function(){this._engageDigitalRTCUtils._clearRTCUtilsInternals()}}])&&fn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),i}(),yn=n(157),bn=function(){return yn.version},Cn=vt}],i={},n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=158);function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r,i}));